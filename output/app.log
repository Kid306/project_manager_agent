2025-05-18 11:45:27,780 - __main__ - INFO - Start the server on port 8012
2025-05-18 11:45:29,508 - demoRagAgent - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-05-18 11:45:29,509 - demoRagAgent - DEBUG - Tool 'multiply' routed to 'generate' (non-retrieval tool)
2025-05-18 11:45:29,509 - demoRagAgent - INFO - Initialized ToolConfig with tools: {'retrieve', 'multiply'}, routing: {'retrieve': 'grade_documents', 'multiply': 'generate'}
2025-05-18 11:45:29,510 - __main__ - INFO - Database connection pool initialized
2025-05-18 11:45:29,511 - __main__ - DEBUG - Database connection pool initialized
2025-05-18 11:45:29,512 - demoRagAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-18 11:45:29,633 - demoRagAgent - INFO - Connection db_connection_pool status: OK, test connection successful
2025-05-18 11:45:31,207 - demoRagAgent - INFO - Graph visualization saved as graph.png
2025-05-18 11:45:53,695 - __main__ - INFO - Database connection pool closed
2025-05-18 11:45:53,698 - __main__ - INFO - The service has been shut down
2025-05-18 11:45:59,397 - __main__ - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-05-18 11:45:59,398 - __main__ - DEBUG - Tool 'multiply' routed to 'generate' (non-retrieval tool)
2025-05-18 11:45:59,399 - __main__ - INFO - Initialized ToolConfig with tools: {'retrieve', 'multiply'}, routing: {'retrieve': 'grade_documents', 'multiply': 'generate'}
2025-05-18 11:45:59,400 - __main__ - INFO - Database connection pool initialized
2025-05-18 11:45:59,401 - __main__ - DEBUG - Database connection pool initialized
2025-05-18 11:45:59,401 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-18 11:45:59,425 - __main__ - INFO - Connection db_connection_pool status: OK, test connection successful
2025-05-18 11:45:59,929 - __main__ - INFO - Graph visualization saved as graph.png
2025-05-18 11:46:07,028 - __main__ - INFO - Agent processing user query
2025-05-18 11:46:12,349 - __main__ - ERROR - Error in store_memory: Error code: 401 - {'error': {'message': '无效的令牌 (request id: 20250518114856998066583NJ0UetHk)', 'type': 'new_api_error'}}
2025-05-18 11:46:12,356 - __main__ - INFO - Loading and caching prompt template from prompts/prompt_template_agent.txt
2025-05-18 11:46:12,356 - __main__ - ERROR - Error in agent processing: 'gbk' codec can't decode byte 0x80 in position 8: illegal multibyte sequence
2025-05-18 11:46:12,373 - __main__ - INFO - Message has no content, skipping
2025-05-18 11:46:27,307 - __main__ - INFO - Database connection pool closed
2025-05-18 11:49:48,853 - __main__ - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-05-18 11:49:48,854 - __main__ - DEBUG - Tool 'multiply' routed to 'generate' (non-retrieval tool)
2025-05-18 11:49:48,854 - __main__ - INFO - Initialized ToolConfig with tools: {'multiply', 'retrieve'}, routing: {'retrieve': 'grade_documents', 'multiply': 'generate'}
2025-05-18 11:49:48,855 - __main__ - INFO - Database connection pool initialized
2025-05-18 11:49:48,856 - __main__ - DEBUG - Database connection pool initialized
2025-05-18 11:49:48,857 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-18 11:49:48,880 - __main__ - INFO - Connection db_connection_pool status: OK, test connection successful
2025-05-18 11:49:49,375 - __main__ - INFO - Graph visualization saved as graph.png
2025-05-18 11:49:54,832 - __main__ - INFO - Agent processing user query
2025-05-18 11:49:56,595 - __main__ - ERROR - Error in store_memory: Error code: 401 - {'error': {'message': '无效的令牌 (request id: 20250518115241254773921corHCzRF)', 'type': 'new_api_error'}}
2025-05-18 11:49:56,603 - __main__ - INFO - Loading and caching prompt template from prompts/prompt_template_agent.txt
2025-05-18 11:49:56,604 - __main__ - ERROR - Error in agent processing: 'gbk' codec can't decode byte 0x80 in position 8: illegal multibyte sequence
2025-05-18 11:49:56,614 - __main__ - INFO - Message has no content, skipping
2025-05-18 11:50:32,505 - __main__ - INFO - Database connection pool closed
2025-05-18 11:50:35,962 - __main__ - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-05-18 11:50:35,963 - __main__ - DEBUG - Tool 'multiply' routed to 'generate' (non-retrieval tool)
2025-05-18 11:50:35,963 - __main__ - INFO - Initialized ToolConfig with tools: {'multiply', 'retrieve'}, routing: {'retrieve': 'grade_documents', 'multiply': 'generate'}
2025-05-18 11:50:35,964 - __main__ - INFO - Database connection pool initialized
2025-05-18 11:50:35,965 - __main__ - DEBUG - Database connection pool initialized
2025-05-18 11:50:35,966 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-18 11:50:35,982 - __main__ - INFO - Connection db_connection_pool status: OK, test connection successful
2025-05-18 11:50:36,491 - __main__ - INFO - Graph visualization saved as graph.png
2025-05-18 11:50:48,716 - __main__ - INFO - Database connection pool closed
2025-05-18 11:50:51,712 - __main__ - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-05-18 11:50:51,713 - __main__ - DEBUG - Tool 'multiply' routed to 'generate' (non-retrieval tool)
2025-05-18 11:50:51,713 - __main__ - INFO - Initialized ToolConfig with tools: {'multiply', 'retrieve'}, routing: {'retrieve': 'grade_documents', 'multiply': 'generate'}
2025-05-18 11:50:51,714 - __main__ - INFO - Database connection pool initialized
2025-05-18 11:50:51,715 - __main__ - DEBUG - Database connection pool initialized
2025-05-18 11:50:51,716 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-18 11:50:51,733 - __main__ - INFO - Connection db_connection_pool status: OK, test connection successful
2025-05-18 11:50:52,274 - __main__ - INFO - Graph visualization saved as graph.png
2025-05-18 11:50:57,642 - __main__ - INFO - Agent processing user query
2025-05-18 11:51:01,940 - __main__ - INFO - Loading and caching prompt template from prompts/prompt_template_agent.txt
2025-05-18 11:51:01,941 - __main__ - ERROR - Error in agent processing: 'gbk' codec can't decode byte 0x80 in position 8: illegal multibyte sequence
2025-05-18 11:51:01,951 - __main__ - INFO - Message has no content, skipping
2025-05-18 11:51:51,717 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-18 11:52:31,974 - __main__ - INFO - Database connection pool closed
2025-05-18 11:52:53,284 - __main__ - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-05-18 11:52:53,285 - __main__ - DEBUG - Tool 'multiply' routed to 'generate' (non-retrieval tool)
2025-05-18 11:52:53,286 - __main__ - INFO - Initialized ToolConfig with tools: {'retrieve', 'multiply'}, routing: {'retrieve': 'grade_documents', 'multiply': 'generate'}
2025-05-18 11:52:53,287 - __main__ - INFO - Database connection pool initialized
2025-05-18 11:52:53,288 - __main__ - DEBUG - Database connection pool initialized
2025-05-18 11:52:53,288 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-18 11:52:53,303 - __main__ - INFO - Connection db_connection_pool status: OK, test connection successful
2025-05-18 11:52:53,782 - __main__ - INFO - Graph visualization saved as graph.png
2025-05-18 11:53:40,211 - __main__ - INFO - Database connection pool closed
2025-05-18 11:53:54,712 - __main__ - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-05-18 11:53:54,714 - __main__ - DEBUG - Tool 'multiply' routed to 'generate' (non-retrieval tool)
2025-05-18 11:53:54,714 - __main__ - INFO - Initialized ToolConfig with tools: {'retrieve', 'multiply'}, routing: {'retrieve': 'grade_documents', 'multiply': 'generate'}
2025-05-18 11:53:54,735 - __main__ - INFO - Database connection pool initialized
2025-05-18 11:53:54,736 - __main__ - DEBUG - Database connection pool initialized
2025-05-18 11:53:54,739 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-18 11:53:54,860 - __main__ - INFO - Connection db_connection_pool status: OK, test connection successful
2025-05-18 11:54:05,737 - __main__ - ERROR - Unexpected error: Failed to reach https://mermaid.ink/ API while trying to render your graph after 1 retries. To resolve this issue:
1. Check your internet connection and try again
2. Try with higher retry settings: `draw_mermaid_png(..., max_retries=5, retry_delay=2.0)`
3. Use the Pyppeteer rendering method which will render your graph locally in a browser: `draw_mermaid_png(..., draw_method=MermaidDrawMethod.PYPPETEER)`
2025-05-18 11:54:05,746 - __main__ - INFO - Database connection pool closed
2025-05-18 11:54:17,152 - __main__ - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-05-18 11:54:17,153 - __main__ - DEBUG - Tool 'multiply' routed to 'generate' (non-retrieval tool)
2025-05-18 11:54:17,153 - __main__ - INFO - Initialized ToolConfig with tools: {'retrieve', 'multiply'}, routing: {'retrieve': 'grade_documents', 'multiply': 'generate'}
2025-05-18 11:54:17,154 - __main__ - INFO - Database connection pool initialized
2025-05-18 11:54:17,155 - __main__ - DEBUG - Database connection pool initialized
2025-05-18 11:54:17,156 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-18 11:54:17,171 - __main__ - INFO - Connection db_connection_pool status: OK, test connection successful
2025-05-18 11:54:17,693 - __main__ - INFO - Graph visualization saved as graph.png
2025-05-18 11:54:21,032 - __main__ - INFO - Agent processing user query
2025-05-18 11:54:24,285 - __main__ - INFO - Loading and caching prompt template from prompts/prompt_template_agent.txt
2025-05-18 11:54:24,285 - __main__ - ERROR - Error in agent processing: 'gbk' codec can't decode byte 0x80 in position 8: illegal multibyte sequence
2025-05-18 11:54:24,304 - __main__ - INFO - Message has no content, skipping
2025-05-18 11:55:17,157 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-18 11:56:17,158 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-18 11:57:17,159 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-18 11:57:27,842 - __main__ - INFO - Database connection pool closed
2025-05-18 11:57:30,981 - __main__ - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-05-18 11:57:30,982 - __main__ - DEBUG - Tool 'multiply' routed to 'generate' (non-retrieval tool)
2025-05-18 11:57:30,983 - __main__ - INFO - Initialized ToolConfig with tools: {'retrieve', 'multiply'}, routing: {'retrieve': 'grade_documents', 'multiply': 'generate'}
2025-05-18 11:57:30,983 - __main__ - INFO - Database connection pool initialized
2025-05-18 11:57:30,985 - __main__ - DEBUG - Database connection pool initialized
2025-05-18 11:57:30,985 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-18 11:57:31,000 - __main__ - INFO - Connection db_connection_pool status: OK, test connection successful
2025-05-18 11:57:31,534 - __main__ - INFO - Graph visualization saved as graph.png
2025-05-18 11:57:34,269 - __main__ - INFO - Agent processing user query
2025-05-18 11:57:37,324 - __main__ - INFO - Loading and caching prompt template from prompts/prompt_template_agent.txt
2025-05-18 11:57:44,133 - __main__ - INFO - Database connection pool closed
2025-05-18 14:58:05,781 - __main__ - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-05-18 14:58:05,782 - __main__ - DEBUG - Tool 'multiply' routed to 'generate' (non-retrieval tool)
2025-05-18 14:58:05,783 - __main__ - INFO - Initialized ToolConfig with tools: {'retrieve', 'multiply'}, routing: {'retrieve': 'grade_documents', 'multiply': 'generate'}
2025-05-18 14:58:05,783 - __main__ - INFO - Database connection pool initialized
2025-05-18 14:58:05,784 - __main__ - DEBUG - Database connection pool initialized
2025-05-18 14:58:05,785 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-18 14:58:05,807 - __main__ - INFO - Connection db_connection_pool status: OK, test connection successful
2025-05-18 14:58:06,320 - __main__ - INFO - Graph visualization saved as graph.png
2025-05-18 14:59:05,787 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-18 15:00:05,790 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-18 15:01:05,791 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-18 15:02:05,794 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-18 15:02:12,187 - __main__ - INFO - Agent processing user query
2025-05-18 15:02:14,696 - __main__ - INFO - Loading and caching prompt template from prompts/prompt_template_agent.txt
2025-05-18 15:03:05,797 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-18 15:04:05,802 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-18 15:04:20,581 - __main__ - INFO - Database connection pool closed
2025-05-18 15:08:03,332 - __main__ - INFO - Start the server on port 8012
2025-05-18 15:08:05,057 - demoRagAgent - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-05-18 15:08:05,058 - demoRagAgent - DEBUG - Tool 'multiply' routed to 'generate' (non-retrieval tool)
2025-05-18 15:08:05,058 - demoRagAgent - INFO - Initialized ToolConfig with tools: {'multiply', 'retrieve'}, routing: {'retrieve': 'grade_documents', 'multiply': 'generate'}
2025-05-18 15:08:05,059 - __main__ - INFO - Database connection pool initialized
2025-05-18 15:08:05,060 - __main__ - DEBUG - Database connection pool initialized
2025-05-18 15:08:05,061 - demoRagAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-18 15:08:05,078 - demoRagAgent - INFO - Connection db_connection_pool status: OK, test connection successful
2025-05-18 15:08:05,634 - demoRagAgent - INFO - Graph visualization saved as graph.png
2025-05-18 15:09:05,062 - demoRagAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-18 15:09:40,324 - __main__ - INFO - The user's user_input is: 你好
2025-05-18 15:09:40,334 - demoRagAgent - INFO - Agent processing user query
2025-05-18 15:09:43,147 - demoRagAgent - INFO - Loading and caching prompt template from prompts/prompt_template_agent.txt
2025-05-18 15:09:44,626 - __main__ - INFO - Streaming chunk from agent: 
2025-05-18 15:09:44,641 - __main__ - INFO - Streaming chunk from agent: 你好
2025-05-18 15:09:44,642 - __main__ - INFO - Streaming chunk from agent: ！
2025-05-18 15:09:44,679 - __main__ - INFO - Streaming chunk from agent: 有什么
2025-05-18 15:09:44,681 - __main__ - INFO - Streaming chunk from agent: 我
2025-05-18 15:09:44,695 - __main__ - INFO - Streaming chunk from agent: 可以
2025-05-18 15:09:44,696 - __main__ - INFO - Streaming chunk from agent: 帮助
2025-05-18 15:09:44,725 - __main__ - INFO - Streaming chunk from agent: 你
2025-05-18 15:09:44,731 - __main__ - INFO - Streaming chunk from agent: 的吗
2025-05-18 15:09:44,733 - __main__ - INFO - Streaming chunk from agent: ？
2025-05-18 15:09:44,735 - __main__ - INFO - Streaming chunk from agent: 
2025-05-18 15:09:44,737 - __main__ - INFO - Streaming chunk from agent: 
2025-05-18 15:10:05,064 - demoRagAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-18 15:11:05,066 - demoRagAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-18 15:12:02,622 - __main__ - INFO - Start the server on port 8012
2025-05-18 15:12:04,340 - demoRagAgent - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-05-18 15:12:04,341 - demoRagAgent - DEBUG - Tool 'multiply' routed to 'generate' (non-retrieval tool)
2025-05-18 15:12:04,342 - demoRagAgent - INFO - Initialized ToolConfig with tools: {'multiply', 'retrieve'}, routing: {'retrieve': 'grade_documents', 'multiply': 'generate'}
2025-05-18 15:12:04,342 - __main__ - INFO - Database connection pool initialized
2025-05-18 15:12:04,343 - __main__ - DEBUG - Database connection pool initialized
2025-05-18 15:12:04,344 - demoRagAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-18 15:12:04,361 - demoRagAgent - INFO - Connection db_connection_pool status: OK, test connection successful
2025-05-18 15:12:04,961 - demoRagAgent - INFO - Graph visualization saved as graph.png
2025-05-18 15:13:04,345 - demoRagAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-18 15:14:04,347 - demoRagAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-18 15:15:04,349 - demoRagAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-18 15:16:04,352 - demoRagAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-18 15:17:04,356 - demoRagAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-18 15:18:04,359 - demoRagAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-18 15:19:04,360 - demoRagAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-18 15:20:04,361 - demoRagAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-18 15:21:04,364 - demoRagAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-18 15:22:04,365 - demoRagAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-18 15:23:04,367 - demoRagAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-18 15:24:04,371 - demoRagAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-18 15:25:04,373 - demoRagAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-18 15:26:04,376 - demoRagAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-18 15:26:29,441 - __main__ - INFO - Start the server on port 8012
2025-05-18 15:26:31,168 - demoRagAgent - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-05-18 15:26:31,169 - demoRagAgent - DEBUG - Tool 'multiply' routed to 'generate' (non-retrieval tool)
2025-05-18 15:26:31,169 - demoRagAgent - INFO - Initialized ToolConfig with tools: {'retrieve', 'multiply'}, routing: {'retrieve': 'grade_documents', 'multiply': 'generate'}
2025-05-18 15:26:31,170 - __main__ - INFO - Database connection pool initialized
2025-05-18 15:26:31,171 - __main__ - DEBUG - Database connection pool initialized
2025-05-18 15:26:31,172 - demoRagAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-18 15:26:31,188 - demoRagAgent - INFO - Connection db_connection_pool status: OK, test connection successful
2025-05-18 15:26:31,792 - demoRagAgent - INFO - Graph visualization saved as graph.png
2025-05-18 15:27:31,173 - demoRagAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-18 15:28:31,176 - demoRagAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-18 15:29:31,180 - demoRagAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-18 15:30:31,183 - demoRagAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-18 15:31:31,185 - demoRagAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-18 15:32:31,187 - demoRagAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-18 15:33:31,188 - demoRagAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-18 15:33:59,423 - __main__ - INFO - The user's user_input is: 你好
2025-05-18 15:33:59,432 - demoRagAgent - INFO - Agent processing user query
2025-05-18 15:34:01,936 - demoRagAgent - INFO - Loading and caching prompt template from prompts/prompt_template_agent.txt
2025-05-18 15:34:03,179 - __main__ - INFO - Streaming chunk from agent: 
2025-05-18 15:34:03,195 - __main__ - INFO - Streaming chunk from agent: 你好
2025-05-18 15:34:03,197 - __main__ - INFO - Streaming chunk from agent: ！
2025-05-18 15:34:03,256 - __main__ - INFO - Streaming chunk from agent: 有什么
2025-05-18 15:34:03,257 - __main__ - INFO - Streaming chunk from agent: 我
2025-05-18 15:34:03,259 - __main__ - INFO - Streaming chunk from agent: 可以
2025-05-18 15:34:03,260 - __main__ - INFO - Streaming chunk from agent: 帮助
2025-05-18 15:34:03,270 - __main__ - INFO - Streaming chunk from agent: 你
2025-05-18 15:34:03,272 - __main__ - INFO - Streaming chunk from agent: 的吗
2025-05-18 15:34:03,273 - __main__ - INFO - Streaming chunk from agent: ？
2025-05-18 15:34:03,274 - __main__ - INFO - Streaming chunk from agent: 
2025-05-18 15:34:03,276 - __main__ - INFO - Streaming chunk from agent: 
2025-05-18 15:34:18,181 - __main__ - INFO - The user's user_input is: 帮我查询一下张三病例情况
2025-05-18 15:34:18,186 - demoRagAgent - INFO - Agent processing user query
2025-05-18 15:34:20,291 - demoRagAgent - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-05-18 15:34:21,951 - __main__ - INFO - Streaming chunk from agent: 
2025-05-18 15:34:21,958 - __main__ - INFO - Streaming chunk from agent: 
2025-05-18 15:34:21,961 - __main__ - INFO - Streaming chunk from agent: 
2025-05-18 15:34:21,962 - __main__ - INFO - Streaming chunk from agent: 
2025-05-18 15:34:21,963 - __main__ - INFO - Streaming chunk from agent: 
2025-05-18 15:34:21,964 - __main__ - INFO - Streaming chunk from agent: 
2025-05-18 15:34:21,965 - __main__ - INFO - Streaming chunk from agent: 
2025-05-18 15:34:21,965 - __main__ - INFO - Streaming chunk from agent: 
2025-05-18 15:34:21,966 - __main__ - INFO - Streaming chunk from agent: 
2025-05-18 15:34:21,967 - __main__ - INFO - Streaming chunk from agent: 
2025-05-18 15:34:21,967 - __main__ - INFO - Streaming chunk from agent: 
2025-05-18 15:34:22,799 - demoRagAgent - INFO - Tool retrieve routed to grade_documents based on config
2025-05-18 15:34:22,800 - demoRagAgent - INFO - Grading documents for relevance
2025-05-18 15:34:22,801 - demoRagAgent - INFO - Loading and caching prompt template from prompts/prompt_template_grade.txt
2025-05-18 15:34:23,719 - demoRagAgent - INFO - Document relevance score: yes
2025-05-18 15:34:23,720 - demoRagAgent - INFO - Routing based on relevance_score: yes, rewrite_count: 0
2025-05-18 15:34:23,720 - demoRagAgent - INFO - Documents are relevant, proceeding to generate
2025-05-18 15:34:23,721 - demoRagAgent - INFO - Generating final response
2025-05-18 15:34:23,722 - demoRagAgent - INFO - Loading and caching prompt template from prompts/prompt_template_generate.txt
2025-05-18 15:34:24,453 - __main__ - INFO - Streaming chunk from generate: 
2025-05-18 15:34:24,476 - __main__ - INFO - Streaming chunk from generate: 张
2025-05-18 15:34:24,477 - __main__ - INFO - Streaming chunk from generate: 三
2025-05-18 15:34:24,504 - __main__ - INFO - Streaming chunk from generate: 的
2025-05-18 15:34:24,506 - __main__ - INFO - Streaming chunk from generate: 病例
2025-05-18 15:34:24,531 - __main__ - INFO - Streaming chunk from generate: 情况
2025-05-18 15:34:24,533 - __main__ - INFO - Streaming chunk from generate: 如下
2025-05-18 15:34:24,567 - __main__ - INFO - Streaming chunk from generate: ：


2025-05-18 15:34:24,570 - __main__ - INFO - Streaming chunk from generate: **
2025-05-18 15:34:24,596 - __main__ - INFO - Streaming chunk from generate: 基本
2025-05-18 15:34:24,598 - __main__ - INFO - Streaming chunk from generate: 信息
2025-05-18 15:34:24,630 - __main__ - INFO - Streaming chunk from generate: **
2025-05-18 15:34:24,632 - __main__ - INFO - Streaming chunk from generate: ：

2025-05-18 15:34:24,660 - __main__ - INFO - Streaming chunk from generate: -
2025-05-18 15:34:24,662 - __main__ - INFO - Streaming chunk from generate:  姓
2025-05-18 15:34:24,685 - __main__ - INFO - Streaming chunk from generate: 名
2025-05-18 15:34:24,687 - __main__ - INFO - Streaming chunk from generate: ：
2025-05-18 15:34:24,710 - __main__ - INFO - Streaming chunk from generate: 张
2025-05-18 15:34:24,712 - __main__ - INFO - Streaming chunk from generate: 三
2025-05-18 15:34:24,734 - __main__ - INFO - Streaming chunk from generate: 九
2025-05-18 15:34:24,736 - __main__ - INFO - Streaming chunk from generate: 

2025-05-18 15:34:24,775 - __main__ - INFO - Streaming chunk from generate: -
2025-05-18 15:34:24,777 - __main__ - INFO - Streaming chunk from generate:  性
2025-05-18 15:34:24,795 - __main__ - INFO - Streaming chunk from generate: 别
2025-05-18 15:34:24,796 - __main__ - INFO - Streaming chunk from generate: ：
2025-05-18 15:34:24,820 - __main__ - INFO - Streaming chunk from generate: 男
2025-05-18 15:34:24,822 - __main__ - INFO - Streaming chunk from generate: 

2025-05-18 15:34:24,843 - __main__ - INFO - Streaming chunk from generate: -
2025-05-18 15:34:24,846 - __main__ - INFO - Streaming chunk from generate:  出
2025-05-18 15:34:24,865 - __main__ - INFO - Streaming chunk from generate: 生
2025-05-18 15:34:24,867 - __main__ - INFO - Streaming chunk from generate: 日期
2025-05-18 15:34:24,891 - __main__ - INFO - Streaming chunk from generate: ：
2025-05-18 15:34:24,893 - __main__ - INFO - Streaming chunk from generate: 198
2025-05-18 15:34:24,922 - __main__ - INFO - Streaming chunk from generate: 5
2025-05-18 15:34:24,924 - __main__ - INFO - Streaming chunk from generate: 年
2025-05-18 15:34:24,960 - __main__ - INFO - Streaming chunk from generate: 5
2025-05-18 15:34:24,962 - __main__ - INFO - Streaming chunk from generate: 月
2025-05-18 15:34:24,987 - __main__ - INFO - Streaming chunk from generate: 20
2025-05-18 15:34:24,990 - __main__ - INFO - Streaming chunk from generate: 日
2025-05-18 15:34:25,018 - __main__ - INFO - Streaming chunk from generate: （
2025-05-18 15:34:25,020 - __main__ - INFO - Streaming chunk from generate: 目前
2025-05-18 15:34:25,040 - __main__ - INFO - Streaming chunk from generate: 39
2025-05-18 15:34:25,042 - __main__ - INFO - Streaming chunk from generate: 岁
2025-05-18 15:34:25,101 - __main__ - INFO - Streaming chunk from generate: ）

2025-05-18 15:34:25,105 - __main__ - INFO - Streaming chunk from generate: -
2025-05-18 15:34:25,174 - __main__ - INFO - Streaming chunk from generate:  职
2025-05-18 15:34:25,176 - __main__ - INFO - Streaming chunk from generate: 业
2025-05-18 15:34:25,228 - __main__ - INFO - Streaming chunk from generate: ：
2025-05-18 15:34:25,229 - __main__ - INFO - Streaming chunk from generate: IT
2025-05-18 15:34:25,257 - __main__ - INFO - Streaming chunk from generate: 工程
2025-05-18 15:34:25,258 - __main__ - INFO - Streaming chunk from generate: 师
2025-05-18 15:34:25,305 - __main__ - INFO - Streaming chunk from generate: 

2025-05-18 15:34:25,306 - __main__ - INFO - Streaming chunk from generate: -
2025-05-18 15:34:25,335 - __main__ - INFO - Streaming chunk from generate:  血
2025-05-18 15:34:25,336 - __main__ - INFO - Streaming chunk from generate: 型
2025-05-18 15:34:25,362 - __main__ - INFO - Streaming chunk from generate: ：
2025-05-18 15:34:25,362 - __main__ - INFO - Streaming chunk from generate: O
2025-05-18 15:34:25,383 - __main__ - INFO - Streaming chunk from generate: 型
2025-05-18 15:34:25,384 - __main__ - INFO - Streaming chunk from generate: 

2025-05-18 15:34:25,518 - __main__ - INFO - Streaming chunk from generate: -
2025-05-18 15:34:25,520 - __main__ - INFO - Streaming chunk from generate:  联系
2025-05-18 15:34:25,581 - __main__ - INFO - Streaming chunk from generate: 电话
2025-05-18 15:34:25,583 - __main__ - INFO - Streaming chunk from generate: ：
2025-05-18 15:34:25,674 - __main__ - INFO - Streaming chunk from generate: 138
2025-05-18 15:34:25,676 - __main__ - INFO - Streaming chunk from generate: -
2025-05-18 15:34:25,720 - __main__ - INFO - Streaming chunk from generate: 123
2025-05-18 15:34:25,721 - __main__ - INFO - Streaming chunk from generate: 4
2025-05-18 15:34:25,799 - __main__ - INFO - Streaming chunk from generate: -
2025-05-18 15:34:25,801 - __main__ - INFO - Streaming chunk from generate: 567
2025-05-18 15:34:26,044 - __main__ - INFO - Streaming chunk from generate: 8
2025-05-18 15:34:26,046 - __main__ - INFO - Streaming chunk from generate: 

2025-05-18 15:34:26,047 - __main__ - INFO - Streaming chunk from generate: -
2025-05-18 15:34:26,048 - __main__ - INFO - Streaming chunk from generate:  
2025-05-18 15:34:26,049 - __main__ - INFO - Streaming chunk from generate: 电子
2025-05-18 15:34:26,127 - __main__ - INFO - Streaming chunk from generate: 邮箱
2025-05-18 15:34:26,133 - __main__ - INFO - Streaming chunk from generate: ：
2025-05-18 15:34:26,134 - __main__ - INFO - Streaming chunk from generate: zh
2025-05-18 15:34:26,225 - __main__ - INFO - Streaming chunk from generate: ang
2025-05-18 15:34:26,228 - __main__ - INFO - Streaming chunk from generate: san
2025-05-18 15:34:26,320 - __main__ - INFO - Streaming chunk from generate: @example
2025-05-18 15:34:26,323 - __main__ - INFO - Streaming chunk from generate: .com
2025-05-18 15:34:26,424 - __main__ - INFO - Streaming chunk from generate: 

2025-05-18 15:34:26,425 - __main__ - INFO - Streaming chunk from generate: -
2025-05-18 15:34:26,516 - __main__ - INFO - Streaming chunk from generate:  
2025-05-18 15:34:26,518 - __main__ - INFO - Streaming chunk from generate: 住
2025-05-18 15:34:26,732 - __main__ - INFO - Streaming chunk from generate: 址
2025-05-18 15:34:26,735 - __main__ - INFO - Streaming chunk from generate: ：
2025-05-18 15:34:26,774 - __main__ - INFO - Streaming chunk from generate: 上海
2025-05-18 15:34:26,777 - __main__ - INFO - Streaming chunk from generate: 市
2025-05-18 15:34:26,841 - __main__ - INFO - Streaming chunk from generate: 浦
2025-05-18 15:34:26,843 - __main__ - INFO - Streaming chunk from generate: 东
2025-05-18 15:34:26,965 - __main__ - INFO - Streaming chunk from generate: 新区
2025-05-18 15:34:26,967 - __main__ - INFO - Streaming chunk from generate: 张
2025-05-18 15:34:27,074 - __main__ - INFO - Streaming chunk from generate: 江
2025-05-18 15:34:27,076 - __main__ - INFO - Streaming chunk from generate: 路
2025-05-18 15:34:27,192 - __main__ - INFO - Streaming chunk from generate: 123
2025-05-18 15:34:27,195 - __main__ - INFO - Streaming chunk from generate: 号
2025-05-18 15:34:27,364 - __main__ - INFO - Streaming chunk from generate: 

2025-05-18 15:34:27,365 - __main__ - INFO - Streaming chunk from generate: -
2025-05-18 15:34:27,448 - __main__ - INFO - Streaming chunk from generate:  紧
2025-05-18 15:34:27,449 - __main__ - INFO - Streaming chunk from generate: 急
2025-05-18 15:34:27,532 - __main__ - INFO - Streaming chunk from generate: 联系人
2025-05-18 15:34:27,533 - __main__ - INFO - Streaming chunk from generate: ：
2025-05-18 15:34:27,594 - __main__ - INFO - Streaming chunk from generate: 妻
2025-05-18 15:34:27,596 - __main__ - INFO - Streaming chunk from generate: 子
2025-05-18 15:34:27,655 - __main__ - INFO - Streaming chunk from generate: 李
2025-05-18 15:34:27,657 - __main__ - INFO - Streaming chunk from generate: 四六
2025-05-18 15:34:27,695 - __main__ - INFO - Streaming chunk from generate: ，
2025-05-18 15:34:27,697 - __main__ - INFO - Streaming chunk from generate: 联系电话
2025-05-18 15:34:27,718 - __main__ - INFO - Streaming chunk from generate: ：
2025-05-18 15:34:27,720 - __main__ - INFO - Streaming chunk from generate: 138
2025-05-18 15:34:27,749 - __main__ - INFO - Streaming chunk from generate: -
2025-05-18 15:34:27,751 - __main__ - INFO - Streaming chunk from generate: 876
2025-05-18 15:34:27,776 - __main__ - INFO - Streaming chunk from generate: 5
2025-05-18 15:34:27,778 - __main__ - INFO - Streaming chunk from generate: -
2025-05-18 15:34:27,800 - __main__ - INFO - Streaming chunk from generate: 432
2025-05-18 15:34:27,801 - __main__ - INFO - Streaming chunk from generate: 1
2025-05-18 15:34:27,827 - __main__ - INFO - Streaming chunk from generate: 


2025-05-18 15:34:27,829 - __main__ - INFO - Streaming chunk from generate: **
2025-05-18 15:34:27,847 - __main__ - INFO - Streaming chunk from generate: 医疗
2025-05-18 15:34:27,848 - __main__ - INFO - Streaming chunk from generate: 历史
2025-05-18 15:34:27,868 - __main__ - INFO - Streaming chunk from generate: **
2025-05-18 15:34:27,869 - __main__ - INFO - Streaming chunk from generate: ：

2025-05-18 15:34:27,900 - __main__ - INFO - Streaming chunk from generate: -
2025-05-18 15:34:27,901 - __main__ - INFO - Streaming chunk from generate:  
2025-05-18 15:34:27,918 - __main__ - INFO - Streaming chunk from generate: 200
2025-05-18 15:34:27,919 - __main__ - INFO - Streaming chunk from generate: 5
2025-05-18 15:34:27,946 - __main__ - INFO - Streaming chunk from generate: 年
2025-05-18 15:34:27,947 - __main__ - INFO - Streaming chunk from generate: 被
2025-05-18 15:34:27,970 - __main__ - INFO - Streaming chunk from generate: 确
2025-05-18 15:34:27,972 - __main__ - INFO - Streaming chunk from generate: 诊
2025-05-18 15:34:27,993 - __main__ - INFO - Streaming chunk from generate: 为
2025-05-18 15:34:27,994 - __main__ - INFO - Streaming chunk from generate: 高
2025-05-18 15:34:28,015 - __main__ - INFO - Streaming chunk from generate: 血
2025-05-18 15:34:28,018 - __main__ - INFO - Streaming chunk from generate: 压
2025-05-18 15:34:28,042 - __main__ - INFO - Streaming chunk from generate: ，
2025-05-18 15:34:28,044 - __main__ - INFO - Streaming chunk from generate: 开始
2025-05-18 15:34:28,086 - __main__ - INFO - Streaming chunk from generate: 接受
2025-05-18 15:34:28,090 - __main__ - INFO - Streaming chunk from generate: 降
2025-05-18 15:34:28,120 - __main__ - INFO - Streaming chunk from generate: 压
2025-05-18 15:34:28,122 - __main__ - INFO - Streaming chunk from generate: 药
2025-05-18 15:34:28,143 - __main__ - INFO - Streaming chunk from generate: 物
2025-05-18 15:34:28,145 - __main__ - INFO - Streaming chunk from generate: 治疗
2025-05-18 15:34:28,205 - __main__ - INFO - Streaming chunk from generate: 。

2025-05-18 15:34:28,206 - __main__ - INFO - Streaming chunk from generate: -
2025-05-18 15:34:28,212 - __main__ - INFO - Streaming chunk from generate:  
2025-05-18 15:34:28,212 - __main__ - INFO - Streaming chunk from generate: 201
2025-05-18 15:34:28,217 - __main__ - INFO - Streaming chunk from generate: 0
2025-05-18 15:34:28,218 - __main__ - INFO - Streaming chunk from generate: 年
2025-05-18 15:34:28,243 - __main__ - INFO - Streaming chunk from generate: 被
2025-05-18 15:34:28,244 - __main__ - INFO - Streaming chunk from generate: 确
2025-05-18 15:34:28,267 - __main__ - INFO - Streaming chunk from generate: 诊
2025-05-18 15:34:28,269 - __main__ - INFO - Streaming chunk from generate: 为
2025-05-18 15:34:28,291 - __main__ - INFO - Streaming chunk from generate: 二
2025-05-18 15:34:28,292 - __main__ - INFO - Streaming chunk from generate: 型
2025-05-18 15:34:28,309 - __main__ - INFO - Streaming chunk from generate: 糖
2025-05-18 15:34:28,310 - __main__ - INFO - Streaming chunk from generate: 尿
2025-05-18 15:34:28,338 - __main__ - INFO - Streaming chunk from generate: 病
2025-05-18 15:34:28,340 - __main__ - INFO - Streaming chunk from generate: ，
2025-05-18 15:34:28,359 - __main__ - INFO - Streaming chunk from generate: 开始
2025-05-18 15:34:28,362 - __main__ - INFO - Streaming chunk from generate: 使用
2025-05-18 15:34:28,385 - __main__ - INFO - Streaming chunk from generate: 口
2025-05-18 15:34:28,387 - __main__ - INFO - Streaming chunk from generate: 服
2025-05-18 15:34:28,416 - __main__ - INFO - Streaming chunk from generate: 降
2025-05-18 15:34:28,418 - __main__ - INFO - Streaming chunk from generate: 糖
2025-05-18 15:34:28,428 - __main__ - INFO - Streaming chunk from generate: 药
2025-05-18 15:34:28,430 - __main__ - INFO - Streaming chunk from generate: 。

2025-05-18 15:34:28,452 - __main__ - INFO - Streaming chunk from generate: -
2025-05-18 15:34:28,455 - __main__ - INFO - Streaming chunk from generate:  
2025-05-18 15:34:28,475 - __main__ - INFO - Streaming chunk from generate: 201
2025-05-18 15:34:28,477 - __main__ - INFO - Streaming chunk from generate: 7
2025-05-18 15:34:28,501 - __main__ - INFO - Streaming chunk from generate: 年
2025-05-18 15:34:28,503 - __main__ - INFO - Streaming chunk from generate: 被
2025-05-18 15:34:28,530 - __main__ - INFO - Streaming chunk from generate: 诊
2025-05-18 15:34:28,531 - __main__ - INFO - Streaming chunk from generate: 断
2025-05-18 15:34:28,588 - __main__ - INFO - Streaming chunk from generate: 为
2025-05-18 15:34:28,590 - __main__ - INFO - Streaming chunk from generate: 脂
2025-05-18 15:34:28,614 - __main__ - INFO - Streaming chunk from generate: 肪
2025-05-18 15:34:28,616 - __main__ - INFO - Streaming chunk from generate: 肝
2025-05-18 15:34:28,645 - __main__ - INFO - Streaming chunk from generate: ，
2025-05-18 15:34:28,647 - __main__ - INFO - Streaming chunk from generate: 建议
2025-05-18 15:34:28,672 - __main__ - INFO - Streaming chunk from generate: 通过
2025-05-18 15:34:28,673 - __main__ - INFO - Streaming chunk from generate: 饮
2025-05-18 15:34:28,702 - __main__ - INFO - Streaming chunk from generate: 食
2025-05-18 15:34:28,703 - __main__ - INFO - Streaming chunk from generate: 调整
2025-05-18 15:34:28,724 - __main__ - INFO - Streaming chunk from generate: 和
2025-05-18 15:34:28,725 - __main__ - INFO - Streaming chunk from generate: 增加
2025-05-18 15:34:28,762 - __main__ - INFO - Streaming chunk from generate: 运动
2025-05-18 15:34:28,764 - __main__ - INFO - Streaming chunk from generate: 来
2025-05-18 15:34:28,768 - __main__ - INFO - Streaming chunk from generate: 改善
2025-05-18 15:34:28,770 - __main__ - INFO - Streaming chunk from generate: 。

2025-05-18 15:34:28,789 - __main__ - INFO - Streaming chunk from generate: -
2025-05-18 15:34:28,792 - __main__ - INFO - Streaming chunk from generate:  
2025-05-18 15:34:28,841 - __main__ - INFO - Streaming chunk from generate: 202
2025-05-18 15:34:28,843 - __main__ - INFO - Streaming chunk from generate: 2
2025-05-18 15:34:28,875 - __main__ - INFO - Streaming chunk from generate: 年
2025-05-18 15:34:28,877 - __main__ - INFO - Streaming chunk from generate: 因
2025-05-18 15:34:28,895 - __main__ - INFO - Streaming chunk from generate: 腰
2025-05-18 15:34:28,897 - __main__ - INFO - Streaming chunk from generate: 椎
2025-05-18 15:34:28,917 - __main__ - INFO - Streaming chunk from generate: 间
2025-05-18 15:34:28,919 - __main__ - INFO - Streaming chunk from generate: 盘
2025-05-18 15:34:28,945 - __main__ - INFO - Streaming chunk from generate: 突出
2025-05-18 15:34:28,946 - __main__ - INFO - Streaming chunk from generate: 接受
2025-05-18 15:34:28,988 - __main__ - INFO - Streaming chunk from generate: 微
2025-05-18 15:34:28,990 - __main__ - INFO - Streaming chunk from generate: 创
2025-05-18 15:34:29,011 - __main__ - INFO - Streaming chunk from generate: 手
2025-05-18 15:34:29,012 - __main__ - INFO - Streaming chunk from generate: 术
2025-05-18 15:34:29,038 - __main__ - INFO - Streaming chunk from generate: ，
2025-05-18 15:34:29,039 - __main__ - INFO - Streaming chunk from generate: 术
2025-05-18 15:34:29,059 - __main__ - INFO - Streaming chunk from generate: 后
2025-05-18 15:34:29,059 - __main__ - INFO - Streaming chunk from generate: 恢复
2025-05-18 15:34:29,105 - __main__ - INFO - Streaming chunk from generate: 良
2025-05-18 15:34:29,107 - __main__ - INFO - Streaming chunk from generate: 好
2025-05-18 15:34:29,185 - __main__ - INFO - Streaming chunk from generate: 。

2025-05-18 15:34:29,187 - __main__ - INFO - Streaming chunk from generate: -
2025-05-18 15:34:29,190 - __main__ - INFO - Streaming chunk from generate:  对
2025-05-18 15:34:29,191 - __main__ - INFO - Streaming chunk from generate: 青
2025-05-18 15:34:29,215 - __main__ - INFO - Streaming chunk from generate: 霉
2025-05-18 15:34:29,218 - __main__ - INFO - Streaming chunk from generate: 素
2025-05-18 15:34:29,238 - __main__ - INFO - Streaming chunk from generate: 有
2025-05-18 15:34:29,239 - __main__ - INFO - Streaming chunk from generate: 过
2025-05-18 15:34:29,260 - __main__ - INFO - Streaming chunk from generate: 敏
2025-05-18 15:34:29,262 - __main__ - INFO - Streaming chunk from generate: 反
2025-05-18 15:34:29,279 - __main__ - INFO - Streaming chunk from generate: 应
2025-05-18 15:34:29,279 - __main__ - INFO - Streaming chunk from generate: ，
2025-05-18 15:34:29,307 - __main__ - INFO - Streaming chunk from generate: 曾
2025-05-18 15:34:29,308 - __main__ - INFO - Streaming chunk from generate: 出现
2025-05-18 15:34:29,337 - __main__ - INFO - Streaming chunk from generate: 皮
2025-05-18 15:34:29,338 - __main__ - INFO - Streaming chunk from generate: 疹
2025-05-18 15:34:29,351 - __main__ - INFO - Streaming chunk from generate: 和
2025-05-18 15:34:29,352 - __main__ - INFO - Streaming chunk from generate: 呼
2025-05-18 15:34:29,374 - __main__ - INFO - Streaming chunk from generate: 吸
2025-05-18 15:34:29,376 - __main__ - INFO - Streaming chunk from generate: 困难
2025-05-18 15:34:29,401 - __main__ - INFO - Streaming chunk from generate: ；
2025-05-18 15:34:29,403 - __main__ - INFO - Streaming chunk from generate: 对
2025-05-18 15:34:29,423 - __main__ - INFO - Streaming chunk from generate: 海
2025-05-18 15:34:29,425 - __main__ - INFO - Streaming chunk from generate: 鲜
2025-05-18 15:34:29,441 - __main__ - INFO - Streaming chunk from generate: 有
2025-05-18 15:34:29,443 - __main__ - INFO - Streaming chunk from generate: 轻
2025-05-18 15:34:29,467 - __main__ - INFO - Streaming chunk from generate: 度
2025-05-18 15:34:29,469 - __main__ - INFO - Streaming chunk from generate: 过
2025-05-18 15:34:29,494 - __main__ - INFO - Streaming chunk from generate: 敏
2025-05-18 15:34:29,496 - __main__ - INFO - Streaming chunk from generate: 反
2025-05-18 15:34:29,526 - __main__ - INFO - Streaming chunk from generate: 应
2025-05-18 15:34:29,529 - __main__ - INFO - Streaming chunk from generate: 。


2025-05-18 15:34:29,544 - __main__ - INFO - Streaming chunk from generate: **
2025-05-18 15:34:29,545 - __main__ - INFO - Streaming chunk from generate: 生活
2025-05-18 15:34:29,567 - __main__ - INFO - Streaming chunk from generate: 方式
2025-05-18 15:34:29,569 - __main__ - INFO - Streaming chunk from generate: 和
2025-05-18 15:34:29,610 - __main__ - INFO - Streaming chunk from generate: 习
2025-05-18 15:34:29,613 - __main__ - INFO - Streaming chunk from generate: 惯
2025-05-18 15:34:29,640 - __main__ - INFO - Streaming chunk from generate: **
2025-05-18 15:34:29,642 - __main__ - INFO - Streaming chunk from generate: ：

2025-05-18 15:34:29,661 - __main__ - INFO - Streaming chunk from generate: -
2025-05-18 15:34:29,663 - __main__ - INFO - Streaming chunk from generate:  饮
2025-05-18 15:34:29,685 - __main__ - INFO - Streaming chunk from generate: 食
2025-05-18 15:34:29,687 - __main__ - INFO - Streaming chunk from generate: 习
2025-05-18 15:34:29,716 - __main__ - INFO - Streaming chunk from generate: 惯
2025-05-18 15:34:29,718 - __main__ - INFO - Streaming chunk from generate: 偏
2025-05-18 15:34:29,735 - __main__ - INFO - Streaming chunk from generate: 向
2025-05-18 15:34:29,736 - __main__ - INFO - Streaming chunk from generate: 高
2025-05-18 15:34:29,760 - __main__ - INFO - Streaming chunk from generate: 脂
2025-05-18 15:34:29,762 - __main__ - INFO - Streaming chunk from generate: 肪
2025-05-18 15:34:29,787 - __main__ - INFO - Streaming chunk from generate: 和
2025-05-18 15:34:29,789 - __main__ - INFO - Streaming chunk from generate: 高
2025-05-18 15:34:29,817 - __main__ - INFO - Streaming chunk from generate: 糖
2025-05-18 15:34:29,819 - __main__ - INFO - Streaming chunk from generate: 食品
2025-05-18 15:34:29,941 - __main__ - INFO - Streaming chunk from generate: ，
2025-05-18 15:34:29,947 - __main__ - INFO - Streaming chunk from generate: 蔬
2025-05-18 15:34:29,948 - __main__ - INFO - Streaming chunk from generate: 菜
2025-05-18 15:34:29,948 - __main__ - INFO - Streaming chunk from generate: 和
2025-05-18 15:34:29,949 - __main__ - INFO - Streaming chunk from generate: 水果
2025-05-18 15:34:29,950 - __main__ - INFO - Streaming chunk from generate: 摄
2025-05-18 15:34:29,950 - __main__ - INFO - Streaming chunk from generate: 入
2025-05-18 15:34:29,951 - __main__ - INFO - Streaming chunk from generate: 较
2025-05-18 15:34:29,957 - __main__ - INFO - Streaming chunk from generate: 少
2025-05-18 15:34:29,958 - __main__ - INFO - Streaming chunk from generate: ，
2025-05-18 15:34:29,959 - __main__ - INFO - Streaming chunk from generate: 盐
2025-05-18 15:34:29,959 - __main__ - INFO - Streaming chunk from generate: 分
2025-05-18 15:34:30,001 - __main__ - INFO - Streaming chunk from generate: 摄
2025-05-18 15:34:30,005 - __main__ - INFO - Streaming chunk from generate: 入
2025-05-18 15:34:30,006 - __main__ - INFO - Streaming chunk from generate: 偏
2025-05-18 15:34:30,006 - __main__ - INFO - Streaming chunk from generate: 高
2025-05-18 15:34:30,019 - __main__ - INFO - Streaming chunk from generate: 。

2025-05-18 15:34:30,020 - __main__ - INFO - Streaming chunk from generate: -
2025-05-18 15:34:30,046 - __main__ - INFO - Streaming chunk from generate:  每
2025-05-18 15:34:30,047 - __main__ - INFO - Streaming chunk from generate: 周
2025-05-18 15:34:30,063 - __main__ - INFO - Streaming chunk from generate: 仅
2025-05-18 15:34:30,064 - __main__ - INFO - Streaming chunk from generate: 进行
2025-05-18 15:34:30,084 - __main__ - INFO - Streaming chunk from generate: 一次
2025-05-18 15:34:30,086 - __main__ - INFO - Streaming chunk from generate: 轻
2025-05-18 15:34:30,110 - __main__ - INFO - Streaming chunk from generate: 度
2025-05-18 15:34:30,112 - __main__ - INFO - Streaming chunk from generate: 运动
2025-05-18 15:34:30,135 - __main__ - INFO - Streaming chunk from generate: （
2025-05-18 15:34:30,137 - __main__ - INFO - Streaming chunk from generate: 如
2025-05-18 15:34:30,149 - __main__ - INFO - Streaming chunk from generate: 散
2025-05-18 15:34:30,150 - __main__ - INFO - Streaming chunk from generate: 步
2025-05-18 15:34:30,171 - __main__ - INFO - Streaming chunk from generate: ）。

2025-05-18 15:34:30,173 - __main__ - INFO - Streaming chunk from generate: -
2025-05-18 15:34:30,184 - __main__ - INFO - Streaming chunk from generate:  无
2025-05-18 15:34:30,186 - __main__ - INFO - Streaming chunk from generate: 吸
2025-05-18 15:34:30,209 - __main__ - INFO - Streaming chunk from generate: 烟
2025-05-18 15:34:30,211 - __main__ - INFO - Streaming chunk from generate: 史
2025-05-18 15:34:30,225 - __main__ - INFO - Streaming chunk from generate: ，但
2025-05-18 15:34:30,226 - __main__ - INFO - Streaming chunk from generate: 每
2025-05-18 15:34:30,246 - __main__ - INFO - Streaming chunk from generate: 周
2025-05-18 15:34:30,248 - __main__ - INFO - Streaming chunk from generate: 饮
2025-05-18 15:34:30,262 - __main__ - INFO - Streaming chunk from generate: 酒
2025-05-18 15:34:30,264 - __main__ - INFO - Streaming chunk from generate: 2
2025-05-18 15:34:30,285 - __main__ - INFO - Streaming chunk from generate: 至
2025-05-18 15:34:30,288 - __main__ - INFO - Streaming chunk from generate: 3
2025-05-18 15:34:30,308 - __main__ - INFO - Streaming chunk from generate: 次
2025-05-18 15:34:30,309 - __main__ - INFO - Streaming chunk from generate: ，每
2025-05-18 15:34:30,326 - __main__ - INFO - Streaming chunk from generate: 次
2025-05-18 15:34:30,326 - __main__ - INFO - Streaming chunk from generate: 约
2025-05-18 15:34:30,353 - __main__ - INFO - Streaming chunk from generate: 300
2025-05-18 15:34:30,354 - __main__ - INFO - Streaming chunk from generate: 毫
2025-05-18 15:34:30,371 - __main__ - INFO - Streaming chunk from generate: 升
2025-05-18 15:34:30,372 - __main__ - INFO - Streaming chunk from generate: 啤
2025-05-18 15:34:30,392 - __main__ - INFO - Streaming chunk from generate: 酒
2025-05-18 15:34:30,394 - __main__ - INFO - Streaming chunk from generate: 。

2025-05-18 15:34:30,420 - __main__ - INFO - Streaming chunk from generate: -
2025-05-18 15:34:30,421 - __main__ - INFO - Streaming chunk from generate:  平
2025-05-18 15:34:30,450 - __main__ - INFO - Streaming chunk from generate: 均
2025-05-18 15:34:30,451 - __main__ - INFO - Streaming chunk from generate: 睡
2025-05-18 15:34:30,466 - __main__ - INFO - Streaming chunk from generate: 眠
2025-05-18 15:34:30,467 - __main__ - INFO - Streaming chunk from generate: 时间
2025-05-18 15:34:30,517 - __main__ - INFO - Streaming chunk from generate: 为
2025-05-18 15:34:30,519 - __main__ - INFO - Streaming chunk from generate: 每
2025-05-18 15:34:30,520 - __main__ - INFO - Streaming chunk from generate: 晚
2025-05-18 15:34:30,521 - __main__ - INFO - Streaming chunk from generate: 6
2025-05-18 15:34:30,526 - __main__ - INFO - Streaming chunk from generate: 小时
2025-05-18 15:34:30,528 - __main__ - INFO - Streaming chunk from generate: ，
2025-05-18 15:34:30,569 - __main__ - INFO - Streaming chunk from generate: 常
2025-05-18 15:34:30,570 - __main__ - INFO - Streaming chunk from generate: 感
2025-05-18 15:34:30,628 - __main__ - INFO - Streaming chunk from generate: 到
2025-05-18 15:34:30,629 - __main__ - INFO - Streaming chunk from generate: 疲
2025-05-18 15:34:30,656 - __main__ - INFO - Streaming chunk from generate: 惫
2025-05-18 15:34:30,658 - __main__ - INFO - Streaming chunk from generate: 。


2025-05-18 15:34:30,680 - __main__ - INFO - Streaming chunk from generate: **
2025-05-18 15:34:30,682 - __main__ - INFO - Streaming chunk from generate: 体
2025-05-18 15:34:30,697 - __main__ - INFO - Streaming chunk from generate: 检
2025-05-18 15:34:30,699 - __main__ - INFO - Streaming chunk from generate: 与
2025-05-18 15:34:30,715 - __main__ - INFO - Streaming chunk from generate: 化
2025-05-18 15:34:30,716 - __main__ - INFO - Streaming chunk from generate: 验
2025-05-18 15:34:30,739 - __main__ - INFO - Streaming chunk from generate: 结果
2025-05-18 15:34:30,741 - __main__ - INFO - Streaming chunk from generate: **
2025-05-18 15:34:30,765 - __main__ - INFO - Streaming chunk from generate: （
2025-05-18 15:34:30,767 - __main__ - INFO - Streaming chunk from generate: 202
2025-05-18 15:34:30,790 - __main__ - INFO - Streaming chunk from generate: 4
2025-05-18 15:34:30,793 - __main__ - INFO - Streaming chunk from generate: 年
2025-05-18 15:34:30,806 - __main__ - INFO - Streaming chunk from generate: 8
2025-05-18 15:34:30,807 - __main__ - INFO - Streaming chunk from generate: 月
2025-05-18 15:34:30,843 - __main__ - INFO - Streaming chunk from generate: 15
2025-05-18 15:34:30,845 - __main__ - INFO - Streaming chunk from generate: 日
2025-05-18 15:34:30,857 - __main__ - INFO - Streaming chunk from generate: ）
2025-05-18 15:34:30,860 - __main__ - INFO - Streaming chunk from generate: ：

2025-05-18 15:34:30,898 - __main__ - INFO - Streaming chunk from generate: -
2025-05-18 15:34:30,900 - __main__ - INFO - Streaming chunk from generate:  身
2025-05-18 15:34:30,938 - __main__ - INFO - Streaming chunk from generate: 高
2025-05-18 15:34:30,939 - __main__ - INFO - Streaming chunk from generate: ：
2025-05-18 15:34:30,962 - __main__ - INFO - Streaming chunk from generate: 175
2025-05-18 15:34:30,963 - __main__ - INFO - Streaming chunk from generate: 厘米
2025-05-18 15:34:30,977 - __main__ - INFO - Streaming chunk from generate: 

2025-05-18 15:34:30,978 - __main__ - INFO - Streaming chunk from generate: -
2025-05-18 15:34:31,014 - __main__ - INFO - Streaming chunk from generate:  
2025-05-18 15:34:31,015 - __main__ - INFO - Streaming chunk from generate: 体
2025-05-18 15:34:31,034 - __main__ - INFO - Streaming chunk from generate: 重
2025-05-18 15:34:31,036 - __main__ - INFO - Streaming chunk from generate: ：
2025-05-18 15:34:31,051 - __main__ - INFO - Streaming chunk from generate: 78
2025-05-18 15:34:31,055 - __main__ - INFO - Streaming chunk from generate: 公斤
2025-05-18 15:34:31,079 - __main__ - INFO - Streaming chunk from generate: （
2025-05-18 15:34:31,080 - __main__ - INFO - Streaming chunk from generate: BMI
2025-05-18 15:34:31,094 - __main__ - INFO - Streaming chunk from generate: ：
2025-05-18 15:34:31,095 - __main__ - INFO - Streaming chunk from generate: 25
2025-05-18 15:34:31,122 - __main__ - INFO - Streaming chunk from generate: .
2025-05-18 15:34:31,122 - __main__ - INFO - Streaming chunk from generate: 5
2025-05-18 15:34:31,146 - __main__ - INFO - Streaming chunk from generate: ，
2025-05-18 15:34:31,146 - __main__ - INFO - Streaming chunk from generate: 表
2025-05-18 15:34:31,191 - demoRagAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-18 15:34:31,296 - __main__ - INFO - Streaming chunk from generate: 明
2025-05-18 15:34:31,298 - __main__ - INFO - Streaming chunk from generate: 超
2025-05-18 15:34:31,299 - __main__ - INFO - Streaming chunk from generate: 重
2025-05-18 15:34:31,299 - __main__ - INFO - Streaming chunk from generate: ）

2025-05-18 15:34:31,300 - __main__ - INFO - Streaming chunk from generate: -
2025-05-18 15:34:31,300 - __main__ - INFO - Streaming chunk from generate:  腰
2025-05-18 15:34:31,300 - __main__ - INFO - Streaming chunk from generate: 围
2025-05-18 15:34:31,301 - __main__ - INFO - Streaming chunk from generate: ：
2025-05-18 15:34:31,316 - __main__ - INFO - Streaming chunk from generate: 92
2025-05-18 15:34:31,317 - __main__ - INFO - Streaming chunk from generate: 厘米
2025-05-18 15:34:31,377 - __main__ - INFO - Streaming chunk from generate: （
2025-05-18 15:34:31,378 - __main__ - INFO - Streaming chunk from generate: 略
2025-05-18 15:34:31,379 - __main__ - INFO - Streaming chunk from generate: 高
2025-05-18 15:34:31,379 - __main__ - INFO - Streaming chunk from generate: 于
2025-05-18 15:34:31,404 - __main__ - INFO - Streaming chunk from generate: 健康
2025-05-18 15:34:31,412 - __main__ - INFO - Streaming chunk from generate: 范围
2025-05-18 15:34:31,439 - __main__ - INFO - Streaming chunk from generate: ）

2025-05-18 15:34:31,440 - __main__ - INFO - Streaming chunk from generate: -
2025-05-18 15:34:31,462 - __main__ - INFO - Streaming chunk from generate:  血
2025-05-18 15:34:31,464 - __main__ - INFO - Streaming chunk from generate: 压
2025-05-18 15:34:31,484 - __main__ - INFO - Streaming chunk from generate: ：
2025-05-18 15:34:31,486 - __main__ - INFO - Streaming chunk from generate: 135
2025-05-18 15:34:31,518 - __main__ - INFO - Streaming chunk from generate: /
2025-05-18 15:34:31,521 - __main__ - INFO - Streaming chunk from generate: 85
2025-05-18 15:34:31,534 - __main__ - INFO - Streaming chunk from generate: 毫米
2025-05-18 15:34:31,536 - __main__ - INFO - Streaming chunk from generate: 汞
2025-05-18 15:34:31,563 - __main__ - INFO - Streaming chunk from generate: 柱
2025-05-18 15:34:31,564 - __main__ - INFO - Streaming chunk from generate: （
2025-05-18 15:34:31,724 - __main__ - INFO - Streaming chunk from generate: 轻
2025-05-18 15:34:31,727 - __main__ - INFO - Streaming chunk from generate: 度
2025-05-18 15:34:31,735 - __main__ - INFO - Streaming chunk from generate: 高
2025-05-18 15:34:31,737 - __main__ - INFO - Streaming chunk from generate: 血
2025-05-18 15:34:31,740 - __main__ - INFO - Streaming chunk from generate: 压
2025-05-18 15:34:31,740 - __main__ - INFO - Streaming chunk from generate: ）

2025-05-18 15:34:31,741 - __main__ - INFO - Streaming chunk from generate: -
2025-05-18 15:34:31,741 - __main__ - INFO - Streaming chunk from generate:  心
2025-05-18 15:34:31,742 - __main__ - INFO - Streaming chunk from generate: 率
2025-05-18 15:34:31,742 - __main__ - INFO - Streaming chunk from generate: ：
2025-05-18 15:34:31,743 - __main__ - INFO - Streaming chunk from generate: 每
2025-05-18 15:34:31,743 - __main__ - INFO - Streaming chunk from generate: 分钟
2025-05-18 15:34:31,743 - __main__ - INFO - Streaming chunk from generate: 78
2025-05-18 15:34:31,744 - __main__ - INFO - Streaming chunk from generate: 次
2025-05-18 15:34:31,745 - __main__ - INFO - Streaming chunk from generate: （
2025-05-18 15:34:31,745 - __main__ - INFO - Streaming chunk from generate: 正常
2025-05-18 15:34:31,784 - __main__ - INFO - Streaming chunk from generate: 范围
2025-05-18 15:34:31,785 - __main__ - INFO - Streaming chunk from generate: ）

2025-05-18 15:34:31,824 - __main__ - INFO - Streaming chunk from generate: -
2025-05-18 15:34:31,826 - __main__ - INFO - Streaming chunk from generate:  空
2025-05-18 15:34:31,870 - __main__ - INFO - Streaming chunk from generate: 腹
2025-05-18 15:34:31,870 - __main__ - INFO - Streaming chunk from generate: 血
2025-05-18 15:34:31,897 - __main__ - INFO - Streaming chunk from generate: 糖
2025-05-18 15:34:31,899 - __main__ - INFO - Streaming chunk from generate: ：
2025-05-18 15:34:31,944 - __main__ - INFO - Streaming chunk from generate: 6
2025-05-18 15:34:31,946 - __main__ - INFO - Streaming chunk from generate: .
2025-05-18 15:34:31,964 - __main__ - INFO - Streaming chunk from generate: 8
2025-05-18 15:34:31,966 - __main__ - INFO - Streaming chunk from generate: 毫
2025-05-18 15:34:31,993 - __main__ - INFO - Streaming chunk from generate: 摩
2025-05-18 15:34:31,995 - __main__ - INFO - Streaming chunk from generate: 尔
2025-05-18 15:34:32,019 - __main__ - INFO - Streaming chunk from generate: /
2025-05-18 15:34:32,021 - __main__ - INFO - Streaming chunk from generate: 升
2025-05-18 15:34:32,035 - __main__ - INFO - Streaming chunk from generate: （
2025-05-18 15:34:32,039 - __main__ - INFO - Streaming chunk from generate: 略
2025-05-18 15:34:32,082 - __main__ - INFO - Streaming chunk from generate: 高
2025-05-18 15:34:32,085 - __main__ - INFO - Streaming chunk from generate: ）

2025-05-18 15:34:32,121 - __main__ - INFO - Streaming chunk from generate: -
2025-05-18 15:34:32,123 - __main__ - INFO - Streaming chunk from generate:  餐
2025-05-18 15:34:32,147 - __main__ - INFO - Streaming chunk from generate: 后
2025-05-18 15:34:32,149 - __main__ - INFO - Streaming chunk from generate: 2
2025-05-18 15:34:32,181 - __main__ - INFO - Streaming chunk from generate: 小时
2025-05-18 15:34:32,182 - __main__ - INFO - Streaming chunk from generate: 血
2025-05-18 15:34:32,198 - __main__ - INFO - Streaming chunk from generate: 糖
2025-05-18 15:34:32,200 - __main__ - INFO - Streaming chunk from generate: ：
2025-05-18 15:34:32,230 - __main__ - INFO - Streaming chunk from generate: 8
2025-05-18 15:34:32,231 - __main__ - INFO - Streaming chunk from generate: .
2025-05-18 15:34:32,247 - __main__ - INFO - Streaming chunk from generate: 9
2025-05-18 15:34:32,249 - __main__ - INFO - Streaming chunk from generate: 毫
2025-05-18 15:34:32,289 - __main__ - INFO - Streaming chunk from generate: 摩
2025-05-18 15:34:32,289 - __main__ - INFO - Streaming chunk from generate: 尔
2025-05-18 15:34:32,301 - __main__ - INFO - Streaming chunk from generate: /
2025-05-18 15:34:32,302 - __main__ - INFO - Streaming chunk from generate: 升
2025-05-18 15:34:32,343 - __main__ - INFO - Streaming chunk from generate: （
2025-05-18 15:34:32,345 - __main__ - INFO - Streaming chunk from generate: 高
2025-05-18 15:34:32,373 - __main__ - INFO - Streaming chunk from generate: 于
2025-05-18 15:34:32,376 - __main__ - INFO - Streaming chunk from generate: 正常
2025-05-18 15:34:32,398 - __main__ - INFO - Streaming chunk from generate: 标准
2025-05-18 15:34:32,400 - __main__ - INFO - Streaming chunk from generate: ）


2025-05-18 15:34:32,412 - __main__ - INFO - Streaming chunk from generate: 希望
2025-05-18 15:34:32,413 - __main__ - INFO - Streaming chunk from generate: 这些
2025-05-18 15:34:32,430 - __main__ - INFO - Streaming chunk from generate: 信息
2025-05-18 15:34:32,432 - __main__ - INFO - Streaming chunk from generate: 能
2025-05-18 15:34:32,452 - __main__ - INFO - Streaming chunk from generate: 对
2025-05-18 15:34:32,455 - __main__ - INFO - Streaming chunk from generate: 您
2025-05-18 15:34:32,468 - __main__ - INFO - Streaming chunk from generate: 有所
2025-05-18 15:34:32,470 - __main__ - INFO - Streaming chunk from generate: 帮助
2025-05-18 15:34:32,492 - __main__ - INFO - Streaming chunk from generate: ！
2025-05-18 15:34:32,493 - __main__ - INFO - Streaming chunk from generate: 如果
2025-05-18 15:34:32,518 - __main__ - INFO - Streaming chunk from generate: 还有
2025-05-18 15:34:32,521 - __main__ - INFO - Streaming chunk from generate: 其他
2025-05-18 15:34:32,530 - __main__ - INFO - Streaming chunk from generate: 问题
2025-05-18 15:34:32,532 - __main__ - INFO - Streaming chunk from generate: ，请
2025-05-18 15:34:32,552 - __main__ - INFO - Streaming chunk from generate: 随
2025-05-18 15:34:32,554 - __main__ - INFO - Streaming chunk from generate: 时
2025-05-18 15:34:32,587 - __main__ - INFO - Streaming chunk from generate: 询
2025-05-18 15:34:32,588 - __main__ - INFO - Streaming chunk from generate: 问
2025-05-18 15:34:32,588 - __main__ - INFO - Streaming chunk from generate: 。
2025-05-18 15:34:32,588 - __main__ - INFO - Streaming chunk from generate: 
2025-05-18 15:34:32,589 - __main__ - INFO - Streaming chunk from generate: 
2025-05-18 15:35:27,921 - __main__ - INFO - The user's user_input is: 我询问的是张三，不是张三九
2025-05-18 15:35:27,939 - demoRagAgent - INFO - Agent processing user query
2025-05-18 15:35:30,537 - demoRagAgent - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-05-18 15:35:31,193 - demoRagAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-18 15:35:31,867 - __main__ - INFO - Streaming chunk from agent: 
2025-05-18 15:35:31,885 - __main__ - INFO - Streaming chunk from agent: 抱
2025-05-18 15:35:31,888 - __main__ - INFO - Streaming chunk from agent: 歉
2025-05-18 15:35:31,916 - __main__ - INFO - Streaming chunk from agent: ，我
2025-05-18 15:35:31,918 - __main__ - INFO - Streaming chunk from agent: 只能
2025-05-18 15:35:31,948 - __main__ - INFO - Streaming chunk from agent: 提供
2025-05-18 15:35:31,950 - __main__ - INFO - Streaming chunk from agent: 张
2025-05-18 15:35:31,970 - __main__ - INFO - Streaming chunk from agent: 三
2025-05-18 15:35:31,973 - __main__ - INFO - Streaming chunk from agent: 的
2025-05-18 15:35:32,046 - __main__ - INFO - Streaming chunk from agent: 健康
2025-05-18 15:35:32,048 - __main__ - INFO - Streaming chunk from agent: 档
2025-05-18 15:35:32,050 - __main__ - INFO - Streaming chunk from agent: 案
2025-05-18 15:35:32,052 - __main__ - INFO - Streaming chunk from agent: 信息
2025-05-18 15:35:32,062 - __main__ - INFO - Streaming chunk from agent: 。如果
2025-05-18 15:35:32,063 - __main__ - INFO - Streaming chunk from agent: 您
2025-05-18 15:35:32,078 - __main__ - INFO - Streaming chunk from agent: 需要
2025-05-18 15:35:32,080 - __main__ - INFO - Streaming chunk from agent: 更
2025-05-18 15:35:32,103 - __main__ - INFO - Streaming chunk from agent: 具体
2025-05-18 15:35:32,106 - __main__ - INFO - Streaming chunk from agent: 的信息
2025-05-18 15:35:32,124 - __main__ - INFO - Streaming chunk from agent: 或
2025-05-18 15:35:32,127 - __main__ - INFO - Streaming chunk from agent: 查询
2025-05-18 15:35:32,148 - __main__ - INFO - Streaming chunk from agent: 其他
2025-05-18 15:35:32,151 - __main__ - INFO - Streaming chunk from agent: 人的
2025-05-18 15:35:32,172 - __main__ - INFO - Streaming chunk from agent: 档
2025-05-18 15:35:32,174 - __main__ - INFO - Streaming chunk from agent: 案
2025-05-18 15:35:32,207 - __main__ - INFO - Streaming chunk from agent: ，请
2025-05-18 15:35:32,210 - __main__ - INFO - Streaming chunk from agent: 告诉
2025-05-18 15:35:32,231 - __main__ - INFO - Streaming chunk from agent: 我
2025-05-18 15:35:32,236 - __main__ - INFO - Streaming chunk from agent: 。
2025-05-18 15:35:32,238 - __main__ - INFO - Streaming chunk from agent: 
2025-05-18 15:35:32,241 - __main__ - INFO - Streaming chunk from agent: 
2025-05-18 15:36:31,196 - demoRagAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-18 15:37:17,135 - __main__ - INFO - Database connection pool closed
2025-05-18 15:37:17,136 - __main__ - INFO - The service has been shut down
2025-05-19 20:35:38,231 - utils.logger - DEBUG - Tool 'requirement_breakdown' routed to 'deal_tasks' (task breakdown tool)
2025-05-19 20:35:38,233 - utils.logger - INFO - Initialized ToolConfig with tools: {'requirement_breakdown'}, routing: {'requirement_breakdown': 'deal_tasks'}
2025-05-19 20:35:38,234 - utils.logger - INFO - Database connection pool initialized
2025-05-19 20:35:38,235 - utils.logger - DEBUG - Database connection pool initialized
2025-05-19 20:35:38,235 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 20:35:38,385 - utils.logger - INFO - Connection db_connection_pool status: OK, test connection successful
2025-05-19 20:35:38,995 - utils.logger - INFO - Graph visualization saved as graph.png
2025-05-19 20:35:43,475 - utils.logger - INFO - Agent processing user query
2025-05-19 20:35:45,900 - utils.logger - ERROR - Error in agent processing: name 'threading' is not defined
2025-05-19 20:35:45,909 - utils.logger - INFO - Message has no content, skipping
2025-05-19 20:36:38,237 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 20:36:51,728 - utils.logger - INFO - Database connection pool closed
2025-05-19 20:37:08,645 - utils.logger - DEBUG - Tool 'requirement_breakdown' routed to 'deal_tasks' (task breakdown tool)
2025-05-19 20:37:08,646 - utils.logger - INFO - Initialized ToolConfig with tools: {'requirement_breakdown'}, routing: {'requirement_breakdown': 'deal_tasks'}
2025-05-19 20:37:08,648 - utils.logger - INFO - Database connection pool initialized
2025-05-19 20:37:08,648 - utils.logger - DEBUG - Database connection pool initialized
2025-05-19 20:37:08,649 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 20:37:08,672 - utils.logger - INFO - Connection db_connection_pool status: OK, test connection successful
2025-05-19 20:37:09,249 - utils.logger - INFO - Graph visualization saved as graph.png
2025-05-19 20:37:13,333 - utils.logger - INFO - Agent processing user query
2025-05-19 20:37:16,209 - utils.logger - ERROR - Error in agent processing: name 'threading' is not defined
2025-05-19 20:37:16,225 - utils.logger - INFO - Message has no content, skipping
2025-05-19 20:38:08,651 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 20:39:08,654 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 20:39:20,418 - utils.logger - INFO - Database connection pool closed
2025-05-19 20:39:41,184 - utils.logger - DEBUG - Tool 'requirement_breakdown' routed to 'deal_tasks' (task breakdown tool)
2025-05-19 20:39:41,185 - utils.logger - INFO - Initialized ToolConfig with tools: {'requirement_breakdown'}, routing: {'requirement_breakdown': 'deal_tasks'}
2025-05-19 20:39:41,186 - utils.logger - INFO - Database connection pool initialized
2025-05-19 20:39:41,187 - utils.logger - DEBUG - Database connection pool initialized
2025-05-19 20:39:41,188 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 20:39:41,211 - utils.logger - INFO - Connection db_connection_pool status: OK, test connection successful
2025-05-19 20:39:41,742 - utils.logger - INFO - Graph visualization saved as graph.png
2025-05-19 20:39:44,591 - utils.logger - INFO - Agent processing user query
2025-05-19 20:39:46,902 - utils.logger - INFO - Loading and caching prompt template from prompts/prompt_template_agent_new.txt
2025-05-19 20:40:41,189 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 20:40:48,714 - utils.logger - INFO - Agent processing user query
2025-05-19 20:40:50,735 - utils.logger - INFO - Using cached prompt template for prompts/prompt_template_agent_new.txt
2025-05-19 20:40:52,598 - utils.logger - INFO - Calling tool: requirement_breakdown
2025-05-19 20:40:52,610 - utils.logger - INFO - Tool requirement_breakdown routed to deal_tasks based on config
2025-05-19 20:40:52,622 - utils.logger - ERROR - Error processing response: 'deal_tasks'
2025-05-19 20:41:41,193 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 20:42:41,196 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 20:43:41,198 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 20:44:41,202 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 20:45:41,203 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 20:46:41,206 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 20:47:41,207 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 20:48:41,210 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 20:49:41,214 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 20:50:41,217 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 20:51:41,219 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 20:51:59,713 - utils.logger - INFO - Database connection pool closed
2025-05-19 20:52:03,603 - utils.logger - DEBUG - Tool 'requirement_breakdown' routed to 'deal_tasks' (task breakdown tool)
2025-05-19 20:52:03,604 - utils.logger - INFO - Initialized ToolConfig with tools: {'requirement_breakdown'}, routing: {'requirement_breakdown': 'deal_tasks'}
2025-05-19 20:52:03,605 - utils.logger - INFO - Database connection pool initialized
2025-05-19 20:52:03,606 - utils.logger - DEBUG - Database connection pool initialized
2025-05-19 20:52:03,606 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 20:52:03,621 - utils.logger - INFO - Connection db_connection_pool status: OK, test connection successful
2025-05-19 20:52:03,625 - utils.logger - ERROR - Unexpected error: Found edge starting at unknown node 'rewrite'
2025-05-19 20:52:03,628 - utils.logger - INFO - Database connection pool closed
2025-05-19 20:52:45,417 - utils.logger - DEBUG - Tool 'requirement_breakdown' routed to 'deal_tasks' (task breakdown tool)
2025-05-19 20:52:45,418 - utils.logger - INFO - Initialized ToolConfig with tools: {'requirement_breakdown'}, routing: {'requirement_breakdown': 'deal_tasks'}
2025-05-19 20:52:45,419 - utils.logger - INFO - Database connection pool initialized
2025-05-19 20:52:45,420 - utils.logger - DEBUG - Database connection pool initialized
2025-05-19 20:52:45,421 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 20:52:45,438 - utils.logger - INFO - Connection db_connection_pool status: OK, test connection successful
2025-05-19 20:52:45,443 - utils.logger - ERROR - Unexpected error: At 'call_tools' node, 'condition' branch found unknown target 'grade_documents'
2025-05-19 20:52:45,445 - utils.logger - INFO - Database connection pool closed
2025-05-19 20:58:28,475 - utils.logger - DEBUG - Tool 'requirement_breakdown' routed to 'deal_tasks' (task breakdown tool)
2025-05-19 20:58:28,476 - utils.logger - INFO - Initialized ToolConfig with tools: {'requirement_breakdown'}, routing: {'requirement_breakdown': 'deal_tasks'}
2025-05-19 20:58:28,477 - utils.logger - INFO - Database connection pool initialized
2025-05-19 20:58:28,478 - utils.logger - DEBUG - Database connection pool initialized
2025-05-19 20:58:28,479 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 20:58:28,496 - utils.logger - INFO - Connection db_connection_pool status: OK, test connection successful
2025-05-19 20:58:49,843 - utils.logger - ERROR - Unexpected error: Failed to reach https://mermaid.ink/ API while trying to render your graph after 1 retries. To resolve this issue:
1. Check your internet connection and try again
2. Try with higher retry settings: `draw_mermaid_png(..., max_retries=5, retry_delay=2.0)`
3. Use the Pyppeteer rendering method which will render your graph locally in a browser: `draw_mermaid_png(..., draw_method=MermaidDrawMethod.PYPPETEER)`
2025-05-19 20:58:49,877 - utils.logger - INFO - Database connection pool closed
2025-05-19 20:59:11,647 - utils.logger - DEBUG - Tool 'requirement_breakdown' routed to 'deal_tasks' (task breakdown tool)
2025-05-19 20:59:11,648 - utils.logger - INFO - Initialized ToolConfig with tools: {'requirement_breakdown'}, routing: {'requirement_breakdown': 'deal_tasks'}
2025-05-19 20:59:11,649 - utils.logger - INFO - Database connection pool initialized
2025-05-19 20:59:11,650 - utils.logger - DEBUG - Database connection pool initialized
2025-05-19 20:59:11,650 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 20:59:11,667 - utils.logger - INFO - Connection db_connection_pool status: OK, test connection successful
2025-05-19 20:59:32,904 - utils.logger - ERROR - Unexpected error: Failed to reach https://mermaid.ink/ API while trying to render your graph after 1 retries. To resolve this issue:
1. Check your internet connection and try again
2. Try with higher retry settings: `draw_mermaid_png(..., max_retries=5, retry_delay=2.0)`
3. Use the Pyppeteer rendering method which will render your graph locally in a browser: `draw_mermaid_png(..., draw_method=MermaidDrawMethod.PYPPETEER)`
2025-05-19 20:59:32,913 - utils.logger - INFO - Database connection pool closed
2025-05-19 21:03:40,756 - utils.logger - DEBUG - Tool 'requirement_breakdown' routed to 'deal_tasks' (task breakdown tool)
2025-05-19 21:03:40,757 - utils.logger - INFO - Initialized ToolConfig with tools: {'requirement_breakdown'}, routing: {'requirement_breakdown': 'deal_tasks'}
2025-05-19 21:03:40,758 - utils.logger - INFO - Database connection pool initialized
2025-05-19 21:03:40,759 - utils.logger - DEBUG - Database connection pool initialized
2025-05-19 21:03:40,760 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 21:03:40,775 - utils.logger - INFO - Connection db_connection_pool status: OK, test connection successful
2025-05-19 21:03:40,784 - utils.logger - ERROR - Failed to render graph visualization: name 'MermaidDrawMethod' is not defined
2025-05-19 21:04:40,761 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 21:05:40,764 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 21:06:40,768 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 21:07:40,769 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 21:08:40,772 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 21:09:40,775 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 21:10:40,779 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 21:11:40,782 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 21:12:40,786 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 21:13:40,788 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 21:14:40,791 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 21:15:40,795 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 21:16:40,798 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 21:17:40,799 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 21:18:40,802 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 21:19:40,804 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 21:20:40,807 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 21:21:40,810 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 21:22:40,813 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 21:23:40,816 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 21:24:40,819 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 21:25:40,824 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 21:26:40,827 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 21:27:40,828 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 21:28:40,831 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 21:29:40,835 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 21:30:40,837 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 21:31:40,840 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 21:32:40,842 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 21:33:40,844 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 21:34:40,845 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 21:35:40,846 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 21:36:40,847 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 21:37:04,680 - utils.logger - INFO - Agent processing user query
2025-05-19 21:37:07,500 - utils.logger - INFO - Loading and caching prompt template from prompts/prompt_template_agent_new.txt
2025-05-19 21:37:40,848 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 21:38:07,071 - utils.logger - INFO - Agent processing user query
2025-05-19 21:38:09,659 - utils.logger - INFO - Using cached prompt template for prompts/prompt_template_agent_new.txt
2025-05-19 21:38:11,442 - utils.logger - INFO - Calling tool: requirement_breakdown
2025-05-19 21:38:11,449 - utils.logger - INFO - Tool requirement_breakdown routed to deal_tasks based on config
2025-05-19 21:38:11,452 - utils.logger - INFO - Generating final response
2025-05-19 21:38:11,454 - utils.logger - INFO - Message has no content, skipping
2025-05-19 21:38:11,455 - utils.logger - INFO - Generating final response
2025-05-19 21:38:11,456 - utils.logger - INFO - Loading and caching prompt template from prompts/prompt_template_generate.txt
2025-05-19 21:38:40,851 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 21:39:40,855 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 21:40:40,857 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 21:41:40,859 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 21:42:40,861 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 21:43:40,862 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 21:44:40,865 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 21:44:42,978 - utils.logger - INFO - Database connection pool closed
2025-05-19 21:44:47,606 - utils.logger - DEBUG - Tool 'requirement_breakdown' routed to 'deal_tasks' (task breakdown tool)
2025-05-19 21:44:47,607 - utils.logger - INFO - Initialized ToolConfig with tools: {'requirement_breakdown'}, routing: {'requirement_breakdown': 'deal_tasks'}
2025-05-19 21:44:47,608 - utils.logger - INFO - Database connection pool initialized
2025-05-19 21:44:47,609 - utils.logger - DEBUG - Database connection pool initialized
2025-05-19 21:44:47,609 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 21:44:47,669 - utils.logger - INFO - Connection db_connection_pool status: OK, test connection successful
2025-05-19 21:44:49,124 - utils.logger - INFO - Graph visualization saved as graph.png
2025-05-19 21:45:43,186 - utils.logger - INFO - Agent processing user query
2025-05-19 21:45:46,862 - utils.logger - INFO - Loading and caching prompt template from prompts/prompt_template_agent_new.txt
2025-05-19 21:45:47,610 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 21:45:48,658 - utils.logger - INFO - Calling tool: requirement_breakdown
2025-05-19 21:45:48,660 - utils.logger - INFO - Loading and caching prompt template from task_agent_prompt_template_requirement_breakdown.txt
2025-05-19 21:45:48,661 - utils.logger - ERROR - Template file task_agent_prompt_template_requirement_breakdown.txt not found
2025-05-19 21:45:48,679 - utils.logger - INFO - Tool requirement_breakdown routed to deal_tasks based on config
2025-05-19 21:45:48,680 - utils.logger - INFO - Generating final response
2025-05-19 21:45:48,681 - utils.logger - INFO - Message has no content, skipping
2025-05-19 21:45:48,682 - utils.logger - INFO - Generating final response
2025-05-19 21:45:48,682 - utils.logger - INFO - Loading and caching prompt template from prompts/prompt_template_generate.txt
2025-05-19 21:46:47,612 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 21:47:47,615 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 21:48:47,618 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 21:49:47,621 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 21:50:47,622 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 21:51:47,626 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 21:52:27,012 - utils.logger - INFO - Database connection pool closed
2025-05-19 21:52:31,225 - utils.logger - DEBUG - Tool 'requirement_breakdown' routed to 'deal_tasks' (task breakdown tool)
2025-05-19 21:52:31,226 - utils.logger - INFO - Initialized ToolConfig with tools: {'requirement_breakdown'}, routing: {'requirement_breakdown': 'deal_tasks'}
2025-05-19 21:52:31,226 - utils.logger - INFO - Database connection pool initialized
2025-05-19 21:52:31,227 - utils.logger - DEBUG - Database connection pool initialized
2025-05-19 21:52:31,228 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 21:52:31,245 - utils.logger - INFO - Connection db_connection_pool status: OK, test connection successful
2025-05-19 21:52:31,796 - utils.logger - INFO - Graph visualization saved as graph.png
2025-05-19 21:52:37,306 - utils.logger - INFO - Agent processing user query
2025-05-19 21:52:39,490 - utils.logger - INFO - Loading and caching prompt template from prompts/prompt_template_agent_new.txt
2025-05-19 21:52:42,210 - utils.logger - INFO - Calling tool: requirement_breakdown
2025-05-19 21:52:42,214 - utils.logger - INFO - Loading and caching prompt template from prompts/task_agent_prompt_template_requirement_breakdown.txt
2025-05-19 21:52:42,217 - utils.logger - INFO - Tool requirement_breakdown routed to deal_tasks based on config
2025-05-19 21:52:42,218 - utils.logger - INFO - Generating final response
2025-05-19 21:52:42,220 - utils.logger - INFO - Message has no content, skipping
2025-05-19 21:52:42,220 - utils.logger - INFO - Generating final response
2025-05-19 21:52:42,221 - utils.logger - INFO - Loading and caching prompt template from prompts/prompt_template_generate.txt
2025-05-19 21:53:31,229 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 21:54:31,231 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 21:55:03,765 - utils.logger - INFO - Database connection pool closed
2025-05-19 21:55:07,834 - utils.logger - DEBUG - Tool 'requirement_breakdown' routed to 'deal_tasks' (task breakdown tool)
2025-05-19 21:55:07,835 - utils.logger - INFO - Initialized ToolConfig with tools: {'requirement_breakdown'}, routing: {'requirement_breakdown': 'deal_tasks'}
2025-05-19 21:55:07,836 - utils.logger - INFO - Database connection pool initialized
2025-05-19 21:55:07,837 - utils.logger - DEBUG - Database connection pool initialized
2025-05-19 21:55:07,838 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 21:55:07,852 - utils.logger - INFO - Connection db_connection_pool status: OK, test connection successful
2025-05-19 21:55:11,932 - utils.logger - INFO - Graph visualization saved as graph.png
2025-05-19 21:55:20,545 - utils.logger - INFO - Agent processing user query
2025-05-19 21:55:25,440 - utils.logger - INFO - Loading and caching prompt template from prompts/prompt_template_agent_new.txt
2025-05-19 21:55:34,123 - utils.logger - INFO - Calling tool: requirement_breakdown
2025-05-19 21:55:34,125 - utils.logger - INFO - Loading and caching prompt template from prompts/task_agent_prompt_template_requirement_breakdown.txt
2025-05-19 21:55:34,127 - utils.logger - INFO - Tool requirement_breakdown routed to deal_tasks based on config
2025-05-19 21:55:34,128 - utils.logger - INFO - Generating final response
2025-05-19 21:55:34,129 - utils.logger - INFO - Message has no content, skipping
2025-05-19 21:55:34,130 - utils.logger - INFO - Generating final response
2025-05-19 21:55:34,130 - utils.logger - INFO - Loading and caching prompt template from prompts/prompt_template_generate.txt
2025-05-19 21:56:07,840 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 21:57:07,843 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 21:58:07,846 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 21:59:07,848 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 22:00:07,851 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 22:01:02,813 - utils.logger - INFO - Database connection pool closed
2025-05-19 22:01:06,696 - utils.logger - DEBUG - Tool 'requirement_breakdown' routed to 'deal_tasks' (task breakdown tool)
2025-05-19 22:01:06,697 - utils.logger - INFO - Initialized ToolConfig with tools: {'requirement_breakdown'}, routing: {'requirement_breakdown': 'deal_tasks'}
2025-05-19 22:01:06,699 - utils.logger - INFO - Database connection pool initialized
2025-05-19 22:01:06,700 - utils.logger - DEBUG - Database connection pool initialized
2025-05-19 22:01:06,701 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 22:01:06,721 - utils.logger - INFO - Connection db_connection_pool status: OK, test connection successful
2025-05-19 22:01:07,208 - utils.logger - INFO - Graph visualization saved as graph.png
2025-05-19 22:01:12,039 - utils.logger - INFO - Agent processing user query
2025-05-19 22:01:14,083 - utils.logger - INFO - Loading and caching prompt template from prompts/prompt_template_agent_new.txt
2025-05-19 22:01:16,256 - utils.logger - INFO - Calling tool: requirement_breakdown
2025-05-19 22:01:16,261 - utils.logger - INFO - Loading and caching prompt template from prompts/task_agent_prompt_template_requirement_breakdown.txt
2025-05-19 22:01:16,265 - utils.logger - INFO - Tool requirement_breakdown routed to deal_tasks based on config
2025-05-19 22:01:16,266 - utils.logger - INFO - Generating final response
2025-05-19 22:01:16,267 - utils.logger - INFO - Message has no content, skipping
2025-05-19 22:01:16,267 - utils.logger - INFO - Generating final response
2025-05-19 22:01:16,268 - utils.logger - INFO - Loading and caching prompt template from prompts/prompt_template_generate.txt
2025-05-19 22:02:06,703 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 22:03:06,706 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 22:04:06,707 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 22:05:06,709 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 22:05:33,843 - utils.logger - INFO - Database connection pool closed
2025-05-19 22:05:37,660 - utils.logger - DEBUG - Tool 'requirement_breakdown' routed to 'deal_tasks' (task breakdown tool)
2025-05-19 22:05:37,661 - utils.logger - INFO - Initialized ToolConfig with tools: {'requirement_breakdown'}, routing: {'requirement_breakdown': 'deal_tasks'}
2025-05-19 22:05:37,662 - utils.logger - INFO - Database connection pool initialized
2025-05-19 22:05:37,663 - utils.logger - DEBUG - Database connection pool initialized
2025-05-19 22:05:37,663 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 22:05:37,682 - utils.logger - INFO - Connection db_connection_pool status: OK, test connection successful
2025-05-19 22:05:38,173 - utils.logger - INFO - Graph visualization saved as graph.png
2025-05-19 22:05:46,153 - utils.logger - INFO - Agent processing user query
2025-05-19 22:05:48,626 - utils.logger - INFO - Loading and caching prompt template from prompts/prompt_template_agent_new.txt
2025-05-19 22:05:50,777 - utils.logger - INFO - Calling tool: requirement_breakdown
2025-05-19 22:05:50,779 - utils.logger - INFO - Loading and caching prompt template from prompts/task_agent_prompt_template_requirement_breakdown.txt
2025-05-19 22:05:58,776 - utils.logger - INFO - Raw response type: <class 'utils.tools_config.TaskList'>
2025-05-19 22:05:58,777 - utils.logger - INFO - Raw response content: tasks=[RequirementBreakdownResult(task_id='1', description='分析分镜描述并整理需求', dependencies=[], priority=1, scope='other', duration=2), RequirementBreakdownResult(task_id='2', description='设计分镜图的模板', dependencies=['1'], priority=1, scope='ux', duration=3), RequirementBreakdownResult(task_id='3', description='开发分镜图生成工具', dependencies=['2'], priority=1, scope='front', duration=5), RequirementBreakdownResult(task_id='4', description='设计分镜视频的模板', dependencies=['1'], priority=1, scope='ux', duration=3), RequirementBreakdownResult(task_id='5', description='开发分镜视频生成工具', dependencies=['4'], priority=1, scope='front', duration=5), RequirementBreakdownResult(task_id='6', description='整合分镜图和分镜视频生成功能', dependencies=['3', '5'], priority=1, scope='front', duration=2), RequirementBreakdownResult(task_id='7', description='进行功能测试，确保分镜图和视频生成正确', dependencies=['6'], priority=1, scope='qa', duration=2)]
2025-05-19 22:05:58,778 - utils.logger - INFO - Extracted tasks: [{'task_id': '1', 'description': '分析分镜描述并整理需求', 'dependencies': [], 'priority': 1, 'scope': 'other', 'duration': 2}, {'task_id': '2', 'description': '设计分镜图的模板', 'dependencies': ['1'], 'priority': 1, 'scope': 'ux', 'duration': 3}, {'task_id': '3', 'description': '开发分镜图生成工具', 'dependencies': ['2'], 'priority': 1, 'scope': 'front', 'duration': 5}, {'task_id': '4', 'description': '设计分镜视频的模板', 'dependencies': ['1'], 'priority': 1, 'scope': 'ux', 'duration': 3}, {'task_id': '5', 'description': '开发分镜视频生成工具', 'dependencies': ['4'], 'priority': 1, 'scope': 'front', 'duration': 5}, {'task_id': '6', 'description': '整合分镜图和分镜视频生成功能', 'dependencies': ['3', '5'], 'priority': 1, 'scope': 'front', 'duration': 2}, {'task_id': '7', 'description': '进行功能测试，确保分镜图和视频生成正确', 'dependencies': ['6'], 'priority': 1, 'scope': 'qa', 'duration': 2}]
2025-05-19 22:05:58,779 - utils.logger - INFO - Tool requirement_breakdown routed to deal_tasks based on config
2025-05-19 22:05:58,780 - utils.logger - INFO - Generating final response
2025-05-19 22:05:58,782 - utils.logger - INFO - Message has no content, skipping
2025-05-19 22:05:58,783 - utils.logger - INFO - Generating final response
2025-05-19 22:05:58,783 - utils.logger - INFO - Loading and caching prompt template from prompts/prompt_template_generate.txt
2025-05-19 22:06:37,665 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 22:07:37,667 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 22:08:37,670 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 22:09:37,672 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 22:10:37,673 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 22:11:37,674 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 22:12:37,679 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 22:13:37,681 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 22:14:37,685 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 22:15:37,686 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 22:16:37,691 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 22:17:37,693 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 22:18:37,697 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 22:19:37,698 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 22:20:37,699 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 22:21:37,700 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 22:22:37,701 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 22:23:37,704 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 22:24:37,707 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 22:25:37,710 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 22:26:37,712 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 22:27:37,714 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 22:28:37,717 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 22:29:37,721 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 22:30:37,724 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 22:31:37,727 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 22:32:37,729 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 22:33:37,732 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 22:34:37,735 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 22:35:37,738 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 22:36:37,741 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 22:37:37,744 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 22:38:37,745 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 22:39:37,748 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 22:40:37,751 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 22:41:37,753 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 22:42:37,755 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 22:43:37,758 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 22:44:37,761 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 22:45:37,763 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-19 22:46:15,065 - utils.logger - INFO - Database connection pool closed
2025-05-20 07:49:13,158 - utils.logger - DEBUG - Tool 'requirement_breakdown' routed to 'deal_tasks' (task breakdown tool)
2025-05-20 07:49:13,159 - utils.logger - INFO - Initialized ToolConfig with tools: {'requirement_breakdown'}, routing: {'requirement_breakdown': 'deal_tasks'}
2025-05-20 07:49:13,160 - utils.logger - INFO - Database connection pool initialized
2025-05-20 07:49:13,162 - utils.logger - DEBUG - Database connection pool initialized
2025-05-20 07:49:13,162 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-20 07:49:13,301 - utils.logger - INFO - Connection db_connection_pool status: OK, test connection successful
2025-05-20 07:49:14,055 - utils.logger - INFO - Graph visualization saved as graph.png
2025-05-20 07:49:34,051 - utils.logger - INFO - Agent processing user query
2025-05-20 07:49:36,991 - utils.logger - INFO - Loading and caching prompt template from prompts/prompt_template_agent_new.txt
2025-05-20 07:49:39,197 - utils.logger - INFO - Calling tool: requirement_breakdown
2025-05-20 07:49:39,200 - utils.logger - INFO - Loading and caching prompt template from prompts/task_agent_prompt_template_requirement_breakdown.txt
2025-05-20 07:49:39,203 - utils.logger - ERROR - Error in requirement_breakdown (attempt 1/3): 'Input to ChatPromptTemplate is missing variables {\'\\n  "tasks"\'}.  Expected: [\'\\n  "tasks"\', \'requirement\'] Received: [\'requirement\']\nNote: if you intended {\n  "tasks"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n  "tasks"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-05-20 07:49:39,205 - utils.logger - ERROR - Traceback (most recent call last):
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\utils\tools_config.py", line 113, in requirement_breakdown
    response = agent_chain.invoke(prompt_input)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\base.py", line 3032, in invoke
    input = context.run(step.invoke, input, config, **kwargs)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 216, in invoke
    return self._call_with_config(
           ~~~~~~~~~~~~~~~~~~~~~~^
        self._format_prompt_with_error_handling,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
        serialized=self._serialized,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\base.py", line 1930, in _call_with_config
    context.run(
    ~~~~~~~~~~~^
        call_func_with_variable_args,  # type: ignore[arg-type]
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
        **kwargs,
        ^^^^^^^^^
    ),
    ^
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\config.py", line 428, in call_func_with_variable_args
    return func(input, **kwargs)  # type: ignore[call-arg]
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 189, in _format_prompt_with_error_handling
    _inner_input = self._validate_input(inner_input)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 183, in _validate_input
    raise KeyError(
        create_message(message=msg, error_code=ErrorCode.INVALID_PROMPT_INPUT)
    )
KeyError: 'Input to ChatPromptTemplate is missing variables {\'\\n  "tasks"\'}.  Expected: [\'\\n  "tasks"\', \'requirement\'] Received: [\'requirement\']\nNote: if you intended {\n  "tasks"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n  "tasks"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '

2025-05-20 07:49:39,206 - utils.logger - INFO - Using cached prompt template for prompts/task_agent_prompt_template_requirement_breakdown.txt
2025-05-20 07:49:39,208 - utils.logger - ERROR - Error in requirement_breakdown (attempt 2/3): 'Input to ChatPromptTemplate is missing variables {\'\\n  "tasks"\'}.  Expected: [\'\\n  "tasks"\', \'requirement\'] Received: [\'requirement\']\nNote: if you intended {\n  "tasks"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n  "tasks"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-05-20 07:49:39,209 - utils.logger - ERROR - Traceback (most recent call last):
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\utils\tools_config.py", line 113, in requirement_breakdown
    response = agent_chain.invoke(prompt_input)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\base.py", line 3032, in invoke
    input = context.run(step.invoke, input, config, **kwargs)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 216, in invoke
    return self._call_with_config(
           ~~~~~~~~~~~~~~~~~~~~~~^
        self._format_prompt_with_error_handling,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
        serialized=self._serialized,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\base.py", line 1930, in _call_with_config
    context.run(
    ~~~~~~~~~~~^
        call_func_with_variable_args,  # type: ignore[arg-type]
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
        **kwargs,
        ^^^^^^^^^
    ),
    ^
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\config.py", line 428, in call_func_with_variable_args
    return func(input, **kwargs)  # type: ignore[call-arg]
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 189, in _format_prompt_with_error_handling
    _inner_input = self._validate_input(inner_input)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 183, in _validate_input
    raise KeyError(
        create_message(message=msg, error_code=ErrorCode.INVALID_PROMPT_INPUT)
    )
KeyError: 'Input to ChatPromptTemplate is missing variables {\'\\n  "tasks"\'}.  Expected: [\'\\n  "tasks"\', \'requirement\'] Received: [\'requirement\']\nNote: if you intended {\n  "tasks"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n  "tasks"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '

2025-05-20 07:49:39,210 - utils.logger - INFO - Using cached prompt template for prompts/task_agent_prompt_template_requirement_breakdown.txt
2025-05-20 07:49:39,211 - utils.logger - ERROR - Error in requirement_breakdown (attempt 3/3): 'Input to ChatPromptTemplate is missing variables {\'\\n  "tasks"\'}.  Expected: [\'\\n  "tasks"\', \'requirement\'] Received: [\'requirement\']\nNote: if you intended {\n  "tasks"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n  "tasks"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-05-20 07:49:39,212 - utils.logger - ERROR - Traceback (most recent call last):
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\utils\tools_config.py", line 113, in requirement_breakdown
    response = agent_chain.invoke(prompt_input)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\base.py", line 3032, in invoke
    input = context.run(step.invoke, input, config, **kwargs)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 216, in invoke
    return self._call_with_config(
           ~~~~~~~~~~~~~~~~~~~~~~^
        self._format_prompt_with_error_handling,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
        serialized=self._serialized,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\base.py", line 1930, in _call_with_config
    context.run(
    ~~~~~~~~~~~^
        call_func_with_variable_args,  # type: ignore[arg-type]
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
        **kwargs,
        ^^^^^^^^^
    ),
    ^
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\config.py", line 428, in call_func_with_variable_args
    return func(input, **kwargs)  # type: ignore[call-arg]
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 189, in _format_prompt_with_error_handling
    _inner_input = self._validate_input(inner_input)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 183, in _validate_input
    raise KeyError(
        create_message(message=msg, error_code=ErrorCode.INVALID_PROMPT_INPUT)
    )
KeyError: 'Input to ChatPromptTemplate is missing variables {\'\\n  "tasks"\'}.  Expected: [\'\\n  "tasks"\', \'requirement\'] Received: [\'requirement\']\nNote: if you intended {\n  "tasks"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n  "tasks"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '

2025-05-20 07:49:39,215 - utils.logger - INFO - Tool requirement_breakdown routed to deal_tasks based on config
2025-05-20 07:49:39,216 - utils.logger - INFO - Generating deal_tasks result
2025-05-20 07:49:39,217 - utils.logger - WARNING - task_breakdown_messages list is empty, defaulting to rewrite
2025-05-20 07:49:39,218 - utils.logger - INFO - Message has no content, skipping
2025-05-20 07:49:39,218 - utils.logger - INFO - Rewriting query
2025-05-20 07:49:39,219 - utils.logger - INFO - Loading and caching prompt template from prompts/prompt_template_rewrite.txt
2025-05-20 07:49:40,329 - utils.logger - INFO - Rewrite count: 1
2025-05-20 07:49:40,333 - utils.logger - INFO - Agent processing user query
2025-05-20 07:49:41,520 - utils.logger - INFO - Using cached prompt template for prompts/prompt_template_agent_new.txt
2025-05-20 07:49:43,511 - utils.logger - INFO - Calling tool: requirement_breakdown
2025-05-20 07:49:43,516 - utils.logger - INFO - Using cached prompt template for prompts/task_agent_prompt_template_requirement_breakdown.txt
2025-05-20 07:49:43,518 - utils.logger - ERROR - Error in requirement_breakdown (attempt 1/3): 'Input to ChatPromptTemplate is missing variables {\'\\n  "tasks"\'}.  Expected: [\'\\n  "tasks"\', \'requirement\'] Received: [\'requirement\']\nNote: if you intended {\n  "tasks"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n  "tasks"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-05-20 07:49:43,520 - utils.logger - ERROR - Traceback (most recent call last):
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\utils\tools_config.py", line 113, in requirement_breakdown
    response = agent_chain.invoke(prompt_input)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\base.py", line 3032, in invoke
    input = context.run(step.invoke, input, config, **kwargs)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 216, in invoke
    return self._call_with_config(
           ~~~~~~~~~~~~~~~~~~~~~~^
        self._format_prompt_with_error_handling,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
        serialized=self._serialized,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\base.py", line 1930, in _call_with_config
    context.run(
    ~~~~~~~~~~~^
        call_func_with_variable_args,  # type: ignore[arg-type]
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
        **kwargs,
        ^^^^^^^^^
    ),
    ^
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\config.py", line 428, in call_func_with_variable_args
    return func(input, **kwargs)  # type: ignore[call-arg]
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 189, in _format_prompt_with_error_handling
    _inner_input = self._validate_input(inner_input)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 183, in _validate_input
    raise KeyError(
        create_message(message=msg, error_code=ErrorCode.INVALID_PROMPT_INPUT)
    )
KeyError: 'Input to ChatPromptTemplate is missing variables {\'\\n  "tasks"\'}.  Expected: [\'\\n  "tasks"\', \'requirement\'] Received: [\'requirement\']\nNote: if you intended {\n  "tasks"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n  "tasks"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '

2025-05-20 07:49:43,522 - utils.logger - INFO - Using cached prompt template for prompts/task_agent_prompt_template_requirement_breakdown.txt
2025-05-20 07:49:43,523 - utils.logger - ERROR - Error in requirement_breakdown (attempt 2/3): 'Input to ChatPromptTemplate is missing variables {\'\\n  "tasks"\'}.  Expected: [\'\\n  "tasks"\', \'requirement\'] Received: [\'requirement\']\nNote: if you intended {\n  "tasks"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n  "tasks"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-05-20 07:49:43,525 - utils.logger - ERROR - Traceback (most recent call last):
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\utils\tools_config.py", line 113, in requirement_breakdown
    response = agent_chain.invoke(prompt_input)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\base.py", line 3032, in invoke
    input = context.run(step.invoke, input, config, **kwargs)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 216, in invoke
    return self._call_with_config(
           ~~~~~~~~~~~~~~~~~~~~~~^
        self._format_prompt_with_error_handling,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
        serialized=self._serialized,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\base.py", line 1930, in _call_with_config
    context.run(
    ~~~~~~~~~~~^
        call_func_with_variable_args,  # type: ignore[arg-type]
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
        **kwargs,
        ^^^^^^^^^
    ),
    ^
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\config.py", line 428, in call_func_with_variable_args
    return func(input, **kwargs)  # type: ignore[call-arg]
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 189, in _format_prompt_with_error_handling
    _inner_input = self._validate_input(inner_input)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 183, in _validate_input
    raise KeyError(
        create_message(message=msg, error_code=ErrorCode.INVALID_PROMPT_INPUT)
    )
KeyError: 'Input to ChatPromptTemplate is missing variables {\'\\n  "tasks"\'}.  Expected: [\'\\n  "tasks"\', \'requirement\'] Received: [\'requirement\']\nNote: if you intended {\n  "tasks"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n  "tasks"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '

2025-05-20 07:49:43,526 - utils.logger - INFO - Using cached prompt template for prompts/task_agent_prompt_template_requirement_breakdown.txt
2025-05-20 07:49:43,527 - utils.logger - ERROR - Error in requirement_breakdown (attempt 3/3): 'Input to ChatPromptTemplate is missing variables {\'\\n  "tasks"\'}.  Expected: [\'\\n  "tasks"\', \'requirement\'] Received: [\'requirement\']\nNote: if you intended {\n  "tasks"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n  "tasks"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-05-20 07:49:43,528 - utils.logger - ERROR - Traceback (most recent call last):
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\utils\tools_config.py", line 113, in requirement_breakdown
    response = agent_chain.invoke(prompt_input)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\base.py", line 3032, in invoke
    input = context.run(step.invoke, input, config, **kwargs)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 216, in invoke
    return self._call_with_config(
           ~~~~~~~~~~~~~~~~~~~~~~^
        self._format_prompt_with_error_handling,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
        serialized=self._serialized,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\base.py", line 1930, in _call_with_config
    context.run(
    ~~~~~~~~~~~^
        call_func_with_variable_args,  # type: ignore[arg-type]
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
        **kwargs,
        ^^^^^^^^^
    ),
    ^
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\config.py", line 428, in call_func_with_variable_args
    return func(input, **kwargs)  # type: ignore[call-arg]
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 189, in _format_prompt_with_error_handling
    _inner_input = self._validate_input(inner_input)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 183, in _validate_input
    raise KeyError(
        create_message(message=msg, error_code=ErrorCode.INVALID_PROMPT_INPUT)
    )
KeyError: 'Input to ChatPromptTemplate is missing variables {\'\\n  "tasks"\'}.  Expected: [\'\\n  "tasks"\', \'requirement\'] Received: [\'requirement\']\nNote: if you intended {\n  "tasks"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n  "tasks"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '

2025-05-20 07:49:43,529 - utils.logger - INFO - Tool requirement_breakdown routed to deal_tasks based on config
2025-05-20 07:49:43,530 - utils.logger - INFO - Generating deal_tasks result
2025-05-20 07:49:43,531 - utils.logger - WARNING - task_breakdown_messages list is empty, defaulting to rewrite
2025-05-20 07:49:43,532 - utils.logger - INFO - Message has no content, skipping
2025-05-20 07:49:43,532 - utils.logger - INFO - Rewriting query
2025-05-20 07:49:43,533 - utils.logger - INFO - Using cached prompt template for prompts/prompt_template_rewrite.txt
2025-05-20 07:49:44,708 - utils.logger - INFO - Rewrite count: 2
2025-05-20 07:49:44,711 - utils.logger - INFO - Agent processing user query
2025-05-20 07:49:45,427 - utils.logger - INFO - Using cached prompt template for prompts/prompt_template_agent_new.txt
2025-05-20 07:49:46,631 - utils.logger - INFO - Calling tool: requirement_breakdown
2025-05-20 07:49:46,635 - utils.logger - INFO - Using cached prompt template for prompts/task_agent_prompt_template_requirement_breakdown.txt
2025-05-20 07:49:46,637 - utils.logger - ERROR - Error in requirement_breakdown (attempt 1/3): 'Input to ChatPromptTemplate is missing variables {\'\\n  "tasks"\'}.  Expected: [\'\\n  "tasks"\', \'requirement\'] Received: [\'requirement\']\nNote: if you intended {\n  "tasks"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n  "tasks"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-05-20 07:49:46,639 - utils.logger - ERROR - Traceback (most recent call last):
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\utils\tools_config.py", line 113, in requirement_breakdown
    response = agent_chain.invoke(prompt_input)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\base.py", line 3032, in invoke
    input = context.run(step.invoke, input, config, **kwargs)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 216, in invoke
    return self._call_with_config(
           ~~~~~~~~~~~~~~~~~~~~~~^
        self._format_prompt_with_error_handling,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
        serialized=self._serialized,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\base.py", line 1930, in _call_with_config
    context.run(
    ~~~~~~~~~~~^
        call_func_with_variable_args,  # type: ignore[arg-type]
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
        **kwargs,
        ^^^^^^^^^
    ),
    ^
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\config.py", line 428, in call_func_with_variable_args
    return func(input, **kwargs)  # type: ignore[call-arg]
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 189, in _format_prompt_with_error_handling
    _inner_input = self._validate_input(inner_input)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 183, in _validate_input
    raise KeyError(
        create_message(message=msg, error_code=ErrorCode.INVALID_PROMPT_INPUT)
    )
KeyError: 'Input to ChatPromptTemplate is missing variables {\'\\n  "tasks"\'}.  Expected: [\'\\n  "tasks"\', \'requirement\'] Received: [\'requirement\']\nNote: if you intended {\n  "tasks"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n  "tasks"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '

2025-05-20 07:49:46,639 - utils.logger - INFO - Using cached prompt template for prompts/task_agent_prompt_template_requirement_breakdown.txt
2025-05-20 07:49:46,640 - utils.logger - ERROR - Error in requirement_breakdown (attempt 2/3): 'Input to ChatPromptTemplate is missing variables {\'\\n  "tasks"\'}.  Expected: [\'\\n  "tasks"\', \'requirement\'] Received: [\'requirement\']\nNote: if you intended {\n  "tasks"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n  "tasks"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-05-20 07:49:46,642 - utils.logger - ERROR - Traceback (most recent call last):
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\utils\tools_config.py", line 113, in requirement_breakdown
    response = agent_chain.invoke(prompt_input)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\base.py", line 3032, in invoke
    input = context.run(step.invoke, input, config, **kwargs)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 216, in invoke
    return self._call_with_config(
           ~~~~~~~~~~~~~~~~~~~~~~^
        self._format_prompt_with_error_handling,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
        serialized=self._serialized,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\base.py", line 1930, in _call_with_config
    context.run(
    ~~~~~~~~~~~^
        call_func_with_variable_args,  # type: ignore[arg-type]
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
        **kwargs,
        ^^^^^^^^^
    ),
    ^
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\config.py", line 428, in call_func_with_variable_args
    return func(input, **kwargs)  # type: ignore[call-arg]
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 189, in _format_prompt_with_error_handling
    _inner_input = self._validate_input(inner_input)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 183, in _validate_input
    raise KeyError(
        create_message(message=msg, error_code=ErrorCode.INVALID_PROMPT_INPUT)
    )
KeyError: 'Input to ChatPromptTemplate is missing variables {\'\\n  "tasks"\'}.  Expected: [\'\\n  "tasks"\', \'requirement\'] Received: [\'requirement\']\nNote: if you intended {\n  "tasks"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n  "tasks"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '

2025-05-20 07:49:46,643 - utils.logger - INFO - Using cached prompt template for prompts/task_agent_prompt_template_requirement_breakdown.txt
2025-05-20 07:49:46,644 - utils.logger - ERROR - Error in requirement_breakdown (attempt 3/3): 'Input to ChatPromptTemplate is missing variables {\'\\n  "tasks"\'}.  Expected: [\'\\n  "tasks"\', \'requirement\'] Received: [\'requirement\']\nNote: if you intended {\n  "tasks"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n  "tasks"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-05-20 07:49:46,645 - utils.logger - ERROR - Traceback (most recent call last):
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\utils\tools_config.py", line 113, in requirement_breakdown
    response = agent_chain.invoke(prompt_input)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\base.py", line 3032, in invoke
    input = context.run(step.invoke, input, config, **kwargs)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 216, in invoke
    return self._call_with_config(
           ~~~~~~~~~~~~~~~~~~~~~~^
        self._format_prompt_with_error_handling,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
        serialized=self._serialized,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\base.py", line 1930, in _call_with_config
    context.run(
    ~~~~~~~~~~~^
        call_func_with_variable_args,  # type: ignore[arg-type]
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
        **kwargs,
        ^^^^^^^^^
    ),
    ^
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\config.py", line 428, in call_func_with_variable_args
    return func(input, **kwargs)  # type: ignore[call-arg]
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 189, in _format_prompt_with_error_handling
    _inner_input = self._validate_input(inner_input)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 183, in _validate_input
    raise KeyError(
        create_message(message=msg, error_code=ErrorCode.INVALID_PROMPT_INPUT)
    )
KeyError: 'Input to ChatPromptTemplate is missing variables {\'\\n  "tasks"\'}.  Expected: [\'\\n  "tasks"\', \'requirement\'] Received: [\'requirement\']\nNote: if you intended {\n  "tasks"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n  "tasks"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '

2025-05-20 07:49:46,648 - utils.logger - INFO - Tool requirement_breakdown routed to deal_tasks based on config
2025-05-20 07:49:46,649 - utils.logger - INFO - Generating deal_tasks result
2025-05-20 07:49:46,649 - utils.logger - WARNING - task_breakdown_messages list is empty, defaulting to rewrite
2025-05-20 07:49:46,650 - utils.logger - INFO - Message has no content, skipping
2025-05-20 07:49:46,651 - utils.logger - INFO - Rewriting query
2025-05-20 07:49:46,651 - utils.logger - INFO - Using cached prompt template for prompts/prompt_template_rewrite.txt
2025-05-20 07:49:47,673 - utils.logger - INFO - Rewrite count: 3
2025-05-20 07:49:47,677 - utils.logger - INFO - Agent processing user query
2025-05-20 07:49:48,310 - utils.logger - INFO - Using cached prompt template for prompts/prompt_template_agent_new.txt
2025-05-20 07:49:49,533 - utils.logger - INFO - Calling tool: requirement_breakdown
2025-05-20 07:49:49,541 - utils.logger - INFO - Using cached prompt template for prompts/task_agent_prompt_template_requirement_breakdown.txt
2025-05-20 07:49:49,544 - utils.logger - ERROR - Error in requirement_breakdown (attempt 1/3): 'Input to ChatPromptTemplate is missing variables {\'\\n  "tasks"\'}.  Expected: [\'\\n  "tasks"\', \'requirement\'] Received: [\'requirement\']\nNote: if you intended {\n  "tasks"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n  "tasks"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-05-20 07:49:49,546 - utils.logger - ERROR - Traceback (most recent call last):
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\utils\tools_config.py", line 113, in requirement_breakdown
    response = agent_chain.invoke(prompt_input)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\base.py", line 3032, in invoke
    input = context.run(step.invoke, input, config, **kwargs)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 216, in invoke
    return self._call_with_config(
           ~~~~~~~~~~~~~~~~~~~~~~^
        self._format_prompt_with_error_handling,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
        serialized=self._serialized,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\base.py", line 1930, in _call_with_config
    context.run(
    ~~~~~~~~~~~^
        call_func_with_variable_args,  # type: ignore[arg-type]
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
        **kwargs,
        ^^^^^^^^^
    ),
    ^
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\config.py", line 428, in call_func_with_variable_args
    return func(input, **kwargs)  # type: ignore[call-arg]
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 189, in _format_prompt_with_error_handling
    _inner_input = self._validate_input(inner_input)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 183, in _validate_input
    raise KeyError(
        create_message(message=msg, error_code=ErrorCode.INVALID_PROMPT_INPUT)
    )
KeyError: 'Input to ChatPromptTemplate is missing variables {\'\\n  "tasks"\'}.  Expected: [\'\\n  "tasks"\', \'requirement\'] Received: [\'requirement\']\nNote: if you intended {\n  "tasks"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n  "tasks"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '

2025-05-20 07:49:49,547 - utils.logger - INFO - Using cached prompt template for prompts/task_agent_prompt_template_requirement_breakdown.txt
2025-05-20 07:49:49,549 - utils.logger - ERROR - Error in requirement_breakdown (attempt 2/3): 'Input to ChatPromptTemplate is missing variables {\'\\n  "tasks"\'}.  Expected: [\'\\n  "tasks"\', \'requirement\'] Received: [\'requirement\']\nNote: if you intended {\n  "tasks"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n  "tasks"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-05-20 07:49:49,550 - utils.logger - ERROR - Traceback (most recent call last):
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\utils\tools_config.py", line 113, in requirement_breakdown
    response = agent_chain.invoke(prompt_input)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\base.py", line 3032, in invoke
    input = context.run(step.invoke, input, config, **kwargs)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 216, in invoke
    return self._call_with_config(
           ~~~~~~~~~~~~~~~~~~~~~~^
        self._format_prompt_with_error_handling,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
        serialized=self._serialized,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\base.py", line 1930, in _call_with_config
    context.run(
    ~~~~~~~~~~~^
        call_func_with_variable_args,  # type: ignore[arg-type]
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
        **kwargs,
        ^^^^^^^^^
    ),
    ^
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\config.py", line 428, in call_func_with_variable_args
    return func(input, **kwargs)  # type: ignore[call-arg]
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 189, in _format_prompt_with_error_handling
    _inner_input = self._validate_input(inner_input)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 183, in _validate_input
    raise KeyError(
        create_message(message=msg, error_code=ErrorCode.INVALID_PROMPT_INPUT)
    )
KeyError: 'Input to ChatPromptTemplate is missing variables {\'\\n  "tasks"\'}.  Expected: [\'\\n  "tasks"\', \'requirement\'] Received: [\'requirement\']\nNote: if you intended {\n  "tasks"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n  "tasks"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '

2025-05-20 07:49:49,551 - utils.logger - INFO - Using cached prompt template for prompts/task_agent_prompt_template_requirement_breakdown.txt
2025-05-20 07:49:49,552 - utils.logger - ERROR - Error in requirement_breakdown (attempt 3/3): 'Input to ChatPromptTemplate is missing variables {\'\\n  "tasks"\'}.  Expected: [\'\\n  "tasks"\', \'requirement\'] Received: [\'requirement\']\nNote: if you intended {\n  "tasks"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n  "tasks"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-05-20 07:49:49,554 - utils.logger - ERROR - Traceback (most recent call last):
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\utils\tools_config.py", line 113, in requirement_breakdown
    response = agent_chain.invoke(prompt_input)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\base.py", line 3032, in invoke
    input = context.run(step.invoke, input, config, **kwargs)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 216, in invoke
    return self._call_with_config(
           ~~~~~~~~~~~~~~~~~~~~~~^
        self._format_prompt_with_error_handling,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
        serialized=self._serialized,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\base.py", line 1930, in _call_with_config
    context.run(
    ~~~~~~~~~~~^
        call_func_with_variable_args,  # type: ignore[arg-type]
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
        **kwargs,
        ^^^^^^^^^
    ),
    ^
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\config.py", line 428, in call_func_with_variable_args
    return func(input, **kwargs)  # type: ignore[call-arg]
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 189, in _format_prompt_with_error_handling
    _inner_input = self._validate_input(inner_input)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 183, in _validate_input
    raise KeyError(
        create_message(message=msg, error_code=ErrorCode.INVALID_PROMPT_INPUT)
    )
KeyError: 'Input to ChatPromptTemplate is missing variables {\'\\n  "tasks"\'}.  Expected: [\'\\n  "tasks"\', \'requirement\'] Received: [\'requirement\']\nNote: if you intended {\n  "tasks"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n  "tasks"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '

2025-05-20 07:49:49,555 - utils.logger - INFO - Tool requirement_breakdown routed to deal_tasks based on config
2025-05-20 07:49:49,556 - utils.logger - INFO - Generating deal_tasks result
2025-05-20 07:49:49,557 - utils.logger - WARNING - task_breakdown_messages list is empty, defaulting to rewrite
2025-05-20 07:49:49,557 - utils.logger - INFO - Message has no content, skipping
2025-05-20 07:49:49,558 - utils.logger - INFO - Rewriting query
2025-05-20 07:49:49,558 - utils.logger - INFO - Using cached prompt template for prompts/prompt_template_rewrite.txt
2025-05-20 07:49:50,593 - utils.logger - INFO - Rewrite count: 4
2025-05-20 07:49:50,596 - utils.logger - INFO - Agent processing user query
2025-05-20 07:49:51,353 - utils.logger - INFO - Using cached prompt template for prompts/prompt_template_agent_new.txt
2025-05-20 07:49:52,789 - utils.logger - INFO - Calling tool: requirement_breakdown
2025-05-20 07:49:52,794 - utils.logger - INFO - Using cached prompt template for prompts/task_agent_prompt_template_requirement_breakdown.txt
2025-05-20 07:49:52,796 - utils.logger - ERROR - Error in requirement_breakdown (attempt 1/3): 'Input to ChatPromptTemplate is missing variables {\'\\n  "tasks"\'}.  Expected: [\'\\n  "tasks"\', \'requirement\'] Received: [\'requirement\']\nNote: if you intended {\n  "tasks"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n  "tasks"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-05-20 07:49:52,797 - utils.logger - ERROR - Traceback (most recent call last):
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\utils\tools_config.py", line 113, in requirement_breakdown
    response = agent_chain.invoke(prompt_input)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\base.py", line 3032, in invoke
    input = context.run(step.invoke, input, config, **kwargs)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 216, in invoke
    return self._call_with_config(
           ~~~~~~~~~~~~~~~~~~~~~~^
        self._format_prompt_with_error_handling,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
        serialized=self._serialized,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\base.py", line 1930, in _call_with_config
    context.run(
    ~~~~~~~~~~~^
        call_func_with_variable_args,  # type: ignore[arg-type]
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
        **kwargs,
        ^^^^^^^^^
    ),
    ^
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\config.py", line 428, in call_func_with_variable_args
    return func(input, **kwargs)  # type: ignore[call-arg]
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 189, in _format_prompt_with_error_handling
    _inner_input = self._validate_input(inner_input)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 183, in _validate_input
    raise KeyError(
        create_message(message=msg, error_code=ErrorCode.INVALID_PROMPT_INPUT)
    )
KeyError: 'Input to ChatPromptTemplate is missing variables {\'\\n  "tasks"\'}.  Expected: [\'\\n  "tasks"\', \'requirement\'] Received: [\'requirement\']\nNote: if you intended {\n  "tasks"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n  "tasks"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '

2025-05-20 07:49:52,798 - utils.logger - INFO - Using cached prompt template for prompts/task_agent_prompt_template_requirement_breakdown.txt
2025-05-20 07:49:52,800 - utils.logger - ERROR - Error in requirement_breakdown (attempt 2/3): 'Input to ChatPromptTemplate is missing variables {\'\\n  "tasks"\'}.  Expected: [\'\\n  "tasks"\', \'requirement\'] Received: [\'requirement\']\nNote: if you intended {\n  "tasks"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n  "tasks"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-05-20 07:49:52,801 - utils.logger - ERROR - Traceback (most recent call last):
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\utils\tools_config.py", line 113, in requirement_breakdown
    response = agent_chain.invoke(prompt_input)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\base.py", line 3032, in invoke
    input = context.run(step.invoke, input, config, **kwargs)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 216, in invoke
    return self._call_with_config(
           ~~~~~~~~~~~~~~~~~~~~~~^
        self._format_prompt_with_error_handling,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
        serialized=self._serialized,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\base.py", line 1930, in _call_with_config
    context.run(
    ~~~~~~~~~~~^
        call_func_with_variable_args,  # type: ignore[arg-type]
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
        **kwargs,
        ^^^^^^^^^
    ),
    ^
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\config.py", line 428, in call_func_with_variable_args
    return func(input, **kwargs)  # type: ignore[call-arg]
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 189, in _format_prompt_with_error_handling
    _inner_input = self._validate_input(inner_input)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 183, in _validate_input
    raise KeyError(
        create_message(message=msg, error_code=ErrorCode.INVALID_PROMPT_INPUT)
    )
KeyError: 'Input to ChatPromptTemplate is missing variables {\'\\n  "tasks"\'}.  Expected: [\'\\n  "tasks"\', \'requirement\'] Received: [\'requirement\']\nNote: if you intended {\n  "tasks"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n  "tasks"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '

2025-05-20 07:49:52,805 - utils.logger - INFO - Using cached prompt template for prompts/task_agent_prompt_template_requirement_breakdown.txt
2025-05-20 07:49:52,806 - utils.logger - ERROR - Error in requirement_breakdown (attempt 3/3): 'Input to ChatPromptTemplate is missing variables {\'\\n  "tasks"\'}.  Expected: [\'\\n  "tasks"\', \'requirement\'] Received: [\'requirement\']\nNote: if you intended {\n  "tasks"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n  "tasks"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-05-20 07:49:52,808 - utils.logger - ERROR - Traceback (most recent call last):
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\utils\tools_config.py", line 113, in requirement_breakdown
    response = agent_chain.invoke(prompt_input)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\base.py", line 3032, in invoke
    input = context.run(step.invoke, input, config, **kwargs)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 216, in invoke
    return self._call_with_config(
           ~~~~~~~~~~~~~~~~~~~~~~^
        self._format_prompt_with_error_handling,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
        serialized=self._serialized,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\base.py", line 1930, in _call_with_config
    context.run(
    ~~~~~~~~~~~^
        call_func_with_variable_args,  # type: ignore[arg-type]
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
        **kwargs,
        ^^^^^^^^^
    ),
    ^
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\config.py", line 428, in call_func_with_variable_args
    return func(input, **kwargs)  # type: ignore[call-arg]
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 189, in _format_prompt_with_error_handling
    _inner_input = self._validate_input(inner_input)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 183, in _validate_input
    raise KeyError(
        create_message(message=msg, error_code=ErrorCode.INVALID_PROMPT_INPUT)
    )
KeyError: 'Input to ChatPromptTemplate is missing variables {\'\\n  "tasks"\'}.  Expected: [\'\\n  "tasks"\', \'requirement\'] Received: [\'requirement\']\nNote: if you intended {\n  "tasks"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n  "tasks"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '

2025-05-20 07:49:52,809 - utils.logger - INFO - Tool requirement_breakdown routed to deal_tasks based on config
2025-05-20 07:49:52,810 - utils.logger - INFO - Generating deal_tasks result
2025-05-20 07:49:52,810 - utils.logger - WARNING - task_breakdown_messages list is empty, defaulting to rewrite
2025-05-20 07:49:52,811 - utils.logger - INFO - Message has no content, skipping
2025-05-20 07:49:52,812 - utils.logger - INFO - Rewriting query
2025-05-20 07:49:52,812 - utils.logger - INFO - Using cached prompt template for prompts/prompt_template_rewrite.txt
2025-05-20 07:49:54,026 - utils.logger - INFO - Rewrite count: 5
2025-05-20 07:49:54,027 - utils.logger - INFO - Agent processing user query
2025-05-20 07:49:54,784 - utils.logger - INFO - Using cached prompt template for prompts/prompt_template_agent_new.txt
2025-05-20 07:49:56,059 - utils.logger - INFO - Calling tool: requirement_breakdown
2025-05-20 07:49:56,064 - utils.logger - INFO - Using cached prompt template for prompts/task_agent_prompt_template_requirement_breakdown.txt
2025-05-20 07:49:56,066 - utils.logger - ERROR - Error in requirement_breakdown (attempt 1/3): 'Input to ChatPromptTemplate is missing variables {\'\\n  "tasks"\'}.  Expected: [\'\\n  "tasks"\', \'requirement\'] Received: [\'requirement\']\nNote: if you intended {\n  "tasks"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n  "tasks"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-05-20 07:49:56,067 - utils.logger - ERROR - Traceback (most recent call last):
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\utils\tools_config.py", line 113, in requirement_breakdown
    response = agent_chain.invoke(prompt_input)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\base.py", line 3032, in invoke
    input = context.run(step.invoke, input, config, **kwargs)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 216, in invoke
    return self._call_with_config(
           ~~~~~~~~~~~~~~~~~~~~~~^
        self._format_prompt_with_error_handling,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
        serialized=self._serialized,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\base.py", line 1930, in _call_with_config
    context.run(
    ~~~~~~~~~~~^
        call_func_with_variable_args,  # type: ignore[arg-type]
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
        **kwargs,
        ^^^^^^^^^
    ),
    ^
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\config.py", line 428, in call_func_with_variable_args
    return func(input, **kwargs)  # type: ignore[call-arg]
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 189, in _format_prompt_with_error_handling
    _inner_input = self._validate_input(inner_input)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 183, in _validate_input
    raise KeyError(
        create_message(message=msg, error_code=ErrorCode.INVALID_PROMPT_INPUT)
    )
KeyError: 'Input to ChatPromptTemplate is missing variables {\'\\n  "tasks"\'}.  Expected: [\'\\n  "tasks"\', \'requirement\'] Received: [\'requirement\']\nNote: if you intended {\n  "tasks"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n  "tasks"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '

2025-05-20 07:49:56,069 - utils.logger - INFO - Using cached prompt template for prompts/task_agent_prompt_template_requirement_breakdown.txt
2025-05-20 07:49:56,070 - utils.logger - ERROR - Error in requirement_breakdown (attempt 2/3): 'Input to ChatPromptTemplate is missing variables {\'\\n  "tasks"\'}.  Expected: [\'\\n  "tasks"\', \'requirement\'] Received: [\'requirement\']\nNote: if you intended {\n  "tasks"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n  "tasks"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-05-20 07:49:56,071 - utils.logger - ERROR - Traceback (most recent call last):
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\utils\tools_config.py", line 113, in requirement_breakdown
    response = agent_chain.invoke(prompt_input)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\base.py", line 3032, in invoke
    input = context.run(step.invoke, input, config, **kwargs)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 216, in invoke
    return self._call_with_config(
           ~~~~~~~~~~~~~~~~~~~~~~^
        self._format_prompt_with_error_handling,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
        serialized=self._serialized,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\base.py", line 1930, in _call_with_config
    context.run(
    ~~~~~~~~~~~^
        call_func_with_variable_args,  # type: ignore[arg-type]
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
        **kwargs,
        ^^^^^^^^^
    ),
    ^
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\config.py", line 428, in call_func_with_variable_args
    return func(input, **kwargs)  # type: ignore[call-arg]
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 189, in _format_prompt_with_error_handling
    _inner_input = self._validate_input(inner_input)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 183, in _validate_input
    raise KeyError(
        create_message(message=msg, error_code=ErrorCode.INVALID_PROMPT_INPUT)
    )
KeyError: 'Input to ChatPromptTemplate is missing variables {\'\\n  "tasks"\'}.  Expected: [\'\\n  "tasks"\', \'requirement\'] Received: [\'requirement\']\nNote: if you intended {\n  "tasks"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n  "tasks"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '

2025-05-20 07:49:56,072 - utils.logger - INFO - Using cached prompt template for prompts/task_agent_prompt_template_requirement_breakdown.txt
2025-05-20 07:49:56,073 - utils.logger - ERROR - Error in requirement_breakdown (attempt 3/3): 'Input to ChatPromptTemplate is missing variables {\'\\n  "tasks"\'}.  Expected: [\'\\n  "tasks"\', \'requirement\'] Received: [\'requirement\']\nNote: if you intended {\n  "tasks"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n  "tasks"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-05-20 07:49:56,074 - utils.logger - ERROR - Traceback (most recent call last):
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\utils\tools_config.py", line 113, in requirement_breakdown
    response = agent_chain.invoke(prompt_input)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\base.py", line 3032, in invoke
    input = context.run(step.invoke, input, config, **kwargs)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 216, in invoke
    return self._call_with_config(
           ~~~~~~~~~~~~~~~~~~~~~~^
        self._format_prompt_with_error_handling,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
        serialized=self._serialized,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\base.py", line 1930, in _call_with_config
    context.run(
    ~~~~~~~~~~~^
        call_func_with_variable_args,  # type: ignore[arg-type]
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
        **kwargs,
        ^^^^^^^^^
    ),
    ^
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\config.py", line 428, in call_func_with_variable_args
    return func(input, **kwargs)  # type: ignore[call-arg]
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 189, in _format_prompt_with_error_handling
    _inner_input = self._validate_input(inner_input)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 183, in _validate_input
    raise KeyError(
        create_message(message=msg, error_code=ErrorCode.INVALID_PROMPT_INPUT)
    )
KeyError: 'Input to ChatPromptTemplate is missing variables {\'\\n  "tasks"\'}.  Expected: [\'\\n  "tasks"\', \'requirement\'] Received: [\'requirement\']\nNote: if you intended {\n  "tasks"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n  "tasks"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '

2025-05-20 07:49:56,075 - utils.logger - INFO - Tool requirement_breakdown routed to deal_tasks based on config
2025-05-20 07:49:56,076 - utils.logger - INFO - Generating deal_tasks result
2025-05-20 07:49:56,077 - utils.logger - WARNING - task_breakdown_messages list is empty, defaulting to rewrite
2025-05-20 07:49:56,078 - utils.logger - INFO - Message has no content, skipping
2025-05-20 07:49:56,078 - utils.logger - INFO - Rewriting query
2025-05-20 07:49:56,079 - utils.logger - INFO - Using cached prompt template for prompts/prompt_template_rewrite.txt
2025-05-20 07:49:57,233 - utils.logger - INFO - Rewrite count: 6
2025-05-20 07:49:57,234 - utils.logger - INFO - Agent processing user query
2025-05-20 07:49:57,934 - utils.logger - INFO - Using cached prompt template for prompts/prompt_template_agent_new.txt
2025-05-20 07:49:59,239 - utils.logger - INFO - Calling tool: requirement_breakdown
2025-05-20 07:49:59,241 - utils.logger - ERROR - Error processing response: Recursion limit of 25 reached without hitting a stop condition. You can increase the limit by setting the `recursion_limit` config key.
For troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/GRAPH_RECURSION_LIMIT
2025-05-20 07:50:07,323 - utils.logger - INFO - Database connection pool closed
2025-05-20 07:50:44,451 - utils.logger - DEBUG - Tool 'requirement_breakdown' routed to 'deal_tasks' (task breakdown tool)
2025-05-20 07:50:44,452 - utils.logger - INFO - Initialized ToolConfig with tools: {'requirement_breakdown'}, routing: {'requirement_breakdown': 'deal_tasks'}
2025-05-20 07:50:44,453 - utils.logger - INFO - Database connection pool initialized
2025-05-20 07:50:44,454 - utils.logger - DEBUG - Database connection pool initialized
2025-05-20 07:50:44,455 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-20 07:50:44,475 - utils.logger - INFO - Connection db_connection_pool status: OK, test connection successful
2025-05-20 07:50:44,987 - utils.logger - INFO - Graph visualization saved as graph.png
2025-05-20 07:50:48,163 - utils.logger - INFO - Agent processing user query
2025-05-20 07:50:50,677 - utils.logger - INFO - Loading and caching prompt template from prompts/prompt_template_agent_new.txt
2025-05-20 07:50:52,490 - utils.logger - INFO - Calling tool: requirement_breakdown
2025-05-20 07:50:52,493 - utils.logger - INFO - Loading and caching prompt template from prompts/task_agent_prompt_template_requirement_breakdown.txt
2025-05-20 07:50:52,494 - utils.logger - ERROR - Error in requirement_breakdown (attempt 1/3): 'Input to ChatPromptTemplate is missing variables {\'\\n  "tasks"\'}.  Expected: [\'\\n  "tasks"\', \'requirement\'] Received: [\'requirement\']\nNote: if you intended {\n  "tasks"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n  "tasks"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-05-20 07:50:52,497 - utils.logger - ERROR - Traceback (most recent call last):
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\utils\tools_config.py", line 113, in requirement_breakdown
    response = agent_chain.invoke(prompt_input)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\base.py", line 3032, in invoke
    input = context.run(step.invoke, input, config, **kwargs)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 216, in invoke
    return self._call_with_config(
           ~~~~~~~~~~~~~~~~~~~~~~^
        self._format_prompt_with_error_handling,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
        serialized=self._serialized,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\base.py", line 1930, in _call_with_config
    context.run(
    ~~~~~~~~~~~^
        call_func_with_variable_args,  # type: ignore[arg-type]
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
        **kwargs,
        ^^^^^^^^^
    ),
    ^
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\config.py", line 428, in call_func_with_variable_args
    return func(input, **kwargs)  # type: ignore[call-arg]
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 189, in _format_prompt_with_error_handling
    _inner_input = self._validate_input(inner_input)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 183, in _validate_input
    raise KeyError(
        create_message(message=msg, error_code=ErrorCode.INVALID_PROMPT_INPUT)
    )
KeyError: 'Input to ChatPromptTemplate is missing variables {\'\\n  "tasks"\'}.  Expected: [\'\\n  "tasks"\', \'requirement\'] Received: [\'requirement\']\nNote: if you intended {\n  "tasks"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n  "tasks"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '

2025-05-20 07:50:52,497 - utils.logger - INFO - Using cached prompt template for prompts/task_agent_prompt_template_requirement_breakdown.txt
2025-05-20 07:50:52,498 - utils.logger - ERROR - Error in requirement_breakdown (attempt 2/3): 'Input to ChatPromptTemplate is missing variables {\'\\n  "tasks"\'}.  Expected: [\'\\n  "tasks"\', \'requirement\'] Received: [\'requirement\']\nNote: if you intended {\n  "tasks"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n  "tasks"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-05-20 07:50:52,499 - utils.logger - ERROR - Traceback (most recent call last):
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\utils\tools_config.py", line 113, in requirement_breakdown
    response = agent_chain.invoke(prompt_input)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\base.py", line 3032, in invoke
    input = context.run(step.invoke, input, config, **kwargs)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 216, in invoke
    return self._call_with_config(
           ~~~~~~~~~~~~~~~~~~~~~~^
        self._format_prompt_with_error_handling,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
        serialized=self._serialized,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\base.py", line 1930, in _call_with_config
    context.run(
    ~~~~~~~~~~~^
        call_func_with_variable_args,  # type: ignore[arg-type]
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
        **kwargs,
        ^^^^^^^^^
    ),
    ^
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\config.py", line 428, in call_func_with_variable_args
    return func(input, **kwargs)  # type: ignore[call-arg]
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 189, in _format_prompt_with_error_handling
    _inner_input = self._validate_input(inner_input)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 183, in _validate_input
    raise KeyError(
        create_message(message=msg, error_code=ErrorCode.INVALID_PROMPT_INPUT)
    )
KeyError: 'Input to ChatPromptTemplate is missing variables {\'\\n  "tasks"\'}.  Expected: [\'\\n  "tasks"\', \'requirement\'] Received: [\'requirement\']\nNote: if you intended {\n  "tasks"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n  "tasks"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '

2025-05-20 07:50:52,501 - utils.logger - INFO - Using cached prompt template for prompts/task_agent_prompt_template_requirement_breakdown.txt
2025-05-20 07:50:52,502 - utils.logger - ERROR - Error in requirement_breakdown (attempt 3/3): 'Input to ChatPromptTemplate is missing variables {\'\\n  "tasks"\'}.  Expected: [\'\\n  "tasks"\', \'requirement\'] Received: [\'requirement\']\nNote: if you intended {\n  "tasks"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n  "tasks"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-05-20 07:50:52,503 - utils.logger - ERROR - Traceback (most recent call last):
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\utils\tools_config.py", line 113, in requirement_breakdown
    response = agent_chain.invoke(prompt_input)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\base.py", line 3032, in invoke
    input = context.run(step.invoke, input, config, **kwargs)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 216, in invoke
    return self._call_with_config(
           ~~~~~~~~~~~~~~~~~~~~~~^
        self._format_prompt_with_error_handling,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
        serialized=self._serialized,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\base.py", line 1930, in _call_with_config
    context.run(
    ~~~~~~~~~~~^
        call_func_with_variable_args,  # type: ignore[arg-type]
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
        **kwargs,
        ^^^^^^^^^
    ),
    ^
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\config.py", line 428, in call_func_with_variable_args
    return func(input, **kwargs)  # type: ignore[call-arg]
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 189, in _format_prompt_with_error_handling
    _inner_input = self._validate_input(inner_input)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 183, in _validate_input
    raise KeyError(
        create_message(message=msg, error_code=ErrorCode.INVALID_PROMPT_INPUT)
    )
KeyError: 'Input to ChatPromptTemplate is missing variables {\'\\n  "tasks"\'}.  Expected: [\'\\n  "tasks"\', \'requirement\'] Received: [\'requirement\']\nNote: if you intended {\n  "tasks"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n  "tasks"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '

2025-05-20 07:50:52,505 - utils.logger - INFO - Tool requirement_breakdown routed to deal_tasks based on config
2025-05-20 07:50:52,506 - utils.logger - INFO - Generating deal_tasks result
2025-05-20 07:50:52,507 - utils.logger - WARNING - task_breakdown_messages list is empty, defaulting to rewrite
2025-05-20 07:50:52,508 - utils.logger - INFO - Message has no content, skipping
2025-05-20 07:50:52,508 - utils.logger - INFO - Rewriting query
2025-05-20 07:50:52,509 - utils.logger - INFO - Loading and caching prompt template from prompts/prompt_template_rewrite.txt
2025-05-20 07:50:54,230 - utils.logger - INFO - Rewrite count: 1
2025-05-20 07:50:54,234 - utils.logger - INFO - Agent processing user query
2025-05-20 07:50:55,002 - utils.logger - INFO - Using cached prompt template for prompts/prompt_template_agent_new.txt
2025-05-20 07:50:56,560 - utils.logger - INFO - Calling tool: requirement_breakdown
2025-05-20 07:50:56,569 - utils.logger - INFO - Using cached prompt template for prompts/task_agent_prompt_template_requirement_breakdown.txt
2025-05-20 07:50:56,571 - utils.logger - ERROR - Error in requirement_breakdown (attempt 1/3): 'Input to ChatPromptTemplate is missing variables {\'\\n  "tasks"\'}.  Expected: [\'\\n  "tasks"\', \'requirement\'] Received: [\'requirement\']\nNote: if you intended {\n  "tasks"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n  "tasks"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-05-20 07:50:56,574 - utils.logger - ERROR - Traceback (most recent call last):
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\utils\tools_config.py", line 113, in requirement_breakdown
    response = agent_chain.invoke(prompt_input)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\base.py", line 3032, in invoke
    input = context.run(step.invoke, input, config, **kwargs)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 216, in invoke
    return self._call_with_config(
           ~~~~~~~~~~~~~~~~~~~~~~^
        self._format_prompt_with_error_handling,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
        serialized=self._serialized,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\base.py", line 1930, in _call_with_config
    context.run(
    ~~~~~~~~~~~^
        call_func_with_variable_args,  # type: ignore[arg-type]
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
        **kwargs,
        ^^^^^^^^^
    ),
    ^
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\config.py", line 428, in call_func_with_variable_args
    return func(input, **kwargs)  # type: ignore[call-arg]
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 189, in _format_prompt_with_error_handling
    _inner_input = self._validate_input(inner_input)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 183, in _validate_input
    raise KeyError(
        create_message(message=msg, error_code=ErrorCode.INVALID_PROMPT_INPUT)
    )
KeyError: 'Input to ChatPromptTemplate is missing variables {\'\\n  "tasks"\'}.  Expected: [\'\\n  "tasks"\', \'requirement\'] Received: [\'requirement\']\nNote: if you intended {\n  "tasks"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n  "tasks"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '

2025-05-20 07:50:56,575 - utils.logger - INFO - Using cached prompt template for prompts/task_agent_prompt_template_requirement_breakdown.txt
2025-05-20 07:50:56,575 - utils.logger - ERROR - Error in requirement_breakdown (attempt 2/3): 'Input to ChatPromptTemplate is missing variables {\'\\n  "tasks"\'}.  Expected: [\'\\n  "tasks"\', \'requirement\'] Received: [\'requirement\']\nNote: if you intended {\n  "tasks"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n  "tasks"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-05-20 07:50:56,577 - utils.logger - ERROR - Traceback (most recent call last):
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\utils\tools_config.py", line 113, in requirement_breakdown
    response = agent_chain.invoke(prompt_input)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\base.py", line 3032, in invoke
    input = context.run(step.invoke, input, config, **kwargs)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 216, in invoke
    return self._call_with_config(
           ~~~~~~~~~~~~~~~~~~~~~~^
        self._format_prompt_with_error_handling,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
        serialized=self._serialized,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\base.py", line 1930, in _call_with_config
    context.run(
    ~~~~~~~~~~~^
        call_func_with_variable_args,  # type: ignore[arg-type]
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
        **kwargs,
        ^^^^^^^^^
    ),
    ^
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\config.py", line 428, in call_func_with_variable_args
    return func(input, **kwargs)  # type: ignore[call-arg]
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 189, in _format_prompt_with_error_handling
    _inner_input = self._validate_input(inner_input)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 183, in _validate_input
    raise KeyError(
        create_message(message=msg, error_code=ErrorCode.INVALID_PROMPT_INPUT)
    )
KeyError: 'Input to ChatPromptTemplate is missing variables {\'\\n  "tasks"\'}.  Expected: [\'\\n  "tasks"\', \'requirement\'] Received: [\'requirement\']\nNote: if you intended {\n  "tasks"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n  "tasks"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '

2025-05-20 07:50:56,580 - utils.logger - INFO - Using cached prompt template for prompts/task_agent_prompt_template_requirement_breakdown.txt
2025-05-20 07:50:56,581 - utils.logger - ERROR - Error in requirement_breakdown (attempt 3/3): 'Input to ChatPromptTemplate is missing variables {\'\\n  "tasks"\'}.  Expected: [\'\\n  "tasks"\', \'requirement\'] Received: [\'requirement\']\nNote: if you intended {\n  "tasks"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n  "tasks"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-05-20 07:50:56,583 - utils.logger - ERROR - Traceback (most recent call last):
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\utils\tools_config.py", line 113, in requirement_breakdown
    response = agent_chain.invoke(prompt_input)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\base.py", line 3032, in invoke
    input = context.run(step.invoke, input, config, **kwargs)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 216, in invoke
    return self._call_with_config(
           ~~~~~~~~~~~~~~~~~~~~~~^
        self._format_prompt_with_error_handling,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
        serialized=self._serialized,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\base.py", line 1930, in _call_with_config
    context.run(
    ~~~~~~~~~~~^
        call_func_with_variable_args,  # type: ignore[arg-type]
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
        **kwargs,
        ^^^^^^^^^
    ),
    ^
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\config.py", line 428, in call_func_with_variable_args
    return func(input, **kwargs)  # type: ignore[call-arg]
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 189, in _format_prompt_with_error_handling
    _inner_input = self._validate_input(inner_input)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 183, in _validate_input
    raise KeyError(
        create_message(message=msg, error_code=ErrorCode.INVALID_PROMPT_INPUT)
    )
KeyError: 'Input to ChatPromptTemplate is missing variables {\'\\n  "tasks"\'}.  Expected: [\'\\n  "tasks"\', \'requirement\'] Received: [\'requirement\']\nNote: if you intended {\n  "tasks"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n  "tasks"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '

2025-05-20 07:50:56,584 - utils.logger - INFO - Tool requirement_breakdown routed to deal_tasks based on config
2025-05-20 07:50:56,585 - utils.logger - INFO - Generating deal_tasks result
2025-05-20 07:50:56,586 - utils.logger - WARNING - task_breakdown_messages list is empty, defaulting to rewrite
2025-05-20 07:50:56,586 - utils.logger - INFO - Message has no content, skipping
2025-05-20 07:50:56,587 - utils.logger - INFO - Rewriting query
2025-05-20 07:50:56,587 - utils.logger - INFO - Using cached prompt template for prompts/prompt_template_rewrite.txt
2025-05-20 07:50:57,899 - utils.logger - INFO - Rewrite count: 2
2025-05-20 07:50:57,904 - utils.logger - INFO - Agent processing user query
2025-05-20 07:50:59,138 - utils.logger - INFO - Using cached prompt template for prompts/prompt_template_agent_new.txt
2025-05-20 07:51:00,380 - utils.logger - INFO - Calling tool: requirement_breakdown
2025-05-20 07:51:00,385 - utils.logger - INFO - Using cached prompt template for prompts/task_agent_prompt_template_requirement_breakdown.txt
2025-05-20 07:51:00,386 - utils.logger - ERROR - Error in requirement_breakdown (attempt 1/3): 'Input to ChatPromptTemplate is missing variables {\'\\n  "tasks"\'}.  Expected: [\'\\n  "tasks"\', \'requirement\'] Received: [\'requirement\']\nNote: if you intended {\n  "tasks"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n  "tasks"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-05-20 07:51:00,387 - utils.logger - ERROR - Traceback (most recent call last):
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\utils\tools_config.py", line 113, in requirement_breakdown
    response = agent_chain.invoke(prompt_input)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\base.py", line 3032, in invoke
    input = context.run(step.invoke, input, config, **kwargs)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 216, in invoke
    return self._call_with_config(
           ~~~~~~~~~~~~~~~~~~~~~~^
        self._format_prompt_with_error_handling,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
        serialized=self._serialized,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\base.py", line 1930, in _call_with_config
    context.run(
    ~~~~~~~~~~~^
        call_func_with_variable_args,  # type: ignore[arg-type]
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
        **kwargs,
        ^^^^^^^^^
    ),
    ^
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\config.py", line 428, in call_func_with_variable_args
    return func(input, **kwargs)  # type: ignore[call-arg]
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 189, in _format_prompt_with_error_handling
    _inner_input = self._validate_input(inner_input)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 183, in _validate_input
    raise KeyError(
        create_message(message=msg, error_code=ErrorCode.INVALID_PROMPT_INPUT)
    )
KeyError: 'Input to ChatPromptTemplate is missing variables {\'\\n  "tasks"\'}.  Expected: [\'\\n  "tasks"\', \'requirement\'] Received: [\'requirement\']\nNote: if you intended {\n  "tasks"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n  "tasks"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '

2025-05-20 07:51:00,388 - utils.logger - INFO - Using cached prompt template for prompts/task_agent_prompt_template_requirement_breakdown.txt
2025-05-20 07:51:00,389 - utils.logger - ERROR - Error in requirement_breakdown (attempt 2/3): 'Input to ChatPromptTemplate is missing variables {\'\\n  "tasks"\'}.  Expected: [\'\\n  "tasks"\', \'requirement\'] Received: [\'requirement\']\nNote: if you intended {\n  "tasks"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n  "tasks"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-05-20 07:51:00,390 - utils.logger - ERROR - Traceback (most recent call last):
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\utils\tools_config.py", line 113, in requirement_breakdown
    response = agent_chain.invoke(prompt_input)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\base.py", line 3032, in invoke
    input = context.run(step.invoke, input, config, **kwargs)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 216, in invoke
    return self._call_with_config(
           ~~~~~~~~~~~~~~~~~~~~~~^
        self._format_prompt_with_error_handling,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
        serialized=self._serialized,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\base.py", line 1930, in _call_with_config
    context.run(
    ~~~~~~~~~~~^
        call_func_with_variable_args,  # type: ignore[arg-type]
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
        **kwargs,
        ^^^^^^^^^
    ),
    ^
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\config.py", line 428, in call_func_with_variable_args
    return func(input, **kwargs)  # type: ignore[call-arg]
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 189, in _format_prompt_with_error_handling
    _inner_input = self._validate_input(inner_input)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 183, in _validate_input
    raise KeyError(
        create_message(message=msg, error_code=ErrorCode.INVALID_PROMPT_INPUT)
    )
KeyError: 'Input to ChatPromptTemplate is missing variables {\'\\n  "tasks"\'}.  Expected: [\'\\n  "tasks"\', \'requirement\'] Received: [\'requirement\']\nNote: if you intended {\n  "tasks"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n  "tasks"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '

2025-05-20 07:51:00,391 - utils.logger - INFO - Using cached prompt template for prompts/task_agent_prompt_template_requirement_breakdown.txt
2025-05-20 07:51:00,392 - utils.logger - ERROR - Error in requirement_breakdown (attempt 3/3): 'Input to ChatPromptTemplate is missing variables {\'\\n  "tasks"\'}.  Expected: [\'\\n  "tasks"\', \'requirement\'] Received: [\'requirement\']\nNote: if you intended {\n  "tasks"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n  "tasks"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-05-20 07:51:00,393 - utils.logger - ERROR - Traceback (most recent call last):
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\utils\tools_config.py", line 113, in requirement_breakdown
    response = agent_chain.invoke(prompt_input)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\base.py", line 3032, in invoke
    input = context.run(step.invoke, input, config, **kwargs)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 216, in invoke
    return self._call_with_config(
           ~~~~~~~~~~~~~~~~~~~~~~^
        self._format_prompt_with_error_handling,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
        serialized=self._serialized,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\base.py", line 1930, in _call_with_config
    context.run(
    ~~~~~~~~~~~^
        call_func_with_variable_args,  # type: ignore[arg-type]
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
        **kwargs,
        ^^^^^^^^^
    ),
    ^
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\config.py", line 428, in call_func_with_variable_args
    return func(input, **kwargs)  # type: ignore[call-arg]
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 189, in _format_prompt_with_error_handling
    _inner_input = self._validate_input(inner_input)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 183, in _validate_input
    raise KeyError(
        create_message(message=msg, error_code=ErrorCode.INVALID_PROMPT_INPUT)
    )
KeyError: 'Input to ChatPromptTemplate is missing variables {\'\\n  "tasks"\'}.  Expected: [\'\\n  "tasks"\', \'requirement\'] Received: [\'requirement\']\nNote: if you intended {\n  "tasks"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n  "tasks"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '

2025-05-20 07:51:00,395 - utils.logger - INFO - Tool requirement_breakdown routed to deal_tasks based on config
2025-05-20 07:51:00,396 - utils.logger - INFO - Generating deal_tasks result
2025-05-20 07:51:00,397 - utils.logger - WARNING - task_breakdown_messages list is empty, defaulting to rewrite
2025-05-20 07:51:00,398 - utils.logger - INFO - Message has no content, skipping
2025-05-20 07:51:00,399 - utils.logger - INFO - Rewriting query
2025-05-20 07:51:00,399 - utils.logger - INFO - Using cached prompt template for prompts/prompt_template_rewrite.txt
2025-05-20 07:51:02,730 - utils.logger - INFO - Rewrite count: 3
2025-05-20 07:51:02,735 - utils.logger - INFO - Agent processing user query
2025-05-20 07:51:03,508 - utils.logger - INFO - Using cached prompt template for prompts/prompt_template_agent_new.txt
2025-05-20 07:51:06,125 - utils.logger - INFO - Calling tool: requirement_breakdown
2025-05-20 07:51:06,129 - utils.logger - INFO - Using cached prompt template for prompts/task_agent_prompt_template_requirement_breakdown.txt
2025-05-20 07:51:06,131 - utils.logger - ERROR - Error in requirement_breakdown (attempt 1/3): 'Input to ChatPromptTemplate is missing variables {\'\\n  "tasks"\'}.  Expected: [\'\\n  "tasks"\', \'requirement\'] Received: [\'requirement\']\nNote: if you intended {\n  "tasks"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n  "tasks"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-05-20 07:51:06,133 - utils.logger - ERROR - Traceback (most recent call last):
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\utils\tools_config.py", line 113, in requirement_breakdown
    response = agent_chain.invoke(prompt_input)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\base.py", line 3032, in invoke
    input = context.run(step.invoke, input, config, **kwargs)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 216, in invoke
    return self._call_with_config(
           ~~~~~~~~~~~~~~~~~~~~~~^
        self._format_prompt_with_error_handling,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
        serialized=self._serialized,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\base.py", line 1930, in _call_with_config
    context.run(
    ~~~~~~~~~~~^
        call_func_with_variable_args,  # type: ignore[arg-type]
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
        **kwargs,
        ^^^^^^^^^
    ),
    ^
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\config.py", line 428, in call_func_with_variable_args
    return func(input, **kwargs)  # type: ignore[call-arg]
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 189, in _format_prompt_with_error_handling
    _inner_input = self._validate_input(inner_input)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 183, in _validate_input
    raise KeyError(
        create_message(message=msg, error_code=ErrorCode.INVALID_PROMPT_INPUT)
    )
KeyError: 'Input to ChatPromptTemplate is missing variables {\'\\n  "tasks"\'}.  Expected: [\'\\n  "tasks"\', \'requirement\'] Received: [\'requirement\']\nNote: if you intended {\n  "tasks"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n  "tasks"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '

2025-05-20 07:51:06,134 - utils.logger - INFO - Using cached prompt template for prompts/task_agent_prompt_template_requirement_breakdown.txt
2025-05-20 07:51:06,135 - utils.logger - ERROR - Error in requirement_breakdown (attempt 2/3): 'Input to ChatPromptTemplate is missing variables {\'\\n  "tasks"\'}.  Expected: [\'\\n  "tasks"\', \'requirement\'] Received: [\'requirement\']\nNote: if you intended {\n  "tasks"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n  "tasks"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-05-20 07:51:06,137 - utils.logger - ERROR - Traceback (most recent call last):
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\utils\tools_config.py", line 113, in requirement_breakdown
    response = agent_chain.invoke(prompt_input)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\base.py", line 3032, in invoke
    input = context.run(step.invoke, input, config, **kwargs)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 216, in invoke
    return self._call_with_config(
           ~~~~~~~~~~~~~~~~~~~~~~^
        self._format_prompt_with_error_handling,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
        serialized=self._serialized,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\base.py", line 1930, in _call_with_config
    context.run(
    ~~~~~~~~~~~^
        call_func_with_variable_args,  # type: ignore[arg-type]
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
        **kwargs,
        ^^^^^^^^^
    ),
    ^
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\config.py", line 428, in call_func_with_variable_args
    return func(input, **kwargs)  # type: ignore[call-arg]
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 189, in _format_prompt_with_error_handling
    _inner_input = self._validate_input(inner_input)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 183, in _validate_input
    raise KeyError(
        create_message(message=msg, error_code=ErrorCode.INVALID_PROMPT_INPUT)
    )
KeyError: 'Input to ChatPromptTemplate is missing variables {\'\\n  "tasks"\'}.  Expected: [\'\\n  "tasks"\', \'requirement\'] Received: [\'requirement\']\nNote: if you intended {\n  "tasks"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n  "tasks"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '

2025-05-20 07:51:06,139 - utils.logger - INFO - Using cached prompt template for prompts/task_agent_prompt_template_requirement_breakdown.txt
2025-05-20 07:51:06,140 - utils.logger - ERROR - Error in requirement_breakdown (attempt 3/3): 'Input to ChatPromptTemplate is missing variables {\'\\n  "tasks"\'}.  Expected: [\'\\n  "tasks"\', \'requirement\'] Received: [\'requirement\']\nNote: if you intended {\n  "tasks"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n  "tasks"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-05-20 07:51:06,142 - utils.logger - ERROR - Traceback (most recent call last):
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\utils\tools_config.py", line 113, in requirement_breakdown
    response = agent_chain.invoke(prompt_input)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\base.py", line 3032, in invoke
    input = context.run(step.invoke, input, config, **kwargs)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 216, in invoke
    return self._call_with_config(
           ~~~~~~~~~~~~~~~~~~~~~~^
        self._format_prompt_with_error_handling,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
        serialized=self._serialized,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\base.py", line 1930, in _call_with_config
    context.run(
    ~~~~~~~~~~~^
        call_func_with_variable_args,  # type: ignore[arg-type]
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
        **kwargs,
        ^^^^^^^^^
    ),
    ^
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\config.py", line 428, in call_func_with_variable_args
    return func(input, **kwargs)  # type: ignore[call-arg]
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 189, in _format_prompt_with_error_handling
    _inner_input = self._validate_input(inner_input)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 183, in _validate_input
    raise KeyError(
        create_message(message=msg, error_code=ErrorCode.INVALID_PROMPT_INPUT)
    )
KeyError: 'Input to ChatPromptTemplate is missing variables {\'\\n  "tasks"\'}.  Expected: [\'\\n  "tasks"\', \'requirement\'] Received: [\'requirement\']\nNote: if you intended {\n  "tasks"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n  "tasks"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '

2025-05-20 07:51:06,143 - utils.logger - INFO - Tool requirement_breakdown routed to deal_tasks based on config
2025-05-20 07:51:06,144 - utils.logger - INFO - Generating deal_tasks result
2025-05-20 07:51:06,145 - utils.logger - WARNING - task_breakdown_messages list is empty, defaulting to rewrite
2025-05-20 07:51:06,145 - utils.logger - INFO - Message has no content, skipping
2025-05-20 07:51:06,146 - utils.logger - INFO - Rewriting query
2025-05-20 07:51:06,146 - utils.logger - INFO - Using cached prompt template for prompts/prompt_template_rewrite.txt
2025-05-20 07:51:07,508 - utils.logger - INFO - Rewrite count: 4
2025-05-20 07:51:07,510 - utils.logger - INFO - Agent processing user query
2025-05-20 07:51:08,860 - utils.logger - INFO - Using cached prompt template for prompts/prompt_template_agent_new.txt
2025-05-20 07:51:10,257 - utils.logger - INFO - Calling tool: requirement_breakdown
2025-05-20 07:51:10,265 - utils.logger - INFO - Using cached prompt template for prompts/task_agent_prompt_template_requirement_breakdown.txt
2025-05-20 07:51:10,268 - utils.logger - ERROR - Error in requirement_breakdown (attempt 1/3): 'Input to ChatPromptTemplate is missing variables {\'\\n  "tasks"\'}.  Expected: [\'\\n  "tasks"\', \'requirement\'] Received: [\'requirement\']\nNote: if you intended {\n  "tasks"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n  "tasks"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-05-20 07:51:10,270 - utils.logger - ERROR - Traceback (most recent call last):
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\utils\tools_config.py", line 113, in requirement_breakdown
    response = agent_chain.invoke(prompt_input)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\base.py", line 3032, in invoke
    input = context.run(step.invoke, input, config, **kwargs)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 216, in invoke
    return self._call_with_config(
           ~~~~~~~~~~~~~~~~~~~~~~^
        self._format_prompt_with_error_handling,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
        serialized=self._serialized,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\base.py", line 1930, in _call_with_config
    context.run(
    ~~~~~~~~~~~^
        call_func_with_variable_args,  # type: ignore[arg-type]
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
        **kwargs,
        ^^^^^^^^^
    ),
    ^
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\config.py", line 428, in call_func_with_variable_args
    return func(input, **kwargs)  # type: ignore[call-arg]
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 189, in _format_prompt_with_error_handling
    _inner_input = self._validate_input(inner_input)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 183, in _validate_input
    raise KeyError(
        create_message(message=msg, error_code=ErrorCode.INVALID_PROMPT_INPUT)
    )
KeyError: 'Input to ChatPromptTemplate is missing variables {\'\\n  "tasks"\'}.  Expected: [\'\\n  "tasks"\', \'requirement\'] Received: [\'requirement\']\nNote: if you intended {\n  "tasks"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n  "tasks"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '

2025-05-20 07:51:10,271 - utils.logger - INFO - Using cached prompt template for prompts/task_agent_prompt_template_requirement_breakdown.txt
2025-05-20 07:51:10,272 - utils.logger - ERROR - Error in requirement_breakdown (attempt 2/3): 'Input to ChatPromptTemplate is missing variables {\'\\n  "tasks"\'}.  Expected: [\'\\n  "tasks"\', \'requirement\'] Received: [\'requirement\']\nNote: if you intended {\n  "tasks"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n  "tasks"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-05-20 07:51:10,274 - utils.logger - ERROR - Traceback (most recent call last):
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\utils\tools_config.py", line 113, in requirement_breakdown
    response = agent_chain.invoke(prompt_input)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\base.py", line 3032, in invoke
    input = context.run(step.invoke, input, config, **kwargs)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 216, in invoke
    return self._call_with_config(
           ~~~~~~~~~~~~~~~~~~~~~~^
        self._format_prompt_with_error_handling,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
        serialized=self._serialized,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\base.py", line 1930, in _call_with_config
    context.run(
    ~~~~~~~~~~~^
        call_func_with_variable_args,  # type: ignore[arg-type]
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
        **kwargs,
        ^^^^^^^^^
    ),
    ^
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\config.py", line 428, in call_func_with_variable_args
    return func(input, **kwargs)  # type: ignore[call-arg]
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 189, in _format_prompt_with_error_handling
    _inner_input = self._validate_input(inner_input)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 183, in _validate_input
    raise KeyError(
        create_message(message=msg, error_code=ErrorCode.INVALID_PROMPT_INPUT)
    )
KeyError: 'Input to ChatPromptTemplate is missing variables {\'\\n  "tasks"\'}.  Expected: [\'\\n  "tasks"\', \'requirement\'] Received: [\'requirement\']\nNote: if you intended {\n  "tasks"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n  "tasks"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '

2025-05-20 07:51:10,275 - utils.logger - INFO - Using cached prompt template for prompts/task_agent_prompt_template_requirement_breakdown.txt
2025-05-20 07:51:10,276 - utils.logger - ERROR - Error in requirement_breakdown (attempt 3/3): 'Input to ChatPromptTemplate is missing variables {\'\\n  "tasks"\'}.  Expected: [\'\\n  "tasks"\', \'requirement\'] Received: [\'requirement\']\nNote: if you intended {\n  "tasks"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n  "tasks"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-05-20 07:51:10,278 - utils.logger - ERROR - Traceback (most recent call last):
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\utils\tools_config.py", line 113, in requirement_breakdown
    response = agent_chain.invoke(prompt_input)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\base.py", line 3032, in invoke
    input = context.run(step.invoke, input, config, **kwargs)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 216, in invoke
    return self._call_with_config(
           ~~~~~~~~~~~~~~~~~~~~~~^
        self._format_prompt_with_error_handling,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
        serialized=self._serialized,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\base.py", line 1930, in _call_with_config
    context.run(
    ~~~~~~~~~~~^
        call_func_with_variable_args,  # type: ignore[arg-type]
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
        **kwargs,
        ^^^^^^^^^
    ),
    ^
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\config.py", line 428, in call_func_with_variable_args
    return func(input, **kwargs)  # type: ignore[call-arg]
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 189, in _format_prompt_with_error_handling
    _inner_input = self._validate_input(inner_input)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 183, in _validate_input
    raise KeyError(
        create_message(message=msg, error_code=ErrorCode.INVALID_PROMPT_INPUT)
    )
KeyError: 'Input to ChatPromptTemplate is missing variables {\'\\n  "tasks"\'}.  Expected: [\'\\n  "tasks"\', \'requirement\'] Received: [\'requirement\']\nNote: if you intended {\n  "tasks"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n  "tasks"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '

2025-05-20 07:51:10,279 - utils.logger - INFO - Tool requirement_breakdown routed to deal_tasks based on config
2025-05-20 07:51:10,280 - utils.logger - INFO - Generating deal_tasks result
2025-05-20 07:51:10,281 - utils.logger - WARNING - task_breakdown_messages list is empty, defaulting to rewrite
2025-05-20 07:51:10,282 - utils.logger - INFO - Message has no content, skipping
2025-05-20 07:51:10,282 - utils.logger - INFO - Rewriting query
2025-05-20 07:51:10,283 - utils.logger - INFO - Using cached prompt template for prompts/prompt_template_rewrite.txt
2025-05-20 07:51:11,484 - utils.logger - INFO - Rewrite count: 5
2025-05-20 07:51:11,485 - utils.logger - INFO - Agent processing user query
2025-05-20 07:51:12,560 - utils.logger - INFO - Using cached prompt template for prompts/prompt_template_agent_new.txt
2025-05-20 07:51:14,068 - utils.logger - INFO - Calling tool: requirement_breakdown
2025-05-20 07:51:14,078 - utils.logger - INFO - Using cached prompt template for prompts/task_agent_prompt_template_requirement_breakdown.txt
2025-05-20 07:51:14,081 - utils.logger - ERROR - Error in requirement_breakdown (attempt 1/3): 'Input to ChatPromptTemplate is missing variables {\'\\n  "tasks"\'}.  Expected: [\'\\n  "tasks"\', \'requirement\'] Received: [\'requirement\']\nNote: if you intended {\n  "tasks"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n  "tasks"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-05-20 07:51:14,084 - utils.logger - ERROR - Traceback (most recent call last):
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\utils\tools_config.py", line 113, in requirement_breakdown
    response = agent_chain.invoke(prompt_input)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\base.py", line 3032, in invoke
    input = context.run(step.invoke, input, config, **kwargs)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 216, in invoke
    return self._call_with_config(
           ~~~~~~~~~~~~~~~~~~~~~~^
        self._format_prompt_with_error_handling,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
        serialized=self._serialized,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\base.py", line 1930, in _call_with_config
    context.run(
    ~~~~~~~~~~~^
        call_func_with_variable_args,  # type: ignore[arg-type]
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
        **kwargs,
        ^^^^^^^^^
    ),
    ^
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\config.py", line 428, in call_func_with_variable_args
    return func(input, **kwargs)  # type: ignore[call-arg]
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 189, in _format_prompt_with_error_handling
    _inner_input = self._validate_input(inner_input)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 183, in _validate_input
    raise KeyError(
        create_message(message=msg, error_code=ErrorCode.INVALID_PROMPT_INPUT)
    )
KeyError: 'Input to ChatPromptTemplate is missing variables {\'\\n  "tasks"\'}.  Expected: [\'\\n  "tasks"\', \'requirement\'] Received: [\'requirement\']\nNote: if you intended {\n  "tasks"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n  "tasks"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '

2025-05-20 07:51:14,086 - utils.logger - INFO - Using cached prompt template for prompts/task_agent_prompt_template_requirement_breakdown.txt
2025-05-20 07:51:14,087 - utils.logger - ERROR - Error in requirement_breakdown (attempt 2/3): 'Input to ChatPromptTemplate is missing variables {\'\\n  "tasks"\'}.  Expected: [\'\\n  "tasks"\', \'requirement\'] Received: [\'requirement\']\nNote: if you intended {\n  "tasks"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n  "tasks"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-05-20 07:51:14,088 - utils.logger - ERROR - Traceback (most recent call last):
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\utils\tools_config.py", line 113, in requirement_breakdown
    response = agent_chain.invoke(prompt_input)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\base.py", line 3032, in invoke
    input = context.run(step.invoke, input, config, **kwargs)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 216, in invoke
    return self._call_with_config(
           ~~~~~~~~~~~~~~~~~~~~~~^
        self._format_prompt_with_error_handling,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
        serialized=self._serialized,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\base.py", line 1930, in _call_with_config
    context.run(
    ~~~~~~~~~~~^
        call_func_with_variable_args,  # type: ignore[arg-type]
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
        **kwargs,
        ^^^^^^^^^
    ),
    ^
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\config.py", line 428, in call_func_with_variable_args
    return func(input, **kwargs)  # type: ignore[call-arg]
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 189, in _format_prompt_with_error_handling
    _inner_input = self._validate_input(inner_input)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 183, in _validate_input
    raise KeyError(
        create_message(message=msg, error_code=ErrorCode.INVALID_PROMPT_INPUT)
    )
KeyError: 'Input to ChatPromptTemplate is missing variables {\'\\n  "tasks"\'}.  Expected: [\'\\n  "tasks"\', \'requirement\'] Received: [\'requirement\']\nNote: if you intended {\n  "tasks"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n  "tasks"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '

2025-05-20 07:51:14,090 - utils.logger - INFO - Using cached prompt template for prompts/task_agent_prompt_template_requirement_breakdown.txt
2025-05-20 07:51:14,091 - utils.logger - ERROR - Error in requirement_breakdown (attempt 3/3): 'Input to ChatPromptTemplate is missing variables {\'\\n  "tasks"\'}.  Expected: [\'\\n  "tasks"\', \'requirement\'] Received: [\'requirement\']\nNote: if you intended {\n  "tasks"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n  "tasks"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-05-20 07:51:14,092 - utils.logger - ERROR - Traceback (most recent call last):
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\utils\tools_config.py", line 113, in requirement_breakdown
    response = agent_chain.invoke(prompt_input)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\base.py", line 3032, in invoke
    input = context.run(step.invoke, input, config, **kwargs)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 216, in invoke
    return self._call_with_config(
           ~~~~~~~~~~~~~~~~~~~~~~^
        self._format_prompt_with_error_handling,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
        serialized=self._serialized,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\base.py", line 1930, in _call_with_config
    context.run(
    ~~~~~~~~~~~^
        call_func_with_variable_args,  # type: ignore[arg-type]
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
        **kwargs,
        ^^^^^^^^^
    ),
    ^
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\runnables\config.py", line 428, in call_func_with_variable_args
    return func(input, **kwargs)  # type: ignore[call-arg]
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 189, in _format_prompt_with_error_handling
    _inner_input = self._validate_input(inner_input)
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\venv\Lib\site-packages\langchain_core\prompts\base.py", line 183, in _validate_input
    raise KeyError(
        create_message(message=msg, error_code=ErrorCode.INVALID_PROMPT_INPUT)
    )
KeyError: 'Input to ChatPromptTemplate is missing variables {\'\\n  "tasks"\'}.  Expected: [\'\\n  "tasks"\', \'requirement\'] Received: [\'requirement\']\nNote: if you intended {\n  "tasks"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n  "tasks"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '

2025-05-20 07:51:14,094 - utils.logger - INFO - Tool requirement_breakdown routed to deal_tasks based on config
2025-05-20 07:51:14,094 - utils.logger - INFO - Generating deal_tasks result
2025-05-20 07:51:14,095 - utils.logger - WARNING - task_breakdown_messages list is empty, defaulting to rewrite
2025-05-20 07:51:14,096 - utils.logger - INFO - Message has no content, skipping
2025-05-20 07:51:14,096 - utils.logger - INFO - Rewriting query
2025-05-20 07:51:14,097 - utils.logger - INFO - Using cached prompt template for prompts/prompt_template_rewrite.txt
2025-05-20 07:51:17,446 - utils.logger - INFO - Rewrite count: 6
2025-05-20 07:51:17,450 - utils.logger - INFO - Agent processing user query
2025-05-20 07:51:18,945 - utils.logger - INFO - Using cached prompt template for prompts/prompt_template_agent_new.txt
2025-05-20 07:51:20,460 - utils.logger - INFO - Calling tool: requirement_breakdown
2025-05-20 07:51:20,461 - utils.logger - ERROR - Error processing response: Recursion limit of 25 reached without hitting a stop condition. You can increase the limit by setting the `recursion_limit` config key.
For troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/GRAPH_RECURSION_LIMIT
2025-05-20 07:51:44,456 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-20 07:52:44,458 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-20 07:53:44,459 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-20 07:54:44,461 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-20 07:55:44,463 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-20 07:56:35,303 - utils.logger - INFO - Database connection pool closed
2025-05-20 07:56:39,355 - utils.logger - DEBUG - Tool 'requirement_breakdown' routed to 'deal_tasks' (task breakdown tool)
2025-05-20 07:56:39,356 - utils.logger - INFO - Initialized ToolConfig with tools: {'requirement_breakdown'}, routing: {'requirement_breakdown': 'deal_tasks'}
2025-05-20 07:56:39,357 - utils.logger - INFO - Database connection pool initialized
2025-05-20 07:56:39,358 - utils.logger - DEBUG - Database connection pool initialized
2025-05-20 07:56:39,359 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-20 07:56:39,376 - utils.logger - INFO - Connection db_connection_pool status: OK, test connection successful
2025-05-20 07:56:39,902 - utils.logger - INFO - Graph visualization saved as graph.png
2025-05-20 07:56:44,512 - utils.logger - INFO - Agent processing user query
2025-05-20 07:56:47,182 - utils.logger - INFO - Loading and caching prompt template from prompts/prompt_template_agent_new.txt
2025-05-20 07:56:49,535 - utils.logger - INFO - Calling tool: requirement_breakdown
2025-05-20 07:56:49,539 - utils.logger - INFO - Loading and caching prompt template from prompts/task_agent_prompt_template_requirement_breakdown.txt
2025-05-20 07:56:57,350 - utils.logger - ERROR - Error in requirement_breakdown (attempt 1/3): Object of type RequirementBreakdownResult is not JSON serializable
2025-05-20 07:56:57,366 - utils.logger - ERROR - Traceback (most recent call last):
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\utils\tools_config.py", line 128, in requirement_breakdown
    return json.dumps(tasks)
           ~~~~~~~~~~^^^^^^^
  File "D:\Programs\Python\Python313\Lib\json\__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "D:\Programs\Python\Python313\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "D:\Programs\Python\Python313\Lib\json\encoder.py", line 261, in iterencode
    return _iterencode(o, 0)
  File "D:\Programs\Python\Python313\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
                    f'is not JSON serializable')
TypeError: Object of type RequirementBreakdownResult is not JSON serializable

2025-05-20 07:56:57,367 - utils.logger - INFO - Using cached prompt template for prompts/task_agent_prompt_template_requirement_breakdown.txt
2025-05-20 07:57:04,474 - utils.logger - ERROR - Error in requirement_breakdown (attempt 2/3): Object of type RequirementBreakdownResult is not JSON serializable
2025-05-20 07:57:04,475 - utils.logger - ERROR - Traceback (most recent call last):
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\utils\tools_config.py", line 128, in requirement_breakdown
    return json.dumps(tasks)
           ~~~~~~~~~~^^^^^^^
  File "D:\Programs\Python\Python313\Lib\json\__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "D:\Programs\Python\Python313\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "D:\Programs\Python\Python313\Lib\json\encoder.py", line 261, in iterencode
    return _iterencode(o, 0)
  File "D:\Programs\Python\Python313\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
                    f'is not JSON serializable')
TypeError: Object of type RequirementBreakdownResult is not JSON serializable

2025-05-20 07:57:04,476 - utils.logger - INFO - Using cached prompt template for prompts/task_agent_prompt_template_requirement_breakdown.txt
2025-05-20 07:57:12,122 - utils.logger - ERROR - Error in requirement_breakdown (attempt 3/3): Object of type RequirementBreakdownResult is not JSON serializable
2025-05-20 07:57:12,123 - utils.logger - ERROR - Traceback (most recent call last):
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\utils\tools_config.py", line 128, in requirement_breakdown
    return json.dumps(tasks)
           ~~~~~~~~~~^^^^^^^
  File "D:\Programs\Python\Python313\Lib\json\__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "D:\Programs\Python\Python313\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "D:\Programs\Python\Python313\Lib\json\encoder.py", line 261, in iterencode
    return _iterencode(o, 0)
  File "D:\Programs\Python\Python313\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
                    f'is not JSON serializable')
TypeError: Object of type RequirementBreakdownResult is not JSON serializable

2025-05-20 07:57:12,124 - utils.logger - INFO - Tool requirement_breakdown routed to deal_tasks based on config
2025-05-20 07:57:12,125 - utils.logger - INFO - Generating deal_tasks result
2025-05-20 07:57:12,126 - utils.logger - ERROR - Task breakdown messages state is empty
2025-05-20 07:57:12,126 - utils.logger - WARNING - task_breakdown_messages list is empty, defaulting to rewrite
2025-05-20 07:57:12,128 - utils.logger - INFO - Message has no content, skipping
2025-05-20 07:57:12,128 - utils.logger - INFO - Rewriting query
2025-05-20 07:57:12,129 - utils.logger - INFO - Loading and caching prompt template from prompts/prompt_template_rewrite.txt
2025-05-20 07:57:13,881 - utils.logger - INFO - Rewrite count: 1
2025-05-20 07:57:13,885 - utils.logger - INFO - Agent processing user query
2025-05-20 07:57:15,873 - utils.logger - INFO - Using cached prompt template for prompts/prompt_template_agent_new.txt
2025-05-20 07:57:17,374 - utils.logger - INFO - Calling tool: requirement_breakdown
2025-05-20 07:57:17,377 - utils.logger - INFO - Using cached prompt template for prompts/task_agent_prompt_template_requirement_breakdown.txt
2025-05-20 07:57:25,796 - utils.logger - ERROR - Error in requirement_breakdown (attempt 1/3): Object of type RequirementBreakdownResult is not JSON serializable
2025-05-20 07:57:25,799 - utils.logger - ERROR - Traceback (most recent call last):
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\utils\tools_config.py", line 128, in requirement_breakdown
    return json.dumps(tasks)
           ~~~~~~~~~~^^^^^^^
  File "D:\Programs\Python\Python313\Lib\json\__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "D:\Programs\Python\Python313\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "D:\Programs\Python\Python313\Lib\json\encoder.py", line 261, in iterencode
    return _iterencode(o, 0)
  File "D:\Programs\Python\Python313\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
                    f'is not JSON serializable')
TypeError: Object of type RequirementBreakdownResult is not JSON serializable

2025-05-20 07:57:25,800 - utils.logger - INFO - Using cached prompt template for prompts/task_agent_prompt_template_requirement_breakdown.txt
2025-05-20 07:57:32,149 - utils.logger - ERROR - Error in requirement_breakdown (attempt 2/3): Object of type RequirementBreakdownResult is not JSON serializable
2025-05-20 07:57:32,150 - utils.logger - ERROR - Traceback (most recent call last):
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\utils\tools_config.py", line 128, in requirement_breakdown
    return json.dumps(tasks)
           ~~~~~~~~~~^^^^^^^
  File "D:\Programs\Python\Python313\Lib\json\__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "D:\Programs\Python\Python313\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "D:\Programs\Python\Python313\Lib\json\encoder.py", line 261, in iterencode
    return _iterencode(o, 0)
  File "D:\Programs\Python\Python313\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
                    f'is not JSON serializable')
TypeError: Object of type RequirementBreakdownResult is not JSON serializable

2025-05-20 07:57:32,151 - utils.logger - INFO - Using cached prompt template for prompts/task_agent_prompt_template_requirement_breakdown.txt
2025-05-20 07:57:38,920 - utils.logger - ERROR - Error in requirement_breakdown (attempt 3/3): Object of type RequirementBreakdownResult is not JSON serializable
2025-05-20 07:57:38,921 - utils.logger - ERROR - Traceback (most recent call last):
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\utils\tools_config.py", line 128, in requirement_breakdown
    return json.dumps(tasks)
           ~~~~~~~~~~^^^^^^^
  File "D:\Programs\Python\Python313\Lib\json\__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "D:\Programs\Python\Python313\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "D:\Programs\Python\Python313\Lib\json\encoder.py", line 261, in iterencode
    return _iterencode(o, 0)
  File "D:\Programs\Python\Python313\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
                    f'is not JSON serializable')
TypeError: Object of type RequirementBreakdownResult is not JSON serializable

2025-05-20 07:57:38,923 - utils.logger - INFO - Tool requirement_breakdown routed to deal_tasks based on config
2025-05-20 07:57:38,924 - utils.logger - INFO - Generating deal_tasks result
2025-05-20 07:57:38,925 - utils.logger - ERROR - Task breakdown messages state is empty
2025-05-20 07:57:38,926 - utils.logger - WARNING - task_breakdown_messages list is empty, defaulting to rewrite
2025-05-20 07:57:38,927 - utils.logger - INFO - Message has no content, skipping
2025-05-20 07:57:38,928 - utils.logger - INFO - Rewriting query
2025-05-20 07:57:38,928 - utils.logger - INFO - Using cached prompt template for prompts/prompt_template_rewrite.txt
2025-05-20 07:57:39,361 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-20 07:57:40,672 - utils.logger - INFO - Rewrite count: 2
2025-05-20 07:57:40,676 - utils.logger - INFO - Agent processing user query
2025-05-20 07:57:42,659 - utils.logger - INFO - Using cached prompt template for prompts/prompt_template_agent_new.txt
2025-05-20 07:57:44,525 - utils.logger - INFO - Calling tool: requirement_breakdown
2025-05-20 07:57:44,529 - utils.logger - INFO - Using cached prompt template for prompts/task_agent_prompt_template_requirement_breakdown.txt
2025-05-20 07:57:54,474 - utils.logger - ERROR - Error in requirement_breakdown (attempt 1/3): Object of type RequirementBreakdownResult is not JSON serializable
2025-05-20 07:57:54,475 - utils.logger - ERROR - Traceback (most recent call last):
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\utils\tools_config.py", line 128, in requirement_breakdown
    if retry_count >= max_retries:
           ^^^^^^^^^^^^^^^^^
  File "D:\Programs\Python\Python313\Lib\json\__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "D:\Programs\Python\Python313\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "D:\Programs\Python\Python313\Lib\json\encoder.py", line 261, in iterencode
    return _iterencode(o, 0)
  File "D:\Programs\Python\Python313\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
                    f'is not JSON serializable')
TypeError: Object of type RequirementBreakdownResult is not JSON serializable

2025-05-20 07:57:54,476 - utils.logger - INFO - Using cached prompt template for prompts/task_agent_prompt_template_requirement_breakdown.txt
2025-05-20 07:58:00,824 - utils.logger - ERROR - Error in requirement_breakdown (attempt 2/3): Object of type RequirementBreakdownResult is not JSON serializable
2025-05-20 07:58:00,827 - utils.logger - ERROR - Traceback (most recent call last):
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\utils\tools_config.py", line 128, in requirement_breakdown
    if retry_count >= max_retries:
           ^^^^^^^^^^^^^^^^^
  File "D:\Programs\Python\Python313\Lib\json\__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "D:\Programs\Python\Python313\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "D:\Programs\Python\Python313\Lib\json\encoder.py", line 261, in iterencode
    return _iterencode(o, 0)
  File "D:\Programs\Python\Python313\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
                    f'is not JSON serializable')
TypeError: Object of type RequirementBreakdownResult is not JSON serializable

2025-05-20 07:58:00,829 - utils.logger - INFO - Using cached prompt template for prompts/task_agent_prompt_template_requirement_breakdown.txt
2025-05-20 07:58:10,281 - utils.logger - ERROR - Error in requirement_breakdown (attempt 3/3): Object of type RequirementBreakdownResult is not JSON serializable
2025-05-20 07:58:10,285 - utils.logger - ERROR - Traceback (most recent call last):
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\utils\tools_config.py", line 128, in requirement_breakdown
    if retry_count >= max_retries:
           ^^^^^^^^^^^^^^^^^
  File "D:\Programs\Python\Python313\Lib\json\__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "D:\Programs\Python\Python313\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "D:\Programs\Python\Python313\Lib\json\encoder.py", line 261, in iterencode
    return _iterencode(o, 0)
  File "D:\Programs\Python\Python313\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
                    f'is not JSON serializable')
TypeError: Object of type RequirementBreakdownResult is not JSON serializable

2025-05-20 07:58:10,287 - utils.logger - INFO - Tool requirement_breakdown routed to deal_tasks based on config
2025-05-20 07:58:10,288 - utils.logger - INFO - Generating deal_tasks result
2025-05-20 07:58:10,289 - utils.logger - ERROR - Task breakdown messages state is empty
2025-05-20 07:58:10,290 - utils.logger - WARNING - task_breakdown_messages list is empty, defaulting to rewrite
2025-05-20 07:58:10,291 - utils.logger - INFO - Message has no content, skipping
2025-05-20 07:58:10,291 - utils.logger - INFO - Rewriting query
2025-05-20 07:58:10,291 - utils.logger - INFO - Using cached prompt template for prompts/prompt_template_rewrite.txt
2025-05-20 07:58:11,967 - utils.logger - INFO - Rewrite count: 3
2025-05-20 07:58:11,971 - utils.logger - INFO - Agent processing user query
2025-05-20 07:58:14,158 - utils.logger - INFO - Using cached prompt template for prompts/prompt_template_agent_new.txt
2025-05-20 07:58:15,640 - utils.logger - INFO - Calling tool: requirement_breakdown
2025-05-20 07:58:15,644 - utils.logger - INFO - Using cached prompt template for prompts/task_agent_prompt_template_requirement_breakdown.txt
2025-05-20 07:58:24,551 - utils.logger - ERROR - Error in requirement_breakdown (attempt 1/3): Object of type RequirementBreakdownResult is not JSON serializable
2025-05-20 07:58:24,553 - utils.logger - ERROR - Traceback (most recent call last):
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\utils\tools_config.py", line 128, in requirement_breakdown
    if retry_count >= max_retries:
           ^^^^^^^^^^^^^^^^^
  File "D:\Programs\Python\Python313\Lib\json\__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "D:\Programs\Python\Python313\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "D:\Programs\Python\Python313\Lib\json\encoder.py", line 261, in iterencode
    return _iterencode(o, 0)
  File "D:\Programs\Python\Python313\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
                    f'is not JSON serializable')
TypeError: Object of type RequirementBreakdownResult is not JSON serializable

2025-05-20 07:58:24,553 - utils.logger - INFO - Using cached prompt template for prompts/task_agent_prompt_template_requirement_breakdown.txt
2025-05-20 07:58:30,549 - utils.logger - ERROR - Error in requirement_breakdown (attempt 2/3): Object of type RequirementBreakdownResult is not JSON serializable
2025-05-20 07:58:30,550 - utils.logger - ERROR - Traceback (most recent call last):
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\utils\tools_config.py", line 128, in requirement_breakdown
    if retry_count >= max_retries:
           ^^^^^^^^^^^^^^^^^
  File "D:\Programs\Python\Python313\Lib\json\__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "D:\Programs\Python\Python313\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "D:\Programs\Python\Python313\Lib\json\encoder.py", line 261, in iterencode
    return _iterencode(o, 0)
  File "D:\Programs\Python\Python313\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
                    f'is not JSON serializable')
TypeError: Object of type RequirementBreakdownResult is not JSON serializable

2025-05-20 07:58:30,551 - utils.logger - INFO - Using cached prompt template for prompts/task_agent_prompt_template_requirement_breakdown.txt
2025-05-20 07:58:37,275 - utils.logger - ERROR - Error in requirement_breakdown (attempt 3/3): Object of type RequirementBreakdownResult is not JSON serializable
2025-05-20 07:58:37,276 - utils.logger - ERROR - Traceback (most recent call last):
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\utils\tools_config.py", line 128, in requirement_breakdown
    if retry_count >= max_retries:
           ^^^^^^^^^^^^^^^^^
  File "D:\Programs\Python\Python313\Lib\json\__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "D:\Programs\Python\Python313\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "D:\Programs\Python\Python313\Lib\json\encoder.py", line 261, in iterencode
    return _iterencode(o, 0)
  File "D:\Programs\Python\Python313\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
                    f'is not JSON serializable')
TypeError: Object of type RequirementBreakdownResult is not JSON serializable

2025-05-20 07:58:37,277 - utils.logger - INFO - Tool requirement_breakdown routed to deal_tasks based on config
2025-05-20 07:58:37,278 - utils.logger - INFO - Generating deal_tasks result
2025-05-20 07:58:37,280 - utils.logger - ERROR - Task breakdown messages state is empty
2025-05-20 07:58:37,280 - utils.logger - WARNING - task_breakdown_messages list is empty, defaulting to rewrite
2025-05-20 07:58:37,281 - utils.logger - INFO - Message has no content, skipping
2025-05-20 07:58:37,282 - utils.logger - INFO - Rewriting query
2025-05-20 07:58:37,282 - utils.logger - INFO - Using cached prompt template for prompts/prompt_template_rewrite.txt
2025-05-20 07:58:38,744 - utils.logger - INFO - Rewrite count: 4
2025-05-20 07:58:38,746 - utils.logger - INFO - Agent processing user query
2025-05-20 07:58:39,363 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-20 07:58:40,926 - utils.logger - INFO - Using cached prompt template for prompts/prompt_template_agent_new.txt
2025-05-20 07:58:42,553 - utils.logger - INFO - Calling tool: requirement_breakdown
2025-05-20 07:58:42,557 - utils.logger - INFO - Using cached prompt template for prompts/task_agent_prompt_template_requirement_breakdown.txt
2025-05-20 07:58:48,977 - utils.logger - ERROR - Error in requirement_breakdown (attempt 1/3): Object of type RequirementBreakdownResult is not JSON serializable
2025-05-20 07:58:48,980 - utils.logger - ERROR - Traceback (most recent call last):
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\utils\tools_config.py", line 128, in requirement_breakdown
    if retry_count >= max_retries:
           ^^^^^^^^^^^^^^^^^
  File "D:\Programs\Python\Python313\Lib\json\__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "D:\Programs\Python\Python313\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "D:\Programs\Python\Python313\Lib\json\encoder.py", line 261, in iterencode
    return _iterencode(o, 0)
  File "D:\Programs\Python\Python313\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
                    f'is not JSON serializable')
TypeError: Object of type RequirementBreakdownResult is not JSON serializable

2025-05-20 07:58:48,981 - utils.logger - INFO - Using cached prompt template for prompts/task_agent_prompt_template_requirement_breakdown.txt
2025-05-20 07:58:55,347 - utils.logger - ERROR - Error in requirement_breakdown (attempt 2/3): Object of type RequirementBreakdownResult is not JSON serializable
2025-05-20 07:58:55,351 - utils.logger - ERROR - Traceback (most recent call last):
  File "D:\kid\Code\Python\LangGraphChatBot\04_RagAgent\utils\tools_config.py", line 128, in requirement_breakdown
    if retry_count >= max_retries:
           ^^^^^^^^^^^^^^^^^
  File "D:\Programs\Python\Python313\Lib\json\__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "D:\Programs\Python\Python313\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "D:\Programs\Python\Python313\Lib\json\encoder.py", line 261, in iterencode
    return _iterencode(o, 0)
  File "D:\Programs\Python\Python313\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
                    f'is not JSON serializable')
TypeError: Object of type RequirementBreakdownResult is not JSON serializable

2025-05-20 07:58:55,352 - utils.logger - INFO - Using cached prompt template for prompts/task_agent_prompt_template_requirement_breakdown.txt
2025-05-20 07:59:03,686 - utils.logger - DEBUG - Tool 'requirement_breakdown' routed to 'deal_tasks' (task breakdown tool)
2025-05-20 07:59:03,687 - utils.logger - INFO - Initialized ToolConfig with tools: {'requirement_breakdown'}, routing: {'requirement_breakdown': 'deal_tasks'}
2025-05-20 07:59:03,688 - utils.logger - INFO - Database connection pool initialized
2025-05-20 07:59:03,689 - utils.logger - DEBUG - Database connection pool initialized
2025-05-20 07:59:03,690 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-20 07:59:03,706 - utils.logger - INFO - Connection db_connection_pool status: OK, test connection successful
2025-05-20 07:59:04,304 - utils.logger - INFO - Graph visualization saved as graph.png
2025-05-20 07:59:13,878 - utils.logger - INFO - Agent processing user query
2025-05-20 07:59:16,076 - utils.logger - INFO - Loading and caching prompt template from prompts/prompt_template_agent_new.txt
2025-05-20 07:59:18,100 - utils.logger - INFO - Calling tool: requirement_breakdown
2025-05-20 07:59:18,104 - utils.logger - INFO - Loading and caching prompt template from prompts/task_agent_prompt_template_requirement_breakdown.txt
2025-05-20 07:59:24,616 - utils.logger - INFO - Tool requirement_breakdown routed to deal_tasks based on config
2025-05-20 07:59:24,622 - utils.logger - INFO - Generating deal_tasks result
2025-05-20 07:59:24,624 - utils.logger - ERROR - Task breakdown messages state is empty
2025-05-20 07:59:24,626 - utils.logger - WARNING - task_breakdown_messages list is empty, defaulting to rewrite
2025-05-20 07:59:24,628 - utils.logger - INFO - Message has no content, skipping
2025-05-20 07:59:24,629 - utils.logger - INFO - Rewriting query
2025-05-20 07:59:24,629 - utils.logger - INFO - Loading and caching prompt template from prompts/prompt_template_rewrite.txt
2025-05-20 07:59:26,711 - utils.logger - INFO - Rewrite count: 1
2025-05-20 07:59:26,715 - utils.logger - INFO - Agent processing user query
2025-05-20 07:59:28,916 - utils.logger - INFO - Using cached prompt template for prompts/prompt_template_agent_new.txt
2025-05-20 07:59:30,266 - utils.logger - INFO - Calling tool: requirement_breakdown
2025-05-20 07:59:30,269 - utils.logger - INFO - Using cached prompt template for prompts/task_agent_prompt_template_requirement_breakdown.txt
2025-05-20 07:59:39,257 - utils.logger - INFO - Tool requirement_breakdown routed to deal_tasks based on config
2025-05-20 07:59:39,261 - utils.logger - INFO - Generating deal_tasks result
2025-05-20 07:59:39,263 - utils.logger - ERROR - Task breakdown messages state is empty
2025-05-20 07:59:39,264 - utils.logger - WARNING - task_breakdown_messages list is empty, defaulting to rewrite
2025-05-20 07:59:39,266 - utils.logger - INFO - Message has no content, skipping
2025-05-20 07:59:39,266 - utils.logger - INFO - Rewriting query
2025-05-20 07:59:39,267 - utils.logger - INFO - Using cached prompt template for prompts/prompt_template_rewrite.txt
2025-05-20 07:59:40,835 - utils.logger - INFO - Rewrite count: 2
2025-05-20 07:59:40,836 - utils.logger - INFO - Agent processing user query
2025-05-20 07:59:43,078 - utils.logger - INFO - Using cached prompt template for prompts/prompt_template_agent_new.txt
2025-05-20 07:59:44,438 - utils.logger - INFO - Calling tool: requirement_breakdown
2025-05-20 07:59:44,443 - utils.logger - INFO - Using cached prompt template for prompts/task_agent_prompt_template_requirement_breakdown.txt
2025-05-20 07:59:50,788 - utils.logger - INFO - Tool requirement_breakdown routed to deal_tasks based on config
2025-05-20 07:59:50,789 - utils.logger - INFO - Generating deal_tasks result
2025-05-20 07:59:50,790 - utils.logger - ERROR - Task breakdown messages state is empty
2025-05-20 07:59:50,791 - utils.logger - WARNING - task_breakdown_messages list is empty, defaulting to rewrite
2025-05-20 07:59:50,791 - utils.logger - INFO - Message has no content, skipping
2025-05-20 07:59:50,792 - utils.logger - INFO - Rewriting query
2025-05-20 07:59:50,792 - utils.logger - INFO - Using cached prompt template for prompts/prompt_template_rewrite.txt
2025-05-20 07:59:52,742 - utils.logger - INFO - Rewrite count: 3
2025-05-20 07:59:52,747 - utils.logger - INFO - Agent processing user query
2025-05-20 07:59:53,948 - utils.logger - INFO - Database connection pool closed
2025-05-20 07:59:57,692 - utils.logger - DEBUG - Tool 'requirement_breakdown' routed to 'deal_tasks' (task breakdown tool)
2025-05-20 07:59:57,693 - utils.logger - INFO - Initialized ToolConfig with tools: {'requirement_breakdown'}, routing: {'requirement_breakdown': 'deal_tasks'}
2025-05-20 07:59:57,694 - utils.logger - INFO - Database connection pool initialized
2025-05-20 07:59:57,694 - utils.logger - DEBUG - Database connection pool initialized
2025-05-20 07:59:57,695 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-20 07:59:57,711 - utils.logger - INFO - Connection db_connection_pool status: OK, test connection successful
2025-05-20 07:59:58,253 - utils.logger - INFO - Graph visualization saved as graph.png
2025-05-20 08:00:07,746 - utils.logger - INFO - Agent processing user query
2025-05-20 08:00:09,768 - utils.logger - INFO - Loading and caching prompt template from prompts/prompt_template_agent_new.txt
2025-05-20 08:00:15,684 - utils.logger - INFO - Calling tool: requirement_breakdown
2025-05-20 08:00:15,689 - utils.logger - INFO - Loading and caching prompt template from prompts/task_agent_prompt_template_requirement_breakdown.txt
2025-05-20 08:00:25,927 - utils.logger - INFO - Tool requirement_breakdown routed to deal_tasks based on config
2025-05-20 08:00:25,930 - utils.logger - INFO - Generating deal_tasks result
2025-05-20 08:00:25,931 - utils.logger - ERROR - Task breakdown messages state is empty
2025-05-20 08:00:25,933 - utils.logger - WARNING - task_breakdown_messages list is empty, defaulting to rewrite
2025-05-20 08:00:25,935 - utils.logger - INFO - Message has no content, skipping
2025-05-20 08:00:25,935 - utils.logger - INFO - Rewriting query
2025-05-20 08:00:25,936 - utils.logger - INFO - Loading and caching prompt template from prompts/prompt_template_rewrite.txt
2025-05-20 08:00:27,697 - utils.logger - INFO - Rewrite count: 1
2025-05-20 08:00:27,698 - utils.logger - INFO - Agent processing user query
2025-05-20 08:00:29,507 - utils.logger - INFO - Using cached prompt template for prompts/prompt_template_agent_new.txt
2025-05-20 08:00:30,829 - utils.logger - INFO - Calling tool: requirement_breakdown
2025-05-20 08:00:30,835 - utils.logger - INFO - Using cached prompt template for prompts/task_agent_prompt_template_requirement_breakdown.txt
2025-05-20 08:00:37,642 - utils.logger - INFO - Tool requirement_breakdown routed to deal_tasks based on config
2025-05-20 08:00:37,646 - utils.logger - INFO - Generating deal_tasks result
2025-05-20 08:00:37,648 - utils.logger - ERROR - Task breakdown messages state is empty
2025-05-20 08:00:37,649 - utils.logger - WARNING - task_breakdown_messages list is empty, defaulting to rewrite
2025-05-20 08:00:37,651 - utils.logger - INFO - Message has no content, skipping
2025-05-20 08:00:37,652 - utils.logger - INFO - Rewriting query
2025-05-20 08:00:37,652 - utils.logger - INFO - Using cached prompt template for prompts/prompt_template_rewrite.txt
2025-05-20 08:00:39,658 - utils.logger - INFO - Rewrite count: 2
2025-05-20 08:00:39,663 - utils.logger - INFO - Agent processing user query
2025-05-20 08:00:41,697 - utils.logger - INFO - Using cached prompt template for prompts/prompt_template_agent_new.txt
2025-05-20 08:00:42,917 - utils.logger - INFO - Calling tool: requirement_breakdown
2025-05-20 08:00:42,931 - utils.logger - INFO - Using cached prompt template for prompts/task_agent_prompt_template_requirement_breakdown.txt
2025-05-20 08:00:50,722 - utils.logger - INFO - Tool requirement_breakdown routed to deal_tasks based on config
2025-05-20 08:00:50,726 - utils.logger - INFO - Generating deal_tasks result
2025-05-20 08:00:50,728 - utils.logger - ERROR - Task breakdown messages state is empty
2025-05-20 08:00:50,729 - utils.logger - WARNING - task_breakdown_messages list is empty, defaulting to rewrite
2025-05-20 08:00:50,731 - utils.logger - INFO - Message has no content, skipping
2025-05-20 08:00:50,732 - utils.logger - INFO - Rewriting query
2025-05-20 08:00:50,732 - utils.logger - INFO - Using cached prompt template for prompts/prompt_template_rewrite.txt
2025-05-20 08:00:52,572 - utils.logger - INFO - Rewrite count: 3
2025-05-20 08:00:52,573 - utils.logger - INFO - Agent processing user query
2025-05-20 08:00:54,438 - utils.logger - INFO - Using cached prompt template for prompts/prompt_template_agent_new.txt
2025-05-20 08:00:56,197 - utils.logger - INFO - Calling tool: requirement_breakdown
2025-05-20 08:00:56,207 - utils.logger - INFO - Using cached prompt template for prompts/task_agent_prompt_template_requirement_breakdown.txt
2025-05-20 08:00:57,696 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-20 08:01:08,154 - utils.logger - INFO - Tool requirement_breakdown routed to deal_tasks based on config
2025-05-20 08:01:08,156 - utils.logger - INFO - Generating deal_tasks result
2025-05-20 08:01:08,158 - utils.logger - ERROR - Task breakdown messages state is empty
2025-05-20 08:01:08,159 - utils.logger - WARNING - task_breakdown_messages list is empty, defaulting to rewrite
2025-05-20 08:01:08,161 - utils.logger - INFO - Message has no content, skipping
2025-05-20 08:01:08,162 - utils.logger - INFO - Rewriting query
2025-05-20 08:01:08,162 - utils.logger - INFO - Using cached prompt template for prompts/prompt_template_rewrite.txt
2025-05-20 08:01:11,524 - utils.logger - INFO - Rewrite count: 4
2025-05-20 08:01:11,525 - utils.logger - INFO - Agent processing user query
2025-05-20 08:01:13,140 - utils.logger - INFO - Using cached prompt template for prompts/prompt_template_agent_new.txt
2025-05-20 08:01:14,767 - utils.logger - INFO - Calling tool: requirement_breakdown
2025-05-20 08:01:14,773 - utils.logger - INFO - Using cached prompt template for prompts/task_agent_prompt_template_requirement_breakdown.txt
2025-05-20 08:01:25,143 - utils.logger - INFO - Tool requirement_breakdown routed to deal_tasks based on config
2025-05-20 08:01:25,145 - utils.logger - INFO - Generating deal_tasks result
2025-05-20 08:01:25,145 - utils.logger - ERROR - Task breakdown messages state is empty
2025-05-20 08:01:25,146 - utils.logger - WARNING - task_breakdown_messages list is empty, defaulting to rewrite
2025-05-20 08:01:25,147 - utils.logger - INFO - Message has no content, skipping
2025-05-20 08:01:25,148 - utils.logger - INFO - Rewriting query
2025-05-20 08:01:25,148 - utils.logger - INFO - Using cached prompt template for prompts/prompt_template_rewrite.txt
2025-05-20 08:01:27,359 - utils.logger - INFO - Rewrite count: 5
2025-05-20 08:01:27,363 - utils.logger - INFO - Agent processing user query
2025-05-20 08:01:29,709 - utils.logger - INFO - Using cached prompt template for prompts/prompt_template_agent_new.txt
2025-05-20 08:01:31,342 - utils.logger - INFO - Calling tool: requirement_breakdown
2025-05-20 08:01:31,349 - utils.logger - INFO - Using cached prompt template for prompts/task_agent_prompt_template_requirement_breakdown.txt
2025-05-20 08:01:40,867 - utils.logger - INFO - Database connection pool closed
2025-05-20 08:01:44,966 - utils.logger - DEBUG - Tool 'requirement_breakdown' routed to 'generate' (task breakdown tool)
2025-05-20 08:01:44,967 - utils.logger - INFO - Initialized ToolConfig with tools: {'requirement_breakdown'}, routing: {'requirement_breakdown': 'generate'}
2025-05-20 08:01:44,969 - utils.logger - INFO - Database connection pool initialized
2025-05-20 08:01:44,970 - utils.logger - DEBUG - Database connection pool initialized
2025-05-20 08:01:44,970 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-20 08:01:44,984 - utils.logger - INFO - Connection db_connection_pool status: OK, test connection successful
2025-05-20 08:01:45,502 - utils.logger - INFO - Graph visualization saved as graph.png
2025-05-20 08:01:49,967 - utils.logger - INFO - Agent processing user query
2025-05-20 08:01:51,626 - utils.logger - INFO - Loading and caching prompt template from prompts/prompt_template_agent_new.txt
2025-05-20 08:01:54,177 - utils.logger - INFO - Calling tool: requirement_breakdown
2025-05-20 08:01:54,183 - utils.logger - INFO - Loading and caching prompt template from prompts/task_agent_prompt_template_requirement_breakdown.txt
2025-05-20 08:02:03,084 - utils.logger - INFO - Tool requirement_breakdown routed to generate based on config
2025-05-20 08:02:03,089 - utils.logger - INFO - Generating final response
2025-05-20 08:02:03,092 - utils.logger - INFO - Loading and caching prompt template from prompts/prompt_template_generate.txt
2025-05-20 08:02:44,972 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-20 08:02:53,202 - utils.logger - INFO - Agent processing user query
2025-05-20 08:02:55,397 - utils.logger - INFO - Using cached prompt template for prompts/prompt_template_agent_new.txt
2025-05-20 08:03:11,303 - utils.logger - INFO - Agent processing user query
2025-05-20 08:03:12,820 - utils.logger - INFO - Using cached prompt template for prompts/prompt_template_agent_new.txt
2025-05-20 08:03:44,975 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-20 08:04:19,683 - utils.logger - INFO - Agent processing user query
2025-05-20 08:04:21,623 - utils.logger - INFO - Using cached prompt template for prompts/prompt_template_agent_new.txt
2025-05-20 08:04:23,971 - utils.logger - INFO - Calling tool: requirement_breakdown
2025-05-20 08:04:23,975 - utils.logger - INFO - Using cached prompt template for prompts/task_agent_prompt_template_requirement_breakdown.txt
2025-05-20 08:04:34,913 - utils.logger - INFO - Tool requirement_breakdown routed to generate based on config
2025-05-20 08:04:34,918 - utils.logger - INFO - Generating final response
2025-05-20 08:04:34,920 - utils.logger - INFO - Using cached prompt template for prompts/prompt_template_generate.txt
2025-05-20 08:04:39,868 - utils.logger - INFO - Database connection pool closed
2025-05-20 08:05:40,811 - utils.logger - DEBUG - Tool 'requirement_breakdown' routed to 'generate' (task breakdown tool)
2025-05-20 08:05:40,812 - utils.logger - INFO - Initialized ToolConfig with tools: {'requirement_breakdown'}, routing: {'requirement_breakdown': 'generate'}
2025-05-20 08:05:40,812 - utils.logger - INFO - Database connection pool initialized
2025-05-20 08:05:40,813 - utils.logger - DEBUG - Database connection pool initialized
2025-05-20 08:05:40,814 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-20 08:05:40,828 - utils.logger - INFO - Connection db_connection_pool status: OK, test connection successful
2025-05-20 08:05:41,316 - utils.logger - INFO - Graph visualization saved as graph.png
2025-05-20 08:05:45,617 - utils.logger - INFO - Agent processing user query
2025-05-20 08:05:48,190 - utils.logger - INFO - Loading and caching prompt template from prompts/prompt_template_agent_new.txt
2025-05-20 08:05:52,544 - utils.logger - INFO - Calling tool: requirement_breakdown
2025-05-20 08:05:52,552 - utils.logger - INFO - Loading and caching prompt template from prompts/task_agent_prompt_template_requirement_breakdown.txt
2025-05-20 08:06:00,001 - utils.logger - INFO - Tool requirement_breakdown routed to generate based on config
2025-05-20 08:06:00,004 - utils.logger - INFO - Generating final response
2025-05-20 08:06:00,005 - utils.logger - INFO - Loading and caching prompt template from prompts/prompt_template_generate.txt
2025-05-20 08:06:22,875 - utils.logger - INFO - Agent processing user query
2025-05-20 08:06:24,598 - utils.logger - INFO - Using cached prompt template for prompts/prompt_template_agent_new.txt
2025-05-20 08:06:27,783 - utils.logger - INFO - Calling tool: requirement_breakdown
2025-05-20 08:06:27,791 - utils.logger - INFO - Using cached prompt template for prompts/task_agent_prompt_template_requirement_breakdown.txt
2025-05-20 08:06:34,422 - utils.logger - INFO - Tool requirement_breakdown routed to generate based on config
2025-05-20 08:06:34,425 - utils.logger - INFO - Generating final response
2025-05-20 08:06:34,427 - utils.logger - INFO - Using cached prompt template for prompts/prompt_template_generate.txt
2025-05-20 08:06:40,816 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-20 08:07:40,819 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-20 08:08:40,820 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-20 08:09:37,007 - utils.logger - INFO - Database connection pool closed
2025-05-20 08:09:40,978 - utils.logger - DEBUG - Tool 'requirement_breakdown' routed to 'generate' (task breakdown tool)
2025-05-20 08:09:40,979 - utils.logger - INFO - Initialized ToolConfig with tools: {'requirement_breakdown'}, routing: {'requirement_breakdown': 'generate'}
2025-05-20 08:09:40,980 - utils.logger - INFO - Database connection pool initialized
2025-05-20 08:09:40,981 - utils.logger - DEBUG - Database connection pool initialized
2025-05-20 08:09:40,981 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-20 08:09:40,998 - utils.logger - INFO - Connection db_connection_pool status: OK, test connection successful
2025-05-20 08:09:41,563 - utils.logger - INFO - Graph visualization saved as graph.png
2025-05-20 08:09:45,702 - utils.logger - INFO - Agent processing user query
2025-05-20 08:09:47,982 - utils.logger - INFO - Loading and caching prompt template from prompts/prompt_template_agent_new.txt
2025-05-20 08:09:51,650 - utils.logger - INFO - Calling tool: requirement_breakdown
2025-05-20 08:09:51,658 - utils.logger - INFO - Loading and caching prompt template from prompts/task_agent_prompt_template_requirement_breakdown.txt
2025-05-20 08:09:57,569 - utils.logger - INFO - Tool requirement_breakdown routed to generate based on config
2025-05-20 08:09:57,574 - utils.logger - INFO - Generating final response
2025-05-20 08:09:57,576 - utils.logger - INFO - Loading and caching prompt template from prompts/prompt_template_generate.txt
2025-05-20 08:10:40,983 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-20 08:11:40,986 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-20 08:11:53,370 - utils.logger - INFO - Database connection pool closed
2025-05-20 08:11:57,405 - utils.logger - DEBUG - Tool 'requirement_breakdown' routed to 'generate' (task breakdown tool)
2025-05-20 08:11:57,406 - utils.logger - INFO - Initialized ToolConfig with tools: {'requirement_breakdown'}, routing: {'requirement_breakdown': 'generate'}
2025-05-20 08:11:57,407 - utils.logger - INFO - Database connection pool initialized
2025-05-20 08:11:57,408 - utils.logger - DEBUG - Database connection pool initialized
2025-05-20 08:11:57,409 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-20 08:11:57,424 - utils.logger - INFO - Connection db_connection_pool status: OK, test connection successful
2025-05-20 08:11:57,941 - utils.logger - INFO - Graph visualization saved as graph.png
2025-05-20 08:12:02,216 - utils.logger - INFO - Agent processing user query
2025-05-20 08:12:04,114 - utils.logger - INFO - Loading and caching prompt template from prompts/prompt_template_agent_new.txt
2025-05-20 08:12:06,915 - utils.logger - ERROR - Error accessing graph state: BaseStore.get() missing 1 required positional argument: 'key'
2025-05-20 08:12:06,916 - utils.logger - INFO - Calling tool: requirement_breakdown
2025-05-20 08:12:06,917 - utils.logger - INFO - Loading and caching prompt template from prompts/task_agent_prompt_template_requirement_breakdown.txt
2025-05-20 08:12:15,725 - utils.logger - INFO - Tool requirement_breakdown routed to generate based on config
2025-05-20 08:12:15,728 - utils.logger - ERROR - Error accessing graph state: BaseStore.get() missing 1 required positional argument: 'key'
2025-05-20 08:12:15,730 - utils.logger - INFO - Generating final response
2025-05-20 08:12:15,732 - utils.logger - INFO - Loading and caching prompt template from prompts/prompt_template_generate.txt
2025-05-20 08:12:22,114 - utils.logger - ERROR - Error accessing graph state: BaseStore.get() missing 1 required positional argument: 'key'
2025-05-20 08:12:57,410 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-20 08:13:57,411 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-20 08:14:57,413 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-20 08:15:57,414 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-20 08:16:57,417 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-20 08:17:13,098 - utils.logger - INFO - Database connection pool closed
2025-05-20 08:17:32,110 - utils.logger - DEBUG - Tool 'requirement_breakdown' routed to 'generate' (task breakdown tool)
2025-05-20 08:17:32,111 - utils.logger - INFO - Initialized ToolConfig with tools: {'requirement_breakdown'}, routing: {'requirement_breakdown': 'generate'}
2025-05-20 08:17:32,112 - utils.logger - INFO - Database connection pool initialized
2025-05-20 08:17:32,113 - utils.logger - DEBUG - Database connection pool initialized
2025-05-20 08:17:32,113 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-20 08:17:32,129 - utils.logger - INFO - Connection db_connection_pool status: OK, test connection successful
2025-05-20 08:17:32,613 - utils.logger - INFO - Graph visualization saved as graph.png
2025-05-20 08:17:40,146 - utils.logger - INFO - Agent processing user query
2025-05-20 08:17:42,645 - utils.logger - INFO - Loading and caching prompt template from prompts/prompt_template_agent_new.txt
2025-05-20 08:17:44,400 - utils.logger - INFO - Calling tool: requirement_breakdown
2025-05-20 08:17:44,403 - utils.logger - INFO - Loading and caching prompt template from prompts/task_agent_prompt_template_requirement_breakdown.txt
2025-05-20 08:17:51,573 - utils.logger - INFO - Tool requirement_breakdown routed to generate based on config
2025-05-20 08:17:51,577 - utils.logger - INFO - Generating final response
2025-05-20 08:17:51,579 - utils.logger - INFO - Loading and caching prompt template from prompts/prompt_template_generate.txt
2025-05-20 08:18:12,557 - utils.logger - INFO - Agent processing user query
2025-05-20 08:18:14,695 - utils.logger - INFO - Using cached prompt template for prompts/prompt_template_agent_new.txt
2025-05-20 08:18:32,115 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-20 08:18:42,289 - utils.logger - INFO - Database connection pool closed
2025-05-20 08:44:15,795 - utils.logger - DEBUG - Tool 'requirement_breakdown' routed to 'generate' (task breakdown tool)
2025-05-20 08:44:15,796 - utils.logger - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-05-20 08:44:15,796 - utils.logger - INFO - Initialized ToolConfig with tools: {'retrieve', 'requirement_breakdown'}, routing: {'requirement_breakdown': 'generate', 'retrieve': 'grade_documents'}
2025-05-20 08:44:15,797 - utils.logger - INFO - Database connection pool initialized
2025-05-20 08:44:15,798 - utils.logger - DEBUG - Database connection pool initialized
2025-05-20 08:44:15,799 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-20 08:44:15,869 - utils.logger - INFO - Connection db_connection_pool status: OK, test connection successful
2025-05-20 08:44:37,507 - utils.logger - ERROR - Failed to render graph visualization: Failed to reach https://mermaid.ink/ API while trying to render your graph after 1 retries. To resolve this issue:
1. Check your internet connection and try again
2. Try with higher retry settings: `draw_mermaid_png(..., max_retries=5, retry_delay=2.0)`
3. Use the Pyppeteer rendering method which will render your graph locally in a browser: `draw_mermaid_png(..., draw_method=MermaidDrawMethod.PYPPETEER)`
2025-05-20 08:44:48,498 - utils.logger - INFO - Loading and caching prompt template from prompts/prompt_template_agent_new.txt
2025-05-20 08:44:50,724 - utils.logger - INFO - Calling tool: retrieve
2025-05-20 08:44:51,348 - utils.logger - INFO - Tool retrieve routed to grade_documents based on config
2025-05-20 08:44:51,354 - utils.logger - ERROR - Error processing response: 'grade_documents'
2025-05-20 08:45:15,326 - utils.logger - INFO - Database connection pool closed
2025-05-20 08:45:19,318 - utils.logger - DEBUG - Tool 'requirement_breakdown' routed to 'generate' (task breakdown tool)
2025-05-20 08:45:19,319 - utils.logger - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-05-20 08:45:19,319 - utils.logger - INFO - Initialized ToolConfig with tools: {'requirement_breakdown', 'retrieve'}, routing: {'requirement_breakdown': 'generate', 'retrieve': 'grade_documents'}
2025-05-20 08:45:19,320 - utils.logger - INFO - Database connection pool initialized
2025-05-20 08:45:19,321 - utils.logger - DEBUG - Database connection pool initialized
2025-05-20 08:45:19,322 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-20 08:45:19,336 - utils.logger - INFO - Connection db_connection_pool status: OK, test connection successful
2025-05-20 08:45:40,728 - utils.logger - ERROR - Failed to render graph visualization: Failed to reach https://mermaid.ink/ API while trying to render your graph after 1 retries. To resolve this issue:
1. Check your internet connection and try again
2. Try with higher retry settings: `draw_mermaid_png(..., max_retries=5, retry_delay=2.0)`
3. Use the Pyppeteer rendering method which will render your graph locally in a browser: `draw_mermaid_png(..., draw_method=MermaidDrawMethod.PYPPETEER)`
2025-05-20 08:46:19,323 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-20 08:47:19,325 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-20 08:48:19,327 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-20 08:49:19,330 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-20 08:49:34,461 - utils.logger - INFO - Database connection pool closed
2025-05-20 08:49:50,038 - utils.logger - DEBUG - Tool 'requirement_breakdown' routed to 'generate' (task breakdown tool)
2025-05-20 08:49:50,039 - utils.logger - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-05-20 08:49:50,039 - utils.logger - INFO - Initialized ToolConfig with tools: {'retrieve', 'requirement_breakdown'}, routing: {'requirement_breakdown': 'generate', 'retrieve': 'grade_documents'}
2025-05-20 08:49:50,040 - utils.logger - INFO - Database connection pool initialized
2025-05-20 08:49:50,041 - utils.logger - DEBUG - Database connection pool initialized
2025-05-20 08:49:50,042 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-20 08:49:50,057 - utils.logger - INFO - Connection db_connection_pool status: OK, test connection successful
2025-05-20 08:49:50,532 - utils.logger - INFO - Graph visualization saved as graph.png
2025-05-20 08:50:20,173 - utils.logger - INFO - Database connection pool closed
2025-05-20 08:50:24,448 - utils.logger - DEBUG - Tool 'requirement_breakdown' routed to 'generate' (task breakdown tool)
2025-05-20 08:50:24,449 - utils.logger - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-05-20 08:50:24,449 - utils.logger - INFO - Initialized ToolConfig with tools: {'retrieve', 'requirement_breakdown'}, routing: {'requirement_breakdown': 'generate', 'retrieve': 'grade_documents'}
2025-05-20 08:50:24,450 - utils.logger - INFO - Database connection pool initialized
2025-05-20 08:50:24,451 - utils.logger - DEBUG - Database connection pool initialized
2025-05-20 08:50:24,452 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-20 08:50:24,467 - utils.logger - INFO - Connection db_connection_pool status: OK, test connection successful
2025-05-20 08:50:39,695 - utils.logger - INFO - Graph visualization saved as graph.png
2025-05-20 08:50:51,836 - utils.logger - INFO - Loading and caching prompt template from prompts/prompt_template_agent_new.txt
2025-05-20 08:50:53,482 - utils.logger - INFO - Calling tool: retrieve
2025-05-20 08:50:54,302 - utils.logger - INFO - Tool retrieve routed to grade_documents based on config
2025-05-20 08:50:54,303 - utils.logger - INFO - Grading documents for relevance
2025-05-20 08:50:54,304 - utils.logger - INFO - Loading and caching prompt template from prompts/prompt_template_grade.txt
2025-05-20 08:50:55,176 - utils.logger - INFO - Document relevance score: yes
2025-05-20 08:50:55,177 - utils.logger - INFO - Routing based on relevance_score: yes, rewrite_count: 0
2025-05-20 08:50:55,177 - utils.logger - INFO - Documents are relevant, proceeding to generate
2025-05-20 08:50:55,178 - utils.logger - INFO - Generating final response
2025-05-20 08:50:55,179 - utils.logger - INFO - Loading and caching prompt template from prompts/prompt_template_generate.txt
2025-05-20 08:51:24,453 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-20 08:51:30,349 - utils.logger - INFO - Using cached prompt template for prompts/prompt_template_agent_new.txt
2025-05-20 08:51:32,219 - utils.logger - INFO - Calling tool: requirement_breakdown
2025-05-20 08:51:32,223 - utils.logger - INFO - Loading and caching prompt template from prompts/task_agent_prompt_template_requirement_breakdown.txt
2025-05-20 08:51:37,656 - utils.logger - INFO - Tool requirement_breakdown routed to generate based on config
2025-05-20 08:51:37,659 - utils.logger - INFO - Generating final response
2025-05-20 08:51:37,661 - utils.logger - INFO - Using cached prompt template for prompts/prompt_template_generate.txt
2025-05-20 08:52:24,456 - utils.logger - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-05-20 08:52:53,611 - utils.logger - INFO - Database connection pool closed
